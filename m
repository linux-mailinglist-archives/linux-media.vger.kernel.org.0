Return-Path: <linux-media+bounces-47860-lists+linux-media=lfdr.de@vger.kernel.org>
X-Original-To: lists+linux-media@lfdr.de
Delivered-To: lists+linux-media@lfdr.de
Received: from dfw.mirrors.kernel.org (dfw.mirrors.kernel.org [IPv6:2605:f480:58:1:0:1994:3:14])
	by mail.lfdr.de (Postfix) with ESMTPS id C89DDC91B4E
	for <lists+linux-media@lfdr.de>; Fri, 28 Nov 2025 11:48:55 +0100 (CET)
Received: from smtp.subspace.kernel.org (relay.kernel.org [52.25.139.140])
	(using TLSv1.2 with cipher ECDHE-ECDSA-AES256-GCM-SHA384 (256/256 bits))
	(No client certificate requested)
	by dfw.mirrors.kernel.org (Postfix) with ESMTPS id 1A93B4E07F4
	for <lists+linux-media@lfdr.de>; Fri, 28 Nov 2025 10:48:53 +0000 (UTC)
Received: from localhost.localdomain (localhost.localdomain [127.0.0.1])
	by smtp.subspace.kernel.org (Postfix) with ESMTP id 880ED30DED3;
	Fri, 28 Nov 2025 10:48:46 +0000 (UTC)
X-Original-To: linux-media@vger.kernel.org
Received: from sgoci-sdnproxy-4.icoremail.net (sgoci-sdnproxy-4.icoremail.net [129.150.39.64])
	by smtp.subspace.kernel.org (Postfix) with ESMTP id 4406D30DD10;
	Fri, 28 Nov 2025 10:48:34 +0000 (UTC)
Authentication-Results: smtp.subspace.kernel.org; arc=none smtp.client-ip=129.150.39.64
ARC-Seal:i=1; a=rsa-sha256; d=subspace.kernel.org; s=arc-20240116;
	t=1764326922; cv=none; b=bodCRfsP9DF7qOkgwSn2bU91v/mK4PaDdJnR+6I/liLtJ2+osR9giqMUTZ0rkKam5mZ8SgJ+tf7J7d+tbOa63gGLOoUEYNK7UDw+gbwVLd/g0qN7WHDmJvns/WmtiotCHDeQSknsrqxeMs7FDwduAJYqZzIWiI2eV2FVuPcDRB0=
ARC-Message-Signature:i=1; a=rsa-sha256; d=subspace.kernel.org;
	s=arc-20240116; t=1764326922; c=relaxed/simple;
	bh=++QQz+fDQSXp2wxnYajiRIbIGoYp0tgrN6Cs06rk9o4=;
	h=Date:From:To:Cc:Subject:In-Reply-To:References:Content-Type:
	 MIME-Version:Message-ID; b=GDJWG2m74ilOU0152CfClJDC3V/hZy+hSxZYgcqo3aLApm9qgnD2ZiVQvNFd6OaTIQd3fryNvGk3qH37BdknnCsjyiGrnEpm15sZegaEjSEo61TaKdKZ7PnFCW87cQIva5PlNui9pOPvaKMovc/ZbDYwODmgBKrf4FPkFFb4i90=
ARC-Authentication-Results:i=1; smtp.subspace.kernel.org; dmarc=none (p=none dis=none) header.from=phytium.com.cn; spf=pass smtp.mailfrom=phytium.com.cn; arc=none smtp.client-ip=129.150.39.64
Authentication-Results: smtp.subspace.kernel.org; dmarc=none (p=none dis=none) header.from=phytium.com.cn
Authentication-Results: smtp.subspace.kernel.org; spf=pass smtp.mailfrom=phytium.com.cn
Received: from prodtpl.icoremail.net (unknown [10.12.1.20])
	by hzbj-icmmx-7 (Coremail) with SMTP id AQAAfwAHDZn2fSlp0ni+Ag--.9S2;
	Fri, 28 Nov 2025 18:48:22 +0800 (CST)
Received: from wangmin$phytium.com.cn ( [218.76.62.144] ) by
 ajax-webmail-mail (Coremail) ; Fri, 28 Nov 2025 18:48:08 +0800 (GMT+08:00)
Date: Fri, 28 Nov 2025 18:48:08 +0800 (GMT+08:00)
X-CM-HeaderCharset: UTF-8
From: =?UTF-8?B?546L5pWP?= <wangmin@phytium.com.cn>
To: "Jammy Huang" <jammy_huang@aspeedtech.com>
Cc: "Eddie James" <eajames@linux.ibm.com>,
	"Mauro Carvalho Chehab" <mchehab@kernel.org>,
	"Joel Stanley" <joel@jms.id.au>,
	"Andrew Jeffery" <andrew@codeconstruct.com.au>,
	"Philipp Zabel" <p.zabel@pengutronix.de>,
	linux-media@vger.kernel.org, openbmc@lists.ozlabs.org,
	linux-arm-kernel@lists.infradead.org, linux-aspeed@lists.ozlabs.org,
	linux-kernel@vger.kernel.org,
	=?UTF-8?B?6IiS5aWV5qOL?= <shuyiqi@phytium.com.cn>
Subject: Re: [PATCH] media: aspeed: Fix dram hang at res-change
X-Priority: 3
X-Mailer: Coremail Webmail Server Version 2024.3-cmXT6 build
 20250512(e7b47ee3) Copyright (c) 2002-2025 www.mailtech.cn OP_ICM_ICMVM
In-Reply-To: <20251124-video_dram_reset-v1-1-9d37229e4ec5@aspeedtech.com>
References: <20251124-video_dram_reset-v1-1-9d37229e4ec5@aspeedtech.com>
Content-Transfer-Encoding: base64
X-CM-CTRLDATA: TCYTXGZvb3Rlcl90eHQ9NDMxNTozODM=
Content-Type: text/plain; charset=UTF-8
Precedence: bulk
X-Mailing-List: linux-media@vger.kernel.org
List-Id: <linux-media.vger.kernel.org>
List-Subscribe: <mailto:linux-media+subscribe@vger.kernel.org>
List-Unsubscribe: <mailto:linux-media+unsubscribe@vger.kernel.org>
MIME-Version: 1.0
Message-ID: <120162b9.3256.19aca13d4e0.Coremail.wangmin@phytium.com.cn>
X-Coremail-Locale: zh_CN
X-CM-TRANSID:AQAAfwA3j+zofSlpISQIAA--.9978W
X-CM-SenderInfo: 5zdqwzdlq61x51wl3zoofrzhdfq/1tbiAQAICGkosKwG5wACs-
Authentication-Results: hzbj-icmmx-7; spf=neutral smtp.mail=wangmin@ph
	ytium.com.cn;
X-Coremail-Antispam: 1Uk129KBjvJXoWfGryUXrykGF1kAF18AF47Jwb_yoWDKrWfp3
	Wxt3y8Aw1UK3W7J39ayw18AryrA3y5Gr47Jw1Iq3yUAw1UJrsIgrnxKFWDJ3Wjg3y0vrs8
	tr1qqrs8Xr1UtwUanT9S1TB71UUUUjUqnTZGkaVYY2UrUUUUj1kv1TuYvTs0mT0YCTnIWj
	DUYxn0WfASr-VFAU7a7-sFnT9fnUUIcSsGvfJ3UbIYCTnIWIevJa73UjIFyTuYvj4RJUUU
	UUUUU

CgoKPiAtLS0tLeWOn+Wni+mCruS7ti0tLS0tCj4g5Y+R5Lu25Lq6OiAiSmFtbXkgSHVhbmciIDxq
YW1teV9odWFuZ0Bhc3BlZWR0ZWNoLmNvbT4KPiDlj5HpgIHml7bpl7Q6MjAyNS0xMS0yNCAxMTow
NToxNCAo5pif5pyf5LiAKQo+IOaUtuS7tuS6ujogIkVkZGllIEphbWVzIiA8ZWFqYW1lc0BsaW51
eC5pYm0uY29tPiwgIk1hdXJvIENhcnZhbGhvIENoZWhhYiIgPG1jaGVoYWJAa2VybmVsLm9yZz4s
ICJKb2VsIFN0YW5sZXkiIDxqb2VsQGptcy5pZC5hdT4sICJBbmRyZXcgSmVmZmVyeSIgPGFuZHJl
d0Bjb2RlY29uc3RydWN0LmNvbS5hdT4sICJQaGlsaXBwIFphYmVsIiA8cC56YWJlbEBwZW5ndXRy
b25peC5kZT4KPiDmioTpgIE6IGxpbnV4LW1lZGlhQHZnZXIua2VybmVsLm9yZywgb3BlbmJtY0Bs
aXN0cy5vemxhYnMub3JnLCBsaW51eC1hcm0ta2VybmVsQGxpc3RzLmluZnJhZGVhZC5vcmcsIGxp
bnV4LWFzcGVlZEBsaXN0cy5vemxhYnMub3JnLCBsaW51eC1rZXJuZWxAdmdlci5rZXJuZWwub3Jn
LCAiSmFtbXkgSHVhbmciIDxqYW1teV9odWFuZ0Bhc3BlZWR0ZWNoLmNvbT4KPiDkuLvpopg6IFtQ
QVRDSF0gbWVkaWE6IGFzcGVlZDogRml4IGRyYW0gaGFuZyBhdCByZXMtY2hhbmdlCj4gCj4gRHJh
bSBoYW5nIGNvdWxkIGhhcHBlbiBpbiB0aGUgc3RlcHMgYmVsb3c6Cj4gMS4gc3RhcnQgY2FwdHVy
ZS9jb21wcmVzc2lvbgo+IDIuIG91dC1vZi1sb2NrIHdhdGNoZG9nIHJhaXNlIGlycSBiZWNhdXNl
IG9mIHJlcy1jaGFuZ2UuCj4gMy4gYXNwZWVkX3ZpZGVvX2lycV9yZXNfY2hhbmdlIGRvIGNsay1v
ZmYKPiAKPiBBdCBzdGVwMywgY2FwdHVyZS9jb21wcmVzc2lvbiBjb3VsZCBiZSBub3QgYWNjb21w
bGlzaGVkIHlldC4gSWYgY2xrLW9mZgo+IGluIHRoZSBtaWRkbGUgb2YgdmlkZW8gb3BlcmF0aW9u
LCBkcmFtIGNvbnRyb2xsZXIgY291bGQgaGFuZyBhdCBhc3QyNTAwLgo+IAo+IFVzZSByZXNldCBy
YXRoZXIgdGhhbiBjbGstb2ZmL29uIHRvIGF2b2lkIHRoaXMgcHJvYmxlbS4KPiAKPiBTaWduZWQt
b2ZmLWJ5OiBKYW1teSBIdWFuZyA8amFtbXlfaHVhbmdAYXNwZWVkdGVjaC5jb20+Cj4gLS0tCj4g
T24gQXNwZWVkIEtWTSB0ZXN0aW5nLCB3ZSBmb3VuZCBpdCBjb3VsZCBsZWFkIHRvIGRyYW0taGFu
ZyBpZgo+IHJlcy1jaGFuZ2UuIEFsdGhvdWdoIHRoZSBpc3N1ZSByYXJlbHkgaGFwcGVucywgdGhl
IGltcGFjdCBpcyBzZXJpb3VzLgoKQ2FwdHVyaW5nIGFuZCBjb21wcmVzc2luZyB0aGUgdmlkZW8g
c3RyZWFtIHRha2VzIGxvbmdlciB0aGFuIHRoZSB2aWRlbyBlbmdpbmXigJlzIGlkbGUgcGVyaW9k
LiAKSWYgdGhpcyBpcyBub3QgdGhlIGludGVuZGVkIGJlaGF2aW9yLCBwbGVhc2UgaW5jcmVhc2Ug
dGhlIGZyYW1lIHJhdGUuIFRoaXMgbWFrZXMgcmVzb2x1dGlvbiAKc3dpdGNoZXMgbW9yZSBwcm9u
ZSB0byBoYXBwZW4gd2hlbiB0aGUgdmlkZW8gZW5naW5lIGlzIHdvcmtpbmcuIEhvd2V2ZXIsIGFj
Y29yZGluZyB0byB5b3VyIAplbWFpbCwgdGhpcyBpc3N1ZSByYXJlbHkgb2NjdXJzLiBJcyB0aGVy
ZSBhIHNpbWlsYXIgaXNzdWUgb24gdGhlIEFTVDI2MDAgU29DPwoKPiAKPiBUbyBhdm9pZCB0aGlz
IGlzc3VlLCB3ZSB1c2UgcmVzZXQgb25seSByYXRoYXIgdGhhbiBjbGstb2ZmL29uIGluCj4gcmVz
LWNoYW5nZSB0byBhdm9pZCB0aGlzIGlzc3VlLgo+IC0tLQo+ICBkcml2ZXJzL21lZGlhL3BsYXRm
b3JtL2FzcGVlZC9hc3BlZWQtdmlkZW8uYyB8IDIyICsrKysrKysrKysrKysrKysrKystLS0KPiAg
MSBmaWxlIGNoYW5nZWQsIDE5IGluc2VydGlvbnMoKyksIDMgZGVsZXRpb25zKC0pCj4gCj4gZGlm
ZiAtLWdpdCBhL2RyaXZlcnMvbWVkaWEvcGxhdGZvcm0vYXNwZWVkL2FzcGVlZC12aWRlby5jIGIv
ZHJpdmVycy9tZWRpYS9wbGF0Zm9ybS9hc3BlZWQvYXNwZWVkLXZpZGVvLmMKPiBpbmRleCBiODNl
NDMyNDUyLi40MWNiOTZmNjAxIDEwMDY0NAo+IC0tLSBhL2RyaXZlcnMvbWVkaWEvcGxhdGZvcm0v
YXNwZWVkL2FzcGVlZC12aWRlby5jCj4gKysrIGIvZHJpdmVycy9tZWRpYS9wbGF0Zm9ybS9hc3Bl
ZWQvYXNwZWVkLXZpZGVvLmMKPiBAQCAtMjYsNiArMjYsNyBAQAo+ICAjaW5jbHVkZSA8bGludXgv
d29ya3F1ZXVlLmg+Cj4gICNpbmNsdWRlIDxsaW51eC9kZWJ1Z2ZzLmg+Cj4gICNpbmNsdWRlIDxs
aW51eC9rdGltZS5oPgo+ICsjaW5jbHVkZSA8bGludXgvcmVzZXQuaD4KPiAgI2luY2x1ZGUgPGxp
bnV4L3JlZ21hcC5oPgo+ICAjaW5jbHVkZSA8bGludXgvbWZkL3N5c2Nvbi5oPgo+ICAjaW5jbHVk
ZSA8bWVkaWEvdjRsMi1jdHJscy5oPgo+IEBAIC0zMTAsNiArMzExLDcgQEAgc3RydWN0IGFzcGVl
ZF92aWRlbyB7Cj4gIAl2b2lkIF9faW9tZW0gKmJhc2U7Cj4gIAlzdHJ1Y3QgY2xrICplY2xrOwo+
ICAJc3RydWN0IGNsayAqdmNsazsKPiArCXN0cnVjdCByZXNldF9jb250cm9sICpyZXNldDsKPiAg
Cj4gIAlzdHJ1Y3QgZGV2aWNlICpkZXY7Cj4gIAlzdHJ1Y3QgdjRsMl9jdHJsX2hhbmRsZXIgY3Ry
bF9oYW5kbGVyOwo+IEBAIC03MjAsNiArNzIyLDEzIEBAIHN0YXRpYyB2b2lkIGFzcGVlZF92aWRl
b19vbihzdHJ1Y3QgYXNwZWVkX3ZpZGVvICp2aWRlbykKPiAgCXNldF9iaXQoVklERU9fQ0xPQ0tT
X09OLCAmdmlkZW8tPmZsYWdzKTsKPiAgfQo+ICAKPiArc3RhdGljIHZvaWQgYXNwZWVkX3ZpZGVv
X3Jlc2V0KHN0cnVjdCBhc3BlZWRfdmlkZW8gKnYpCj4gK3sKPiArCXJlc2V0X2NvbnRyb2xfYXNz
ZXJ0KHYtPnJlc2V0KTsKPiArCXVzbGVlcF9yYW5nZSgxMDAsIDE1MCk7Cj4gKwlyZXNldF9jb250
cm9sX2RlYXNzZXJ0KHYtPnJlc2V0KTsKPiArfQo+ICsKPiAgc3RhdGljIHZvaWQgYXNwZWVkX3Zp
ZGVvX2J1ZnNfZG9uZShzdHJ1Y3QgYXNwZWVkX3ZpZGVvICp2aWRlbywKPiAgCQkJCSAgIGVudW0g
dmIyX2J1ZmZlcl9zdGF0ZSBzdGF0ZSkKPiAgewo+IEBAIC03NDIsNyArNzUxLDkgQEAgc3RhdGlj
IHZvaWQgYXNwZWVkX3ZpZGVvX2lycV9yZXNfY2hhbmdlKHN0cnVjdCBhc3BlZWRfdmlkZW8gKnZp
ZGVvLCB1bG9uZyBkZWxheSkKPiAgCj4gIAl2aWRlby0+djRsMl9pbnB1dF9zdGF0dXMgPSBWNEwy
X0lOX1NUX05PX1NJR05BTDsKPiAgCj4gLQlhc3BlZWRfdmlkZW9fb2ZmKHZpZGVvKTsKPiArCWFz
cGVlZF92aWRlb193cml0ZSh2aWRlbywgVkVfSU5URVJSVVBUX0NUUkwsIDApOwo+ICsJYXNwZWVk
X3ZpZGVvX3dyaXRlKHZpZGVvLCBWRV9JTlRFUlJVUFRfU1RBVFVTLCAweGZmZmZmZmZmKTsKPiAr
CWFzcGVlZF92aWRlb19yZXNldCh2aWRlbyk7Cj4gIAlhc3BlZWRfdmlkZW9fYnVmc19kb25lKHZp
ZGVvLCBWQjJfQlVGX1NUQVRFX0VSUk9SKTsKPiAgCj4gIAlzY2hlZHVsZV9kZWxheWVkX3dvcmso
JnZpZGVvLT5yZXNfd29yaywgZGVsYXkpOwo+IEBAIC0xOTg0LDggKzE5OTUsNyBAQCBzdGF0aWMg
dm9pZCBhc3BlZWRfdmlkZW9fc3RvcF9zdHJlYW1pbmcoc3RydWN0IHZiMl9xdWV1ZSAqcSkKPiAg
CQkgKiBOZWVkIHRvIGZvcmNlIHN0b3AgYW55IERNQSBhbmQgdHJ5IGFuZCBnZXQgSFcgaW50byBh
IGdvb2QKPiAgCQkgKiBzdGF0ZSBmb3IgZnV0dXJlIGNhbGxzIHRvIHN0YXJ0IHN0cmVhbWluZyBh
Z2Fpbi4KPiAgCQkgKi8KPiAtCQlhc3BlZWRfdmlkZW9fb2ZmKHZpZGVvKTsKPiAtCQlhc3BlZWRf
dmlkZW9fb24odmlkZW8pOwo+ICsJCWFzcGVlZF92aWRlb19yZXNldCh2aWRlbyk7Cj4gIAo+ICAJ
CWFzcGVlZF92aWRlb19pbml0X3JlZ3ModmlkZW8pOwo+ICAKPiBAQCAtMjIzMCw2ICsyMjQwLDEy
IEBAIHN0YXRpYyBpbnQgYXNwZWVkX3ZpZGVvX2luaXQoc3RydWN0IGFzcGVlZF92aWRlbyAqdmlk
ZW8pCj4gIAl9Cj4gIAlkZXZfaW5mbyh2aWRlby0+ZGV2LCAiaXJxICVkXG4iLCBpcnEpOwo+ICAK
PiArCXZpZGVvLT5yZXNldCA9IGRldm1fcmVzZXRfY29udHJvbF9nZXQoZGV2LCBOVUxMKTsKPiAr
CWlmIChJU19FUlIodmlkZW8tPnJlc2V0KSkgewo+ICsJCWRldl9lcnIoZGV2LCAiVW5hYmxlIHRv
IGdldCByZXNldFxuIik7Cj4gKwkJcmV0dXJuIFBUUl9FUlIodmlkZW8tPnJlc2V0KTsKPiArCX0K
PiArCj4gIAl2aWRlby0+ZWNsayA9IGRldm1fY2xrX2dldChkZXYsICJlY2xrIik7Cj4gIAlpZiAo
SVNfRVJSKHZpZGVvLT5lY2xrKSkgewo+ICAJCWRldl9lcnIoZGV2LCAiVW5hYmxlIHRvIGdldCBF
Q0xLXG4iKTsKPiAKPiAtLS0KPiBiYXNlLWNvbW1pdDogYWMzZmQwMWU0YzFlZmNlOGYyYzA1NGNk
ZWIyZGRkMmZjMGZiMTUwZAo+IGNoYW5nZS1pZDogMjAyNTExMjQtdmlkZW9fZHJhbV9yZXNldC1j
NTMxZjZiYTU3M2YKPiAKPiBCZXN0IHJlZ2FyZHMsCj4gLS0gCj4gSmFtbXkgSHVhbmcgPGphbW15
X2h1YW5nQGFzcGVlZHRlY2guY29tPgo+CgoKDQoNCuS/oeaBr+WuieWFqOWjsOaYju+8muacrOmC
ruS7tuWMheWQq+S/oeaBr+W9kuWPkeS7tuS6uuaJgOWcqOe7hOe7h+aJgOaciSzlj5Hku7bkurrm
iYDlnKjnu4Tnu4flr7nor6Xpgq7ku7bmi6XmnInmiYDmnInmnYPliKnjgILor7fmjqXmlLbogIXm
s6jmhI/kv53lr4Ys5pyq57uP5Y+R5Lu25Lq65Lmm6Z2i6K645Y+vLOS4jeW+l+WQkeS7u+S9lees
rOS4ieaWuee7hOe7h+WSjOS4quS6uumAj+mcsuacrOmCruS7tuaJgOWQq+S/oeaBr+OAgg0KSW5m
b3JtYXRpb24gU2VjdXJpdHkgTm90aWNlOiBUaGUgaW5mb3JtYXRpb24gY29udGFpbmVkIGluIHRo
aXMgbWFpbCBpcyBzb2xlbHkgcHJvcGVydHkgb2YgdGhlIHNlbmRlcidzIG9yZ2FuaXphdGlvbi5U
aGlzIG1haWwgY29tbXVuaWNhdGlvbiBpcyBjb25maWRlbnRpYWwuUmVjaXBpZW50cyBuYW1lZCBh
Ym92ZSBhcmUgb2JsaWdhdGVkIHRvIG1haW50YWluIHNlY3JlY3kgYW5kIGFyZSBub3QgcGVybWl0
dGVkIHRvIGRpc2Nsb3NlIHRoZSBjb250ZW50cyBvZiB0aGlzIGNvbW11bmljYXRpb24gdG8gb3Ro
ZXJzLg==


