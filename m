Return-Path: <linux-media+bounces-1172-lists+linux-media=lfdr.de@vger.kernel.org>
X-Original-To: lists+linux-media@lfdr.de
Delivered-To: lists+linux-media@lfdr.de
Received: from sy.mirrors.kernel.org (sy.mirrors.kernel.org [IPv6:2604:1380:40f1:3f00::1])
	by mail.lfdr.de (Postfix) with ESMTPS id C1FD37FAB0A
	for <lists+linux-media@lfdr.de>; Mon, 27 Nov 2023 21:10:00 +0100 (CET)
Received: from smtp.subspace.kernel.org (wormhole.subspace.kernel.org [52.25.139.140])
	(using TLSv1.2 with cipher ECDHE-RSA-AES256-GCM-SHA384 (256/256 bits))
	(No client certificate requested)
	by sy.mirrors.kernel.org (Postfix) with ESMTPS id 30601B2129B
	for <lists+linux-media@lfdr.de>; Mon, 27 Nov 2023 20:09:58 +0000 (UTC)
Received: from localhost.localdomain (localhost.localdomain [127.0.0.1])
	by smtp.subspace.kernel.org (Postfix) with ESMTP id 5147745C05;
	Mon, 27 Nov 2023 20:09:53 +0000 (UTC)
Authentication-Results: smtp.subspace.kernel.org;
	dkim=pass (2048-bit key) header.d=collabora.com header.i=@collabora.com header.b="nr7uBuwG"
X-Original-To: linux-media@vger.kernel.org
Received: from madras.collabora.co.uk (madras.collabora.co.uk [46.235.227.172])
	by lindbergh.monkeyblade.net (Postfix) with ESMTPS id 6588C1B6
	for <linux-media@vger.kernel.org>; Mon, 27 Nov 2023 12:09:49 -0800 (PST)
Received: from mz550.lan (ec2-34-240-57-77.eu-west-1.compute.amazonaws.com [34.240.57.77])
	(using TLSv1.3 with cipher TLS_AES_256_GCM_SHA384 (256/256 bits)
	 key-exchange X25519 server-signature RSA-PSS (4096 bits) server-digest SHA256)
	(No client certificate requested)
	(Authenticated sender: dbrouwer)
	by madras.collabora.co.uk (Postfix) with ESMTPSA id 6E6386606F5E;
	Mon, 27 Nov 2023 20:09:47 +0000 (GMT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/simple; d=collabora.com;
	s=mail; t=1701115788;
	bh=h0L/2NqgPJXZ3xbM9wW5LpycyHfj3lM2vysHgZ0kprI=;
	h=From:To:Cc:Subject:Date:In-Reply-To:References:From;
	b=nr7uBuwGyYI8Enf0cZrRhLU8JjxHepYTS+HtWv2BTkhbm4gMHdTiVlQKPYLb57RrW
	 fq1N/ztZWzuP+O1XYkJALK/C+QSWR3qC6s26GqThfM56EoqmeTeIWZOx4eJaEgNdkK
	 hHQEt5USZVgnun+Bti2bsJiACguqjkemxU+jb7k+1qCArtZKzQMvbJ5c/Je9wF0a7x
	 qy0qZrLHXZ9wwEgy6grbkNFuv4L8W5RN6gpAE5Qeb4DjqJABxmjj9M1LtP0J/80xYO
	 lEBZBZSksmHhYBmTTTF7AFlKXXxlxok9ON1Te/y7bSzkELJP/6vU7L02Hu5UnUmrB0
	 4s1J5B8cBIq6Q==
From: Deborah Brouwer <deborah.brouwer@collabora.com>
To: linux-media@vger.kernel.org
Cc: hverkuil-cisco@xs4all.nl,
	Deborah Brouwer <deborah.brouwer@collabora.com>
Subject: [PATCH 1/4] v4l2-tracer: autogenerate files that can be added to git
Date: Mon, 27 Nov 2023 12:09:11 -0800
Message-ID: <c384ddec70d213e34de4f28c6409ad558030eedf.1701114910.git.deborah.brouwer@collabora.com>
X-Mailer: git-send-email 2.41.0
In-Reply-To: <cover.1701114910.git.deborah.brouwer@collabora.com>
References: <cover.1701114910.git.deborah.brouwer@collabora.com>
Precedence: bulk
X-Mailing-List: linux-media@vger.kernel.org
List-Id: <linux-media.vger.kernel.org>
List-Subscribe: <mailto:linux-media+subscribe@vger.kernel.org>
List-Unsubscribe: <mailto:linux-media+unsubscribe@vger.kernel.org>
MIME-Version: 1.0
Content-Transfer-Encoding: 8bit

A comment at the beginning of the autogenerated files provides an absolute
path to the location of the autogeneration script. In preparation for
adding these files to the git repository, remove this absolute path.

Also, the autogeneration script was adding an extra newline to
trace-gen.cpp which was causing a whitespace warning, so remove that
too.

Signed-off-by: Deborah Brouwer <deborah.brouwer@collabora.com>
---
 utils/v4l2-tracer/v4l2-tracer-gen.pl | 12 +++++++-----
 1 file changed, 7 insertions(+), 5 deletions(-)

diff --git a/utils/v4l2-tracer/v4l2-tracer-gen.pl b/utils/v4l2-tracer/v4l2-tracer-gen.pl
index cb9c3ab5..1e4cadda 100755
--- a/utils/v4l2-tracer/v4l2-tracer-gen.pl
+++ b/utils/v4l2-tracer/v4l2-tracer-gen.pl
@@ -865,29 +865,29 @@ sub do_open($$) {
 
 $fh_trace_cpp = do_open("trace", "trace-gen.cpp");
 printf $fh_trace_cpp "/* SPDX-License-Identifier: GPL-2.0-only */\n/*\n * Copyright 2022 Collabora Ltd.\n";
-printf $fh_trace_cpp " *\n * AUTOMATICALLY GENERATED BY \'%s\' DO NOT EDIT\n */\n\n", __FILE__;
+printf $fh_trace_cpp " *\n * AUTOMATICALLY GENERATED BY v4l2-tracer-gen.pl DO NOT EDIT\n */\n\n";
 printf $fh_trace_cpp "#include \"v4l2-tracer-common.h\"\n\n";
 
 $fh_trace_h = do_open("trace", "trace-gen.h");
 printf $fh_trace_h "/* SPDX-License-Identifier: GPL-2.0-only */\n/*\n * Copyright 2022 Collabora Ltd.\n";
-printf $fh_trace_h " *\n * AUTOMATICALLY GENERATED BY \'%s\' DO NOT EDIT\n */\n\n", __FILE__;
+printf $fh_trace_h " *\n * AUTOMATICALLY GENERATED BY v4l2-tracer-gen.pl DO NOT EDIT\n */\n\n";
 printf $fh_trace_h "\#ifndef TRACE_GEN_H\n";
 printf $fh_trace_h "\#define TRACE_GEN_H\n\n";
 
 $fh_retrace_cpp = do_open("retrace", "retrace-gen.cpp");
 printf $fh_retrace_cpp "/* SPDX-License-Identifier: GPL-2.0-only */\n/*\n * Copyright 2022 Collabora Ltd.\n";
-printf $fh_retrace_cpp " *\n * AUTOMATICALLY GENERATED BY \'%s\' DO NOT EDIT\n */\n\n", __FILE__;
+printf $fh_retrace_cpp " *\n * AUTOMATICALLY GENERATED BY v4l2-tracer-gen.pl DO NOT EDIT\n */\n\n";
 printf $fh_retrace_cpp "#include \"v4l2-tracer-common.h\"\n\n";
 
 $fh_retrace_h = do_open("retrace", "retrace-gen.h");
 printf $fh_retrace_h "/* SPDX-License-Identifier: GPL-2.0-only */\n/*\n * Copyright 2022 Collabora Ltd.\n";
-printf $fh_retrace_h " *\n * AUTOMATICALLY GENERATED BY \'%s\' DO NOT EDIT\n */\n\n", __FILE__;
+printf $fh_retrace_h " *\n * AUTOMATICALLY GENERATED BY v4l2-tracer-gen.pl DO NOT EDIT\n */\n\n";
 printf $fh_retrace_h "\#ifndef RETRACE_GEN_H\n";
 printf $fh_retrace_h "\#define RETRACE_GEN_H\n\n";
 
 $fh_common_info_h = do_open("common", "v4l2-tracer-info-gen.h");
 printf $fh_common_info_h "/* SPDX-License-Identifier: GPL-2.0-only */\n/*\n * Copyright 2022 Collabora Ltd.\n";
-printf $fh_common_info_h " *\n * AUTOMATICALLY GENERATED BY \'%s\' DO NOT EDIT\n */\n\n", __FILE__;
+printf $fh_common_info_h " *\n * AUTOMATICALLY GENERATED BY v4l2-tracer-gen.pl DO NOT EDIT\n */\n\n";
 printf $fh_common_info_h "\#ifndef V4L2_TRACER_INFO_GEN_H\n";
 printf $fh_common_info_h "\#define V4L2_TRACER_INFO_GEN_H\n\n";
 printf $fh_common_info_h "#include \"v4l2-tracer-common.h\"\n\n";
@@ -1067,6 +1067,8 @@ printf $fh_common_info_h "\t{ -1, \"\" }\n};\n";
 
 printf $fh_trace_h "\n#endif\n";
 close $fh_trace_h;
+# Delete the last of two new lines to avoid a whitespace error
+truncate($fh_trace_cpp, tell($fh_trace_cpp) - 1);
 close $fh_trace_cpp;
 
 printf $fh_retrace_h "\n#endif\n";
-- 
2.41.0


