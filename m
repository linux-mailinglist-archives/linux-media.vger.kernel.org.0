Return-Path: <linux-media-owner@vger.kernel.org>
X-Original-To: lists+linux-media@lfdr.de
Delivered-To: lists+linux-media@lfdr.de
Received: from vger.kernel.org (vger.kernel.org [23.128.96.18])
	by mail.lfdr.de (Postfix) with ESMTP id 95E4B2511AB
	for <lists+linux-media@lfdr.de>; Tue, 25 Aug 2020 07:46:22 +0200 (CEST)
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
        id S1728864AbgHYFqQ (ORCPT <rfc822;lists+linux-media@lfdr.de>);
        Tue, 25 Aug 2020 01:46:16 -0400
Received: from mailgw01.mediatek.com ([210.61.82.183]:34239 "EHLO
        mailgw01.mediatek.com" rhost-flags-OK-FAIL-OK-FAIL) by vger.kernel.org
        with ESMTP id S1728683AbgHYFqQ (ORCPT
        <rfc822;linux-media@vger.kernel.org>);
        Tue, 25 Aug 2020 01:46:16 -0400
X-UUID: cd3f41bffae749e6be946ebf47e1d44d-20200825
DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; c=relaxed/relaxed; d=mediatek.com; s=dk;
        h=Content-Transfer-Encoding:MIME-Version:Content-Type:References:In-Reply-To:Date:CC:To:From:Subject:Message-ID; bh=w7FMF/Hz9dirWuwiWTAlxp0wfCB8/J/Cgf8Fjs9pGX4=;
        b=epucUHnDO8k5svXJEvnlf2PaGogP5qfieQ8tkod49C/ajE0Q5a2vaME+HOvCLNpk+rcyzcynNo39bELtA+cAdOrex28FgLTl5CgbNeI08Tuzolcfneo5Jc7Z0DbBnsXE/a8g92NVfOhLfsZV4/PbDboxUc0G4//1I61aa8QBIwA=;
X-UUID: cd3f41bffae749e6be946ebf47e1d44d-20200825
Received: from mtkcas06.mediatek.inc [(172.21.101.30)] by mailgw01.mediatek.com
        (envelope-from <tiffany.lin@mediatek.com>)
        (Cellopoint E-mail Firewall v4.1.10 Build 0809 with TLS)
        with ESMTP id 8308360; Tue, 25 Aug 2020 13:46:10 +0800
Received: from mtkcas07.mediatek.inc (172.21.101.84) by
 mtkmbs06n1.mediatek.inc (172.21.101.129) with Microsoft SMTP Server (TLS) id
 15.0.1497.2; Tue, 25 Aug 2020 13:46:06 +0800
Received: from [172.21.77.4] (172.21.77.4) by mtkcas07.mediatek.inc
 (172.21.101.73) with Microsoft SMTP Server id 15.0.1497.2 via Frontend
 Transport; Tue, 25 Aug 2020 13:46:06 +0800
Message-ID: <1598334366.1969.1.camel@mtksdaap41>
Subject: Re: [PATCH v4 15/17] media: mtk-vcodec: venc: support
 ENUM_FRAMESIZES on OUTPUT formats
From:   Tiffany Lin <tiffany.lin@mediatek.com>
To:     Alexandre Courbot <acourbot@chromium.org>
CC:     Andrew-CT Chen <andrew-ct.chen@mediatek.com>,
        Hans Verkuil <hverkuil-cisco@xs4all.nl>,
        Yunfei Dong <yunfei.dong@mediatek.com>,
        Maoguang Meng <maoguang.meng@mediatek.com>,
        Matthias Brugger <matthias.bgg@gmail.com>,
        <linux-media@vger.kernel.org>,
        <linux-mediatek@lists.infradead.org>, <devicetree@vger.kernel.org>,
        <linux-kernel@vger.kernel.org>
Date:   Tue, 25 Aug 2020 13:46:06 +0800
In-Reply-To: <20200821103608.2310097-16-acourbot@chromium.org>
References: <20200821103608.2310097-1-acourbot@chromium.org>
         <20200821103608.2310097-16-acourbot@chromium.org>
Content-Type: text/plain; charset="UTF-8"
X-Mailer: Evolution 3.10.4-0ubuntu2 
MIME-Version: 1.0
X-MTK:  N
Content-Transfer-Encoding: base64
Sender: linux-media-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-media.vger.kernel.org>
X-Mailing-List: linux-media@vger.kernel.org

T24gRnJpLCAyMDIwLTA4LTIxIGF0IDE5OjM2ICswOTAwLCBBbGV4YW5kcmUgQ291cmJvdCB3cm90
ZToNCj4gdjRsMi1jb21wbGlhbmNlIHJlcXVpcmVzIEVOVU1fRlJBTUVTSVpFUyB0byBzdXBwb3J0
IE9VVFBVVCBmb3JtYXRzLg0KPiBSZXVzZSBtdGtfdmVuY19maW5kX2Zvcm1hdCgpIHRvIG1ha2Ug
c3VyZSBib3RoIHF1ZXVlcyBhcmUgY29uc2lkZXJlZA0KPiB3aGVuIHNlcnZpbmcgYW4gRU5VTV9G
UkFNRVNJWkVTLg0KPiANCkFja2VkLWJ5OiBUaWZmYW55IExpbiA8dGlmZmFueS5saW5AbWVkaWF0
ZWsuY29tPg0KDQo+IFNpZ25lZC1vZmYtYnk6IEFsZXhhbmRyZSBDb3VyYm90IDxhY291cmJvdEBj
aHJvbWl1bS5vcmc+DQo+IC0tLQ0KPiAgLi4uL3BsYXRmb3JtL210ay12Y29kZWMvbXRrX3Zjb2Rl
Y19lbmMuYyAgICAgIHwgNzEgKysrKysrKysrLS0tLS0tLS0tLQ0KPiAgMSBmaWxlIGNoYW5nZWQs
IDMzIGluc2VydGlvbnMoKyksIDM4IGRlbGV0aW9ucygtKQ0KPiANCj4gZGlmZiAtLWdpdCBhL2Ry
aXZlcnMvbWVkaWEvcGxhdGZvcm0vbXRrLXZjb2RlYy9tdGtfdmNvZGVjX2VuYy5jIGIvZHJpdmVy
cy9tZWRpYS9wbGF0Zm9ybS9tdGstdmNvZGVjL210a192Y29kZWNfZW5jLmMNCj4gaW5kZXggZjhk
NGZiZTkyN2Y5Li4xYjc5MTg1Y2Y5MjIgMTAwNjQ0DQo+IC0tLSBhL2RyaXZlcnMvbWVkaWEvcGxh
dGZvcm0vbXRrLXZjb2RlYy9tdGtfdmNvZGVjX2VuYy5jDQo+ICsrKyBiL2RyaXZlcnMvbWVkaWEv
cGxhdGZvcm0vbXRrLXZjb2RlYy9tdGtfdmNvZGVjX2VuYy5jDQo+IEBAIC0xMjMsMjggKzEyMyw0
NCBAQCBzdGF0aWMgaW50IHZpZGlvY19lbnVtX2ZtdChzdHJ1Y3QgdjRsMl9mbXRkZXNjICpmLA0K
PiAgCXJldHVybiAwOw0KPiAgfQ0KPiAgDQo+ICtzdGF0aWMgY29uc3Qgc3RydWN0IG10a192aWRl
b19mbXQgKm10a192ZW5jX2ZpbmRfZm9ybWF0KHUzMiBmb3VyY2MsDQo+ICsJY29uc3Qgc3RydWN0
IG10a192Y29kZWNfZW5jX3BkYXRhICpwZGF0YSkNCj4gK3sNCj4gKwljb25zdCBzdHJ1Y3QgbXRr
X3ZpZGVvX2ZtdCAqZm10Ow0KPiArCXVuc2lnbmVkIGludCBrOw0KPiArDQo+ICsJZm9yIChrID0g
MDsgayA8IHBkYXRhLT5udW1fY2FwdHVyZV9mb3JtYXRzOyBrKyspIHsNCj4gKwkJZm10ID0gJnBk
YXRhLT5jYXB0dXJlX2Zvcm1hdHNba107DQo+ICsJCWlmIChmbXQtPmZvdXJjYyA9PSBmb3VyY2Mp
DQo+ICsJCQlyZXR1cm4gZm10Ow0KPiArCX0NCj4gKw0KPiArCWZvciAoayA9IDA7IGsgPCBwZGF0
YS0+bnVtX291dHB1dF9mb3JtYXRzOyBrKyspIHsNCj4gKwkJZm10ID0gJnBkYXRhLT5vdXRwdXRf
Zm9ybWF0c1trXTsNCj4gKwkJaWYgKGZtdC0+Zm91cmNjID09IGZvdXJjYykNCj4gKwkJCXJldHVy
biBmbXQ7DQo+ICsJfQ0KPiArDQo+ICsJcmV0dXJuIE5VTEw7DQo+ICt9DQo+ICsNCj4gIHN0YXRp
YyBpbnQgdmlkaW9jX2VudW1fZnJhbWVzaXplcyhzdHJ1Y3QgZmlsZSAqZmlsZSwgdm9pZCAqZmgs
DQo+ICAJCQkJICBzdHJ1Y3QgdjRsMl9mcm1zaXplZW51bSAqZnNpemUpDQo+ICB7DQo+IC0JY29u
c3Qgc3RydWN0IG10a192Y29kZWNfZW5jX3BkYXRhICpwZGF0YSA9DQo+IC0JCWZoX3RvX2N0eChm
aCktPmRldi0+dmVuY19wZGF0YTsNCj4gLQlpbnQgaSA9IDA7DQo+ICsJY29uc3Qgc3RydWN0IG10
a192aWRlb19mbXQgKmZtdDsNCj4gIA0KPiAgCWlmIChmc2l6ZS0+aW5kZXggIT0gMCkNCj4gIAkJ
cmV0dXJuIC1FSU5WQUw7DQo+ICANCj4gLQlmb3IgKGkgPSAwOyBpIDwgcGRhdGEtPm51bV9jYXB0
dXJlX2Zvcm1hdHM7ICsraSkgew0KPiAtCQljb25zdCBzdHJ1Y3QgbXRrX3ZpZGVvX2ZtdCAqZm10
ID0gJnBkYXRhLT5jYXB0dXJlX2Zvcm1hdHNbaV07DQo+ICsJZm10ID0gbXRrX3ZlbmNfZmluZF9m
b3JtYXQoZnNpemUtPnBpeGVsX2Zvcm1hdCwNCj4gKwkJCQkgICBmaF90b19jdHgoZmgpLT5kZXYt
PnZlbmNfcGRhdGEpOw0KPiArCWlmICghZm10KQ0KPiArCQlyZXR1cm4gLUVJTlZBTDsNCj4gIA0K
PiAtCQlpZiAoZnNpemUtPnBpeGVsX2Zvcm1hdCAhPSBmbXQtPmZvdXJjYykNCj4gLQkJCWNvbnRp
bnVlOw0KPiArCWZzaXplLT50eXBlID0gVjRMMl9GUk1TSVpFX1RZUEVfU1RFUFdJU0U7DQo+ICsJ
ZnNpemUtPnN0ZXB3aXNlID0gbXRrX3ZlbmNfZnJhbWVzaXplczsNCj4gIA0KPiAtCQlmc2l6ZS0+
dHlwZSA9IFY0TDJfRlJNU0laRV9UWVBFX1NURVBXSVNFOw0KPiAtCQlmc2l6ZS0+c3RlcHdpc2Ug
PSBtdGtfdmVuY19mcmFtZXNpemVzOw0KPiAtCQlyZXR1cm4gMDsNCj4gLQl9DQo+IC0NCj4gLQly
ZXR1cm4gLUVJTlZBTDsNCj4gKwlyZXR1cm4gMDsNCj4gIH0NCj4gIA0KPiAgc3RhdGljIGludCB2
aWRpb2NfZW51bV9mbXRfdmlkX2NhcChzdHJ1Y3QgZmlsZSAqZmlsZSwgdm9pZCAqcHJpdiwNCj4g
QEAgLTIyMiwyNyArMjM4LDYgQEAgc3RhdGljIHN0cnVjdCBtdGtfcV9kYXRhICptdGtfdmVuY19n
ZXRfcV9kYXRhKHN0cnVjdCBtdGtfdmNvZGVjX2N0eCAqY3R4LA0KPiAgCXJldHVybiAmY3R4LT5x
X2RhdGFbTVRLX1FfREFUQV9EU1RdOw0KPiAgfQ0KPiAgDQo+IC1zdGF0aWMgY29uc3Qgc3RydWN0
IG10a192aWRlb19mbXQgKm10a192ZW5jX2ZpbmRfZm9ybWF0KHN0cnVjdCB2NGwyX2Zvcm1hdCAq
ZiwNCj4gLQljb25zdCBzdHJ1Y3QgbXRrX3Zjb2RlY19lbmNfcGRhdGEgKnBkYXRhKQ0KPiAtew0K
PiAtCWNvbnN0IHN0cnVjdCBtdGtfdmlkZW9fZm10ICpmbXQ7DQo+IC0JdW5zaWduZWQgaW50IGs7
DQo+IC0NCj4gLQlmb3IgKGsgPSAwOyBrIDwgcGRhdGEtPm51bV9jYXB0dXJlX2Zvcm1hdHM7IGsr
Kykgew0KPiAtCQlmbXQgPSAmcGRhdGEtPmNhcHR1cmVfZm9ybWF0c1trXTsNCj4gLQkJaWYgKGZt
dC0+Zm91cmNjID09IGYtPmZtdC5waXgucGl4ZWxmb3JtYXQpDQo+IC0JCQlyZXR1cm4gZm10Ow0K
PiAtCX0NCj4gLQ0KPiAtCWZvciAoayA9IDA7IGsgPCBwZGF0YS0+bnVtX291dHB1dF9mb3JtYXRz
OyBrKyspIHsNCj4gLQkJZm10ID0gJnBkYXRhLT5vdXRwdXRfZm9ybWF0c1trXTsNCj4gLQkJaWYg
KGZtdC0+Zm91cmNjID09IGYtPmZtdC5waXgucGl4ZWxmb3JtYXQpDQo+IC0JCQlyZXR1cm4gZm10
Ow0KPiAtCX0NCj4gLQ0KPiAtCXJldHVybiBOVUxMOw0KPiAtfQ0KPiAtDQo+ICAvKiBWNEwyIHNw
ZWNpZmljYXRpb24gc3VnZ2VzdHMgdGhlIGRyaXZlciBjb3JyZWN0cyB0aGUgZm9ybWF0IHN0cnVj
dCBpZiBhbnkgb2YNCj4gICAqIHRoZSBkaW1lbnNpb25zIGlzIHVuc3VwcG9ydGVkDQo+ICAgKi8N
Cj4gQEAgLTQwMyw3ICszOTgsNyBAQCBzdGF0aWMgaW50IHZpZGlvY192ZW5jX3NfZm10X2NhcChz
dHJ1Y3QgZmlsZSAqZmlsZSwgdm9pZCAqcHJpdiwNCj4gIAkJcmV0dXJuIC1FSU5WQUw7DQo+ICAJ
fQ0KPiAgDQo+IC0JZm10ID0gbXRrX3ZlbmNfZmluZF9mb3JtYXQoZiwgcGRhdGEpOw0KPiArCWZt
dCA9IG10a192ZW5jX2ZpbmRfZm9ybWF0KGYtPmZtdC5waXgucGl4ZWxmb3JtYXQsIHBkYXRhKTsN
Cj4gIAlpZiAoIWZtdCkgew0KPiAgCQlmbXQgPSAmY3R4LT5kZXYtPnZlbmNfcGRhdGEtPmNhcHR1
cmVfZm9ybWF0c1swXTsNCj4gIAkJZi0+Zm10LnBpeC5waXhlbGZvcm1hdCA9IGZtdC0+Zm91cmNj
Ow0KPiBAQCAtNDY3LDcgKzQ2Miw3IEBAIHN0YXRpYyBpbnQgdmlkaW9jX3ZlbmNfc19mbXRfb3V0
KHN0cnVjdCBmaWxlICpmaWxlLCB2b2lkICpwcml2LA0KPiAgCQlyZXR1cm4gLUVJTlZBTDsNCj4g
IAl9DQo+ICANCj4gLQlmbXQgPSBtdGtfdmVuY19maW5kX2Zvcm1hdChmLCBwZGF0YSk7DQo+ICsJ
Zm10ID0gbXRrX3ZlbmNfZmluZF9mb3JtYXQoZi0+Zm10LnBpeC5waXhlbGZvcm1hdCwgcGRhdGEp
Ow0KPiAgCWlmICghZm10KSB7DQo+ICAJCWZtdCA9ICZjdHgtPmRldi0+dmVuY19wZGF0YS0+b3V0
cHV0X2Zvcm1hdHNbMF07DQo+ICAJCWYtPmZtdC5waXgucGl4ZWxmb3JtYXQgPSBmbXQtPmZvdXJj
YzsNCj4gQEAgLTU1MCw3ICs1NDUsNyBAQCBzdGF0aWMgaW50IHZpZGlvY190cnlfZm10X3ZpZF9j
YXBfbXBsYW5lKHN0cnVjdCBmaWxlICpmaWxlLCB2b2lkICpwcml2LA0KPiAgCXN0cnVjdCBtdGtf
dmNvZGVjX2N0eCAqY3R4ID0gZmhfdG9fY3R4KHByaXYpOw0KPiAgCWNvbnN0IHN0cnVjdCBtdGtf
dmNvZGVjX2VuY19wZGF0YSAqcGRhdGEgPSBjdHgtPmRldi0+dmVuY19wZGF0YTsNCj4gIA0KPiAt
CWZtdCA9IG10a192ZW5jX2ZpbmRfZm9ybWF0KGYsIHBkYXRhKTsNCj4gKwlmbXQgPSBtdGtfdmVu
Y19maW5kX2Zvcm1hdChmLT5mbXQucGl4LnBpeGVsZm9ybWF0LCBwZGF0YSk7DQo+ICAJaWYgKCFm
bXQpIHsNCj4gIAkJZm10ID0gJmN0eC0+ZGV2LT52ZW5jX3BkYXRhLT5jYXB0dXJlX2Zvcm1hdHNb
MF07DQo+ICAJCWYtPmZtdC5waXgucGl4ZWxmb3JtYXQgPSBmbXQtPmZvdXJjYzsNCj4gQEAgLTU3
MCw3ICs1NjUsNyBAQCBzdGF0aWMgaW50IHZpZGlvY190cnlfZm10X3ZpZF9vdXRfbXBsYW5lKHN0
cnVjdCBmaWxlICpmaWxlLCB2b2lkICpwcml2LA0KPiAgCXN0cnVjdCBtdGtfdmNvZGVjX2N0eCAq
Y3R4ID0gZmhfdG9fY3R4KHByaXYpOw0KPiAgCWNvbnN0IHN0cnVjdCBtdGtfdmNvZGVjX2VuY19w
ZGF0YSAqcGRhdGEgPSBjdHgtPmRldi0+dmVuY19wZGF0YTsNCj4gIA0KPiAtCWZtdCA9IG10a192
ZW5jX2ZpbmRfZm9ybWF0KGYsIHBkYXRhKTsNCj4gKwlmbXQgPSBtdGtfdmVuY19maW5kX2Zvcm1h
dChmLT5mbXQucGl4LnBpeGVsZm9ybWF0LCBwZGF0YSk7DQo+ICAJaWYgKCFmbXQpIHsNCj4gIAkJ
Zm10ID0gJmN0eC0+ZGV2LT52ZW5jX3BkYXRhLT5vdXRwdXRfZm9ybWF0c1swXTsNCj4gIAkJZi0+
Zm10LnBpeC5waXhlbGZvcm1hdCA9IGZtdC0+Zm91cmNjOw0KDQo=

