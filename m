Return-Path: <linux-media-owner@vger.kernel.org>
X-Original-To: lists+linux-media@lfdr.de
Delivered-To: lists+linux-media@lfdr.de
Received: from vger.kernel.org (vger.kernel.org [23.128.96.18])
	by mail.lfdr.de (Postfix) with ESMTP id 8DAA31EF5E0
	for <lists+linux-media@lfdr.de>; Fri,  5 Jun 2020 12:56:34 +0200 (CEST)
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
        id S1726923AbgFEK4a (ORCPT <rfc822;lists+linux-media@lfdr.de>);
        Fri, 5 Jun 2020 06:56:30 -0400
Received: from mailgw01.mediatek.com ([210.61.82.183]:2648 "EHLO
        mailgw01.mediatek.com" rhost-flags-OK-FAIL-OK-FAIL) by vger.kernel.org
        with ESMTP id S1726918AbgFEK43 (ORCPT
        <rfc822;linux-media@vger.kernel.org>); Fri, 5 Jun 2020 06:56:29 -0400
X-UUID: b9640927bcc44cdc993db3c55b35a80f-20200605
DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; c=relaxed/relaxed; d=mediatek.com; s=dk;
        h=Content-Transfer-Encoding:Content-Type:MIME-Version:References:In-Reply-To:Message-ID:Date:Subject:CC:To:From; bh=w/Htd9tSHADppfEImmJi6MM9WmI8ga3rBOSozn16znU=;
        b=OhhFy4Cy2QcOP+taBbfAME2FtOhgNoUo79mz6BWVv/O37GASUT9mE9Nv2rSInbGEDY/F/g7B1rXS8a+uaTJC7Jdy2uqBpc1avUXdoGDGXxWYcxCcHUTkLplbKgb4G1WdmVlUniQPyCglI9yvThR8wTlejPj+qlQnCpCgUgAiNYQ=;
X-UUID: b9640927bcc44cdc993db3c55b35a80f-20200605
Received: from mtkcas08.mediatek.inc [(172.21.101.126)] by mailgw01.mediatek.com
        (envelope-from <dongchun.zhu@mediatek.com>)
        (Cellopoint E-mail Firewall v4.1.10 Build 0809 with TLS)
        with ESMTP id 353659925; Fri, 05 Jun 2020 18:56:23 +0800
Received: from MTKCAS06.mediatek.inc (172.21.101.30) by
 mtkmbs07n1.mediatek.inc (172.21.101.16) with Microsoft SMTP Server (TLS) id
 15.0.1497.2; Fri, 5 Jun 2020 18:56:19 +0800
Received: from localhost.localdomain (10.17.3.153) by MTKCAS06.mediatek.inc
 (172.21.101.73) with Microsoft SMTP Server id 15.0.1497.2 via Frontend
 Transport; Fri, 5 Jun 2020 18:56:18 +0800
From:   Dongchun Zhu <dongchun.zhu@mediatek.com>
To:     <linus.walleij@linaro.org>, <bgolaszewski@baylibre.com>,
        <mchehab@kernel.org>, <andriy.shevchenko@linux.intel.com>,
        <robh+dt@kernel.org>, <mark.rutland@arm.com>,
        <sakari.ailus@linux.intel.com>, <drinkcat@chromium.org>,
        <tfiga@chromium.org>, <matthias.bgg@gmail.com>,
        <bingbu.cao@intel.com>
CC:     <srv_heupstream@mediatek.com>,
        <linux-mediatek@lists.infradead.org>,
        <linux-arm-kernel@lists.infradead.org>, <sj.huang@mediatek.com>,
        <linux-media@vger.kernel.org>, <devicetree@vger.kernel.org>,
        <louis.kuo@mediatek.com>, <shengnan.wang@mediatek.com>,
        <dongchun.zhu@mediatek.com>
Subject: [V7, 2/2] media: i2c: dw9768: Add DW9768 VCM driver
Date:   Fri, 5 Jun 2020 18:54:12 +0800
Message-ID: <20200605105412.18813-3-dongchun.zhu@mediatek.com>
X-Mailer: git-send-email 2.9.2
In-Reply-To: <20200605105412.18813-1-dongchun.zhu@mediatek.com>
References: <20200605105412.18813-1-dongchun.zhu@mediatek.com>
MIME-Version: 1.0
Content-Type: text/plain
X-MTK:  N
Content-Transfer-Encoding: base64
Sender: linux-media-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-media.vger.kernel.org>
X-Mailing-List: linux-media@vger.kernel.org

QWRkIGEgVjRMMiBzdWItZGV2aWNlIGRyaXZlciBmb3IgRFc5NzY4IHZvaWNlIGNvaWwgbW90b3Is
IHByb3ZpZGluZw0KY29udHJvbCB0byBzZXQgdGhlIGRlc2lyZWQgZm9jdXMgdmlhIElJQyBzZXJp
YWwgaW50ZXJmYWNlLg0KDQpTaWduZWQtb2ZmLWJ5OiBEb25nY2h1biBaaHUgPGRvbmdjaHVuLnpo
dUBtZWRpYXRlay5jb20+DQotLS0NCiBNQUlOVEFJTkVSUyAgICAgICAgICAgICAgICB8ICAgMSAr
DQogZHJpdmVycy9tZWRpYS9pMmMvS2NvbmZpZyAgfCAgMTMgKysNCiBkcml2ZXJzL21lZGlhL2ky
Yy9NYWtlZmlsZSB8ICAgMSArDQogZHJpdmVycy9tZWRpYS9pMmMvZHc5NzY4LmMgfCA1NjYgKysr
KysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrDQogNCBmaWxlcyBjaGFu
Z2VkLCA1ODEgaW5zZXJ0aW9ucygrKQ0KIGNyZWF0ZSBtb2RlIDEwMDY0NCBkcml2ZXJzL21lZGlh
L2kyYy9kdzk3NjguYw0KDQpkaWZmIC0tZ2l0IGEvTUFJTlRBSU5FUlMgYi9NQUlOVEFJTkVSUw0K
aW5kZXggOGQ3MmM0MS4uYzkyZGM5OSAxMDA2NDQNCi0tLSBhL01BSU5UQUlORVJTDQorKysgYi9N
QUlOVEFJTkVSUw0KQEAgLTUxNTcsNiArNTE1Nyw3IEBAIEw6CWxpbnV4LW1lZGlhQHZnZXIua2Vy
bmVsLm9yZw0KIFM6CU1haW50YWluZWQNCiBUOglnaXQgZ2l0Oi8vbGludXh0di5vcmcvbWVkaWFf
dHJlZS5naXQNCiBGOglEb2N1bWVudGF0aW9uL2RldmljZXRyZWUvYmluZGluZ3MvbWVkaWEvaTJj
L2Rvbmd3b29uLGR3OTc2OC55YW1sDQorRjoJZHJpdmVycy9tZWRpYS9pMmMvZHc5NzY4LmMNCiAN
CiBET05HV09PTiBEVzk4MDcgTEVOUyBWT0lDRSBDT0lMIERSSVZFUg0KIE06CVNha2FyaSBBaWx1
cyA8c2FrYXJpLmFpbHVzQGxpbnV4LmludGVsLmNvbT4NCmRpZmYgLS1naXQgYS9kcml2ZXJzL21l
ZGlhL2kyYy9LY29uZmlnIGIvZHJpdmVycy9tZWRpYS9pMmMvS2NvbmZpZw0KaW5kZXggMTI1ZDU5
Ni4uYWZkZjk5NCAxMDA2NDQNCi0tLSBhL2RyaXZlcnMvbWVkaWEvaTJjL0tjb25maWcNCisrKyBi
L2RyaXZlcnMvbWVkaWEvaTJjL0tjb25maWcNCkBAIC0xMDQwLDYgKzEwNDAsMTkgQEAgY29uZmln
IFZJREVPX0RXOTcxNA0KIAkgIGNhcGFiaWxpdHkuIFRoaXMgaXMgZGVzaWduZWQgZm9yIGxpbmVh
ciBjb250cm9sIG9mDQogCSAgdm9pY2UgY29pbCBtb3RvcnMsIGNvbnRyb2xsZWQgdmlhIEkyQyBz
ZXJpYWwgaW50ZXJmYWNlLg0KIA0KK2NvbmZpZyBWSURFT19EVzk3NjgNCisJdHJpc3RhdGUgIkRX
OTc2OCBsZW5zIHZvaWNlIGNvaWwgc3VwcG9ydCINCisJZGVwZW5kcyBvbiBJMkMgJiYgVklERU9f
VjRMMg0KKwlkZXBlbmRzIG9uIFBNDQorCXNlbGVjdCBNRURJQV9DT05UUk9MTEVSDQorCXNlbGVj
dCBWSURFT19WNEwyX1NVQkRFVl9BUEkNCisJc2VsZWN0IFY0TDJfRldOT0RFDQorCWhlbHANCisJ
ICBUaGlzIGlzIGEgZHJpdmVyIGZvciB0aGUgRFc5NzY4IGNhbWVyYSBsZW5zIHZvaWNlIGNvaWwu
DQorCSAgRFc5NzY4IGlzIGEgMTAgYml0IERBQyB3aXRoIDEwMG1BIG91dHB1dCBjdXJyZW50IHNp
bmsNCisJICBjYXBhYmlsaXR5LiBUaGlzIGlzIGRlc2lnbmVkIGZvciBsaW5lYXIgY29udHJvbCBv
Zg0KKwkgIHZvaWNlIGNvaWwgbW90b3JzLCBjb250cm9sbGVkIHZpYSBJMkMgc2VyaWFsIGludGVy
ZmFjZS4NCisNCiBjb25maWcgVklERU9fRFc5ODA3X1ZDTQ0KIAl0cmlzdGF0ZSAiRFc5ODA3IGxl
bnMgdm9pY2UgY29pbCBzdXBwb3J0Ig0KIAlkZXBlbmRzIG9uIEkyQyAmJiBWSURFT19WNEwyICYm
IE1FRElBX0NPTlRST0xMRVINCmRpZmYgLS1naXQgYS9kcml2ZXJzL21lZGlhL2kyYy9NYWtlZmls
ZSBiL2RyaXZlcnMvbWVkaWEvaTJjL01ha2VmaWxlDQppbmRleCA3N2JmN2QwLi40MDU3NDc2IDEw
MDY0NA0KLS0tIGEvZHJpdmVycy9tZWRpYS9pMmMvTWFrZWZpbGUNCisrKyBiL2RyaXZlcnMvbWVk
aWEvaTJjL01ha2VmaWxlDQpAQCAtMjQsNiArMjQsNyBAQCBvYmotJChDT05GSUdfVklERU9fU0FB
Njc1MkhTKSArPSBzYWE2NzUyaHMubw0KIG9iai0kKENPTkZJR19WSURFT19BRDU4MjApICArPSBh
ZDU4MjAubw0KIG9iai0kKENPTkZJR19WSURFT19BSzczNzUpICArPSBhazczNzUubw0KIG9iai0k
KENPTkZJR19WSURFT19EVzk3MTQpICArPSBkdzk3MTQubw0KK29iai0kKENPTkZJR19WSURFT19E
Vzk3NjgpICArPSBkdzk3Njgubw0KIG9iai0kKENPTkZJR19WSURFT19EVzk4MDdfVkNNKSAgKz0g
ZHc5ODA3LXZjbS5vDQogb2JqLSQoQ09ORklHX1ZJREVPX0FEVjcxNzApICs9IGFkdjcxNzAubw0K
IG9iai0kKENPTkZJR19WSURFT19BRFY3MTc1KSArPSBhZHY3MTc1Lm8NCmRpZmYgLS1naXQgYS9k
cml2ZXJzL21lZGlhL2kyYy9kdzk3NjguYyBiL2RyaXZlcnMvbWVkaWEvaTJjL2R3OTc2OC5jDQpu
ZXcgZmlsZSBtb2RlIDEwMDY0NA0KaW5kZXggMDAwMDAwMC4uZjM0YThlZA0KLS0tIC9kZXYvbnVs
bA0KKysrIGIvZHJpdmVycy9tZWRpYS9pMmMvZHc5NzY4LmMNCkBAIC0wLDAgKzEsNTY2IEBADQor
Ly8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEdQTC0yLjANCisvLyBDb3B5cmlnaHQgKGMpIDIw
MjAgTWVkaWFUZWsgSW5jLg0KKw0KKyNpbmNsdWRlIDxsaW51eC9kZWxheS5oPg0KKyNpbmNsdWRl
IDxsaW51eC9pMmMuaD4NCisjaW5jbHVkZSA8bGludXgvbW9kdWxlLmg+DQorI2luY2x1ZGUgPGxp
bnV4L3BtX3J1bnRpbWUuaD4NCisjaW5jbHVkZSA8bGludXgvcmVndWxhdG9yL2NvbnN1bWVyLmg+
DQorI2luY2x1ZGUgPG1lZGlhL3Y0bDItYXN5bmMuaD4NCisjaW5jbHVkZSA8bWVkaWEvdjRsMi1j
dHJscy5oPg0KKyNpbmNsdWRlIDxtZWRpYS92NGwyLWRldmljZS5oPg0KKyNpbmNsdWRlIDxtZWRp
YS92NGwyLWZ3bm9kZS5oPg0KKyNpbmNsdWRlIDxtZWRpYS92NGwyLXN1YmRldi5oPg0KKw0KKyNk
ZWZpbmUgRFc5NzY4X05BTUUJCQkJImR3OTc2OCINCisjZGVmaW5lIERXOTc2OF9NQVhfRk9DVVNf
UE9TCQkJKDEwMjQgLSAxKQ0KKy8qDQorICogVGhpcyBzZXRzIHRoZSBtaW5pbXVtIGdyYW51bGFy
aXR5IGZvciB0aGUgZm9jdXMgcG9zaXRpb25zLg0KKyAqIEEgdmFsdWUgb2YgMSBnaXZlcyBtYXhp
bXVtIGFjY3VyYWN5IGZvciBhIGRlc2lyZWQgZm9jdXMgcG9zaXRpb24NCisgKi8NCisjZGVmaW5l
IERXOTc2OF9GT0NVU19TVEVQUwkJCTENCisNCisvKg0KKyAqIFJpbmcgY29udHJvbCBhbmQgUG93
ZXIgY29udHJvbCByZWdpc3Rlcg0KKyAqIEJpdFsxXSBSSU5HX0VODQorICogMDogRGlyZWN0IG1v
ZGUNCisgKiAxOiBBQUMgbW9kZSAocmluZ2luZyBjb250cm9sIG1vZGUpDQorICogQml0WzBdIFBE
DQorICogMDogTm9ybWFsIG9wZXJhdGlvbiBtb2RlDQorICogMTogUG93ZXIgZG93biBtb2RlDQor
ICogRFc5NzY4IHJlcXVpcmVzIHdhaXRpbmcgdGltZSBvZiBUb3ByIGFmdGVyIFBEIHJlc2V0IHRh
a2VzIHBsYWNlLg0KKyAqLw0KKyNkZWZpbmUgRFc5NzY4X1JJTkdfUERfQ09OVFJPTF9SRUcJCTB4
MDINCisjZGVmaW5lIERXOTc2OF9QRF9NT0RFX09GRgkJCTB4MDANCisjZGVmaW5lIERXOTc2OF9Q
RF9NT0RFX0VOCQkJQklUKDApDQorI2RlZmluZSBEVzk3NjhfQUFDX01PREVfRU4JCQlCSVQoMSkN
CisNCisvKg0KKyAqIERXOTc2OCBzZXBhcmF0ZXMgdHdvIHJlZ2lzdGVycyB0byBjb250cm9sIHRo
ZSBWQ00gcG9zaXRpb24uDQorICogT25lIGZvciBNU0IgdmFsdWUsIGFub3RoZXIgaXMgTFNCIHZh
bHVlLg0KKyAqIERBQ19NU0I6IERbOTo4XSAoQUREOiAweDAzKQ0KKyAqIERBQ19MU0I6IERbNzow
XSAoQUREOiAweDA0KQ0KKyAqIERbOTowXSBEQUMgZGF0YSBpbnB1dDogcG9zaXRpdmUgb3V0cHV0
IGN1cnJlbnQgPSBEWzk6MF0gLyAxMDIzICogMTAwW21BXQ0KKyAqLw0KKyNkZWZpbmUgRFc5NzY4
X01TQl9BRERSCQkJCTB4MDMNCisjZGVmaW5lIERXOTc2OF9MU0JfQUREUgkJCQkweDA0DQorI2Rl
ZmluZSBEVzk3NjhfU1RBVFVTX0FERFIJCQkweDA1DQorDQorLyoNCisgKiBBQUMgbW9kZSBjb250
cm9sICYgcHJlc2NhbGUgcmVnaXN0ZXINCisgKiBCaXRbNzo1XSBOYW1lbHkgQUNbMjowXSwgZGVj
aWRlIHRoZSBWQ00gbW9kZSBhbmQgb3BlcmF0aW9uIHRpbWUuDQorICogMDAxIEFBQzIgMC40OCB4
IFR2aWINCisgKiAwMTAgQUFDMyAwLjcwIHggVHZpYg0KKyAqIDAxMSBBQUM0IDAuNzUgeCBUdmli
DQorICogMTAxIEFBQzggMS4xMyB4IFR2aWINCisgKiBCaXRbMjowXSBOYW1lbHkgUFJFU0NbMjow
XSwgc2V0IHRoZSBpbnRlcm5hbCBjbG9jayBkaXZpZGluZyByYXRlIGFzIGZvbGxvdy4NCisgKiAw
MDAgMg0KKyAqIDAwMSAxDQorICogMDEwIDEvMg0KKyAqIDAxMSAxLzQNCisgKiAxMDAgOA0KKyAq
IDEwMSA0DQorICovDQorI2RlZmluZSBEVzk3NjhfQUFDX1BSRVNDX1JFRwkJCTB4MDYNCisjZGVm
aW5lIERXOTc2OF9BQUNfTU9ERV9TRUxfTUFTSwkJR0VOTUFTSyg3LCA1KQ0KKyNkZWZpbmUgRFc5
NzY4X0NMT0NLX1BSRV9TQ0FMRV9TRUxfTUFTSwkJR0VOTUFTSygyLCAwKQ0KKw0KKy8qDQorICog
VkNNIHBlcmlvZCBvZiB2aWJyYXRpb24gcmVnaXN0ZXINCisgKiBCaXRbNTowXSBEZWZpbmVkIGFz
IFZDTSByaXNpbmcgcGVyaW9kaWMgdGltZSAoVHZpYikgdG9nZXRoZXIgd2l0aCBQUkVTQ1syOjBd
DQorICogVHZpYiA9ICg2LjNtcyArIEFBQ1RbNTowXSAqIDAuMW1zKSAqIERpdmlkaW5nIFJhdGUN
CisgKiBEaXZpZGluZyBSYXRlIGlzIHRoZSBpbnRlcm5hbCBjbG9jayBkaXZpZGluZyByYXRlIHRo
YXQgaXMgZGVmaW5lZCBhdA0KKyAqIFBSRVNDQUxFIHJlZ2lzdGVyIChBREQ6IDB4MDYpDQorICov
DQorI2RlZmluZSBEVzk3NjhfQUFDX1RJTUVfUkVHCQkJMHgwNw0KKw0KKy8qDQorICogRFc5NzY4
IHJlcXVpcmVzIHdhaXRpbmcgdGltZSAoZGVsYXkgdGltZSkgb2YgdF9PUFIgYWZ0ZXIgcG93ZXIt
dXAsDQorICogb3IgaW4gdGhlIGNhc2Ugb2YgUEQgcmVzZXQgdGFraW5nIHBsYWNlLg0KKyAqLw0K
KyNkZWZpbmUgRFc5NzY4X1RfT1BSX1VTCQkJCTEwMDANCisjZGVmaW5lIERXOTc2OF9UdmliX01T
X0JBU0UxMAkJCSg2NCAtIDEpDQorI2RlZmluZSBEVzk3NjhfQUFDX01PREVfREVGQVVMVAkJCTIN
CisjZGVmaW5lIERXOTc2OF9BQUNfVElNRV9ERUZBVUxUCQkJMHgyMA0KKyNkZWZpbmUgRFc5NzY4
X0NMT0NLX1BSRV9TQ0FMRV9ERUZBVUxUCQkxDQorDQorLyoNCisgKiBUaGlzIGFjdHMgYXMgdGhl
IG1pbmltdW0gZ3JhbnVsYXJpdHkgb2YgbGVucyBtb3ZlbWVudC4NCisgKiBLZWVwIHRoaXMgdmFs
dWUgcG93ZXIgb2YgMiwgc28gdGhlIGNvbnRyb2wgc3RlcHMgY2FuIGJlDQorICogdW5pZm9ybWx5
IGFkanVzdGVkIGZvciBncmFkdWFsIGxlbnMgbW92ZW1lbnQsIHdpdGggZGVzaXJlZA0KKyAqIG51
bWJlciBvZiBjb250cm9sIHN0ZXBzLg0KKyAqLw0KKyNkZWZpbmUgRFc5NzY4X01PVkVfU1RFUFMJ
CQkxNg0KKw0KK3N0YXRpYyBjb25zdCBjaGFyICogY29uc3QgZHc5NzY4X3N1cHBseV9uYW1lc1td
ID0gew0KKwkidmluIiwJLyogRGlnaXRhbCBJL08gcG93ZXIgKi8NCisJInZkZCIsCS8qIERpZ2l0
YWwgY29yZSBwb3dlciAqLw0KK307DQorDQorLyogZHc5NzY4IGRldmljZSBzdHJ1Y3R1cmUgKi8N
CitzdHJ1Y3QgZHc5NzY4IHsNCisJc3RydWN0IHJlZ3VsYXRvcl9idWxrX2RhdGEgc3VwcGxpZXNb
QVJSQVlfU0laRShkdzk3Njhfc3VwcGx5X25hbWVzKV07DQorCXN0cnVjdCB2NGwyX2N0cmxfaGFu
ZGxlciBjdHJsczsNCisJc3RydWN0IHY0bDJfY3RybCAqZm9jdXM7DQorCXN0cnVjdCB2NGwyX3N1
YmRldiBzZDsNCisNCisJdTMyIGFhY19tb2RlOw0KKwl1MzIgYWFjX3RpbWluZzsNCisJdTMyIGNs
b2NrX3ByZXNjOw0KK307DQorDQorc3RhdGljIGlubGluZSBzdHJ1Y3QgZHc5NzY4ICpzZF90b19k
dzk3Njgoc3RydWN0IHY0bDJfc3ViZGV2ICpzdWJkZXYpDQorew0KKwlyZXR1cm4gY29udGFpbmVy
X29mKHN1YmRldiwgc3RydWN0IGR3OTc2OCwgc2QpOw0KK30NCisNCitzdHJ1Y3QgcmVndmFsX2xp
c3Qgew0KKwl1OCByZWdfbnVtOw0KKwl1OCB2YWx1ZTsNCit9Ow0KKw0KK3N0cnVjdCBkdzk3Njhf
YWFjX21vZGVfb3RfbXVsdGkgew0KKwl1MzIgYWFjX21vZGVfZW51bTsNCisJdTMyIG90X211bHRp
X2Jhc2UxMDA7DQorfTsNCisNCitzdHJ1Y3QgZHc5NzY4X2Nsa19wcmVzY19kaXZpZGluZ19yYXRl
IHsNCisJdTMyIGNsa19wcmVzY19lbnVtOw0KKwl1MzIgZGl2aWRpbmdfcmF0ZV9iYXNlMTAwOw0K
K307DQorDQorc3RhdGljIGNvbnN0IHN0cnVjdCBkdzk3NjhfYWFjX21vZGVfb3RfbXVsdGkgYWFj
X21vZGVfb3RfbXVsdGlbXSA9IHsNCisJezEsICA0OH0sDQorCXsyLCAgNzB9LA0KKwl7MywgIDc1
fSwNCisJezUsIDExM30sDQorfTsNCisNCitzdGF0aWMgY29uc3Qgc3RydWN0IGR3OTc2OF9jbGtf
cHJlc2NfZGl2aWRpbmdfcmF0ZSBwcmVzY19kaXZpZGluZ19yYXRlW10gPSB7DQorCXswLCAyMDB9
LA0KKwl7MSwgMTAwfSwNCisJezIsICA1MH0sDQorCXszLCAgMjV9LA0KKwl7NCwgODAwfSwNCisJ
ezUsIDQwMH0sDQorfTsNCisNCitzdGF0aWMgdTMyIGR3OTc2OF9maW5kX290X211bHRpKHUzMiBh
YWNfbW9kZV9wYXJhbSkNCit7DQorCXUzMiBjdXJfb3RfbXVsdGlfYmFzZTEwMCA9IDcwOw0KKwl1
bnNpZ25lZCBpbnQgaTsNCisNCisJZm9yIChpID0gMDsgaSA8IEFSUkFZX1NJWkUoYWFjX21vZGVf
b3RfbXVsdGkpOyBpKyspIHsNCisJCWlmIChhYWNfbW9kZV9vdF9tdWx0aVtpXS5hYWNfbW9kZV9l
bnVtID09IGFhY19tb2RlX3BhcmFtKSB7DQorCQkJY3VyX290X211bHRpX2Jhc2UxMDAgPQ0KKwkJ
CQlhYWNfbW9kZV9vdF9tdWx0aVtpXS5vdF9tdWx0aV9iYXNlMTAwOw0KKwkJfQ0KKwl9DQorDQor
CXJldHVybiBjdXJfb3RfbXVsdGlfYmFzZTEwMDsNCit9DQorDQorc3RhdGljIHUzMiBkdzk3Njhf
ZmluZF9kaXZpZGluZ19yYXRlKHUzMiBwcmVzY19wYXJhbSkNCit7DQorCXUzMiBjdXJfY2xrX2Rp
dmlkaW5nX3JhdGVfYmFzZTEwMCA9IDEwMDsNCisJdW5zaWduZWQgaW50IGk7DQorDQorCWZvciAo
aSA9IDA7IGkgPCBBUlJBWV9TSVpFKHByZXNjX2RpdmlkaW5nX3JhdGUpOyBpKyspIHsNCisJCWlm
IChwcmVzY19kaXZpZGluZ19yYXRlW2ldLmNsa19wcmVzY19lbnVtID09IHByZXNjX3BhcmFtKSB7
DQorCQkJY3VyX2Nsa19kaXZpZGluZ19yYXRlX2Jhc2UxMDAgPQ0KKwkJCQlwcmVzY19kaXZpZGlu
Z19yYXRlW2ldLmRpdmlkaW5nX3JhdGVfYmFzZTEwMDsNCisJCX0NCisJfQ0KKw0KKwlyZXR1cm4g
Y3VyX2Nsa19kaXZpZGluZ19yYXRlX2Jhc2UxMDA7DQorfQ0KKw0KKy8qDQorICogRFc5NzY4X0FB
Q19QUkVTQ19SRUcgJiBEVzk3NjhfQUFDX1RJTUVfUkVHIGRldGVybWluZSBWQ00gb3BlcmF0aW9u
IHRpbWUuDQorICogRm9yIGN1cnJlbnQgVkNNIG1vZGU6IEFBQzMsIE9wZXJhdGlvbiBUaW1lIHdv
dWxkIGJlIDAuNzAgeCBUdmliLg0KKyAqIFR2aWIgPSAoNi4zbXMgKyBBQUNUWzU6MF0gKiAwLjFN
UykgKiBEaXZpZGluZyBSYXRlLg0KKyAqIEJlbG93IGlzIGNhbGN1bGF0aW9uIG9mIHRoZSBvcGVy
YXRpb24gZGVsYXkgZm9yIGVhY2ggc3RlcC4NCisgKi8NCitzdGF0aWMgaW5saW5lIHUzMiBkdzk3
NjhfY2FsX21vdmVfZGVsYXkodTMyIGFhY19tb2RlX3BhcmFtLCB1MzIgcHJlc2NfcGFyYW0sDQor
CQkJCQl1MzIgYWFjX3RpbWluZ19wYXJhbSkNCit7DQorCXUzMiBUdmliX3VzOw0KKwl1MzIgb3Rf
bXVsdGlfYmFzZTEwMDsNCisJdTMyIGNsa19kaXZpZGluZ19yYXRlX2Jhc2UxMDA7DQorDQorCW90
X211bHRpX2Jhc2UxMDAgPSBkdzk3NjhfZmluZF9vdF9tdWx0aShhYWNfbW9kZV9wYXJhbSk7DQor
DQorCWNsa19kaXZpZGluZ19yYXRlX2Jhc2UxMDAgPSBkdzk3NjhfZmluZF9kaXZpZGluZ19yYXRl
KHByZXNjX3BhcmFtKTsNCisNCisJVHZpYl91cyA9IChEVzk3NjhfVHZpYl9NU19CQVNFMTAgKyBh
YWNfdGltaW5nX3BhcmFtKSAqDQorCQkgIGNsa19kaXZpZGluZ19yYXRlX2Jhc2UxMDA7DQorDQor
CXJldHVybiBUdmliX3VzICogb3RfbXVsdGlfYmFzZTEwMDsNCit9DQorDQorc3RhdGljIGludCBk
dzk3NjhfbW9kX3JlZyhzdHJ1Y3QgZHc5NzY4ICpkdzk3NjgsIHU4IHJlZywgdTggbWFzaywgdTgg
dmFsKQ0KK3sNCisJc3RydWN0IGkyY19jbGllbnQgKmNsaWVudCA9IHY0bDJfZ2V0X3N1YmRldmRh
dGEoJmR3OTc2OC0+c2QpOw0KKwlpbnQgcmV0Ow0KKw0KKwlyZXQgPSBpMmNfc21idXNfcmVhZF9i
eXRlX2RhdGEoY2xpZW50LCByZWcpOw0KKwlpZiAocmV0IDwgMCkNCisJCXJldHVybiByZXQ7DQor
DQorCXZhbCA9ICgodW5zaWduZWQgY2hhcilyZXQgJiB+bWFzaykgfCAodmFsICYgbWFzayk7DQor
DQorCXJldHVybiBpMmNfc21idXNfd3JpdGVfYnl0ZV9kYXRhKGNsaWVudCwgcmVnLCB2YWwpOw0K
K30NCisNCitzdGF0aWMgaW50IGR3OTc2OF9zZXRfZGFjKHN0cnVjdCBkdzk3NjggKmR3OTc2OCwg
dTE2IHZhbCkNCit7DQorCXN0cnVjdCBpMmNfY2xpZW50ICpjbGllbnQgPSB2NGwyX2dldF9zdWJk
ZXZkYXRhKCZkdzk3NjgtPnNkKTsNCisNCisJLyogV3JpdGUgVkNNIHBvc2l0aW9uIHRvIHJlZ2lz
dGVycyAqLw0KKwlyZXR1cm4gaTJjX3NtYnVzX3dyaXRlX3dvcmRfc3dhcHBlZChjbGllbnQsIERX
OTc2OF9NU0JfQUREUiwgdmFsKTsNCit9DQorDQorc3RhdGljIGludCBkdzk3NjhfaW5pdChzdHJ1
Y3QgZHc5NzY4ICpkdzk3NjgpDQorew0KKwlzdHJ1Y3QgaTJjX2NsaWVudCAqY2xpZW50ID0gdjRs
Ml9nZXRfc3ViZGV2ZGF0YSgmZHc5NzY4LT5zZCk7DQorCXUzMiBtb3ZlX2RlbGF5X3VzOw0KKwlp
bnQgcmV0LCB2YWw7DQorDQorCS8qIFJlc2V0IERXOTc2OF9SSU5HX1BEX0NPTlRST0xfUkVHIHRv
IGRlZmF1bHQgc3RhdHVzIDB4MDAgKi8NCisJcmV0ID0gaTJjX3NtYnVzX3dyaXRlX2J5dGVfZGF0
YShjbGllbnQsIERXOTc2OF9SSU5HX1BEX0NPTlRST0xfUkVHLA0KKwkJCQkJRFc5NzY4X1BEX01P
REVfT0ZGKTsNCisJaWYgKHJldCA8IDApDQorCQlyZXR1cm4gcmV0Ow0KKw0KKwkvKg0KKwkgKiBE
Vzk3NjkgcmVxdWlyZXMgd2FpdGluZyBkZWxheSB0aW1lIG9mIHRfT1BSDQorCSAqIGFmdGVyIFBE
IHJlc2V0IHRha2VzIHBsYWNlLg0KKwkgKi8NCisJdXNsZWVwX3JhbmdlKERXOTc2OF9UX09QUl9V
UywgRFc5NzY4X1RfT1BSX1VTICsgMTAwKTsNCisNCisJLyogU2V0IERXOTc2OF9SSU5HX1BEX0NP
TlRST0xfUkVHIHRvIERXOTc2OF9BQUNfTU9ERV9FTigweDAxKSAqLw0KKwlyZXQgPSBpMmNfc21i
dXNfd3JpdGVfYnl0ZV9kYXRhKGNsaWVudCwgRFc5NzY4X1JJTkdfUERfQ09OVFJPTF9SRUcsDQor
CQkJCQlEVzk3NjhfQUFDX01PREVfRU4pOw0KKwlpZiAocmV0IDwgMCkNCisJCXJldHVybiByZXQ7
DQorDQorCS8qIFNldCBBQUMgbW9kZSAqLw0KKwlyZXQgPSBkdzk3NjhfbW9kX3JlZyhkdzk3Njgs
IERXOTc2OF9BQUNfUFJFU0NfUkVHLA0KKwkJCSAgICAgRFc5NzY4X0FBQ19NT0RFX1NFTF9NQVNL
LA0KKwkJCSAgICAgZHc5NzY4LT5hYWNfbW9kZSA8PCA1KTsNCisJaWYgKHJldCA8IDApDQorCQly
ZXR1cm4gcmV0Ow0KKw0KKwkvKiBTZXQgY2xvY2sgcHJlc2MgKi8NCisJaWYgKGR3OTc2OC0+Y2xv
Y2tfcHJlc2MgIT0gRFc5NzY4X0NMT0NLX1BSRV9TQ0FMRV9ERUZBVUxUKSB7DQorCQlyZXQgPSBk
dzk3NjhfbW9kX3JlZyhkdzk3NjgsIERXOTc2OF9BQUNfUFJFU0NfUkVHLA0KKwkJCQkgICAgIERX
OTc2OF9DTE9DS19QUkVfU0NBTEVfU0VMX01BU0ssDQorCQkJCSAgICAgZHc5NzY4LT5jbG9ja19w
cmVzYyk7DQorCQlpZiAocmV0IDwgMCkNCisJCQlyZXR1cm4gcmV0Ow0KKwl9DQorDQorCS8qIFNl
dCBBQUMgVGltaW5nICovDQorCWlmIChkdzk3NjgtPmFhY190aW1pbmcgIT0gRFc5NzY4X0FBQ19U
SU1FX0RFRkFVTFQpIHsNCisJCXJldCA9IGkyY19zbWJ1c193cml0ZV9ieXRlX2RhdGEoY2xpZW50
LCBEVzk3NjhfQUFDX1RJTUVfUkVHLA0KKwkJCQkJCWR3OTc2OC0+YWFjX3RpbWluZyk7DQorCQlp
ZiAocmV0IDwgMCkNCisJCQlyZXR1cm4gcmV0Ow0KKwl9DQorDQorCW1vdmVfZGVsYXlfdXMgPSBk
dzk3NjhfY2FsX21vdmVfZGVsYXkoZHc5NzY4LT5hYWNfbW9kZSwNCisJCQkJCSAgICAgIGR3OTc2
OC0+Y2xvY2tfcHJlc2MsDQorCQkJCQkgICAgICBkdzk3NjgtPmFhY190aW1pbmcpIC8gMTAwOw0K
Kw0KKwlmb3IgKHZhbCA9IGR3OTc2OC0+Zm9jdXMtPnZhbCAlIERXOTc2OF9NT1ZFX1NURVBTOw0K
KwkgICAgIHZhbCA8PSBkdzk3NjgtPmZvY3VzLT52YWw7DQorCSAgICAgdmFsICs9IERXOTc2OF9N
T1ZFX1NURVBTKSB7DQorCQlyZXQgPSBkdzk3Njhfc2V0X2RhYyhkdzk3NjgsIHZhbCk7DQorCQlp
ZiAocmV0KSB7DQorCQkJZGV2X2VycigmY2xpZW50LT5kZXYsICIlcyBJMkMgZmFpbHVyZTogJWQi
LA0KKwkJCQlfX2Z1bmNfXywgcmV0KTsNCisJCQlyZXR1cm4gcmV0Ow0KKwkJfQ0KKwkJdXNsZWVw
X3JhbmdlKG1vdmVfZGVsYXlfdXMsIG1vdmVfZGVsYXlfdXMgKyAxMDAwKTsNCisJfQ0KKw0KKwly
ZXR1cm4gMDsNCit9DQorDQorc3RhdGljIGludCBkdzk3NjhfcmVsZWFzZShzdHJ1Y3QgZHc5NzY4
ICpkdzk3NjgpDQorew0KKwlzdHJ1Y3QgaTJjX2NsaWVudCAqY2xpZW50ID0gdjRsMl9nZXRfc3Vi
ZGV2ZGF0YSgmZHc5NzY4LT5zZCk7DQorCXUzMiBtb3ZlX2RlbGF5X3VzID0gZHc5NzY4X2NhbF9t
b3ZlX2RlbGF5KGR3OTc2OC0+YWFjX21vZGUsDQorCQkJCQkJICBkdzk3NjgtPmNsb2NrX3ByZXNj
LA0KKwkJCQkJCSAgZHc5NzY4LT5hYWNfdGltaW5nKSAvIDEwMDsNCisJaW50IHJldCwgdmFsOw0K
Kw0KKwl2YWwgPSByb3VuZF9kb3duKGR3OTc2OC0+Zm9jdXMtPnZhbCwgRFc5NzY4X01PVkVfU1RF
UFMpOw0KKwlmb3IgKCA7IHZhbCA+PSAwOyB2YWwgLT0gRFc5NzY4X01PVkVfU1RFUFMpIHsNCisJ
CXJldCA9IGR3OTc2OF9zZXRfZGFjKGR3OTc2OCwgdmFsKTsNCisJCWlmIChyZXQpIHsNCisJCQlk
ZXZfZXJyKCZjbGllbnQtPmRldiwgIkkyQyB3cml0ZSBmYWlsOiAlZCIsIHJldCk7DQorCQkJcmV0
dXJuIHJldDsNCisJCX0NCisJCXVzbGVlcF9yYW5nZShtb3ZlX2RlbGF5X3VzLCBtb3ZlX2RlbGF5
X3VzICsgMTAwMCk7DQorCX0NCisNCisJcmV0ID0gaTJjX3NtYnVzX3dyaXRlX2J5dGVfZGF0YShj
bGllbnQsIERXOTc2OF9SSU5HX1BEX0NPTlRST0xfUkVHLA0KKwkJCQkJRFc5NzY4X1BEX01PREVf
RU4pOw0KKwlpZiAocmV0IDwgMCkNCisJCXJldHVybiByZXQ7DQorDQorCS8qDQorCSAqIERXOTc2
OSByZXF1aXJlcyB3YWl0aW5nIGRlbGF5IHRpbWUgb2YgdF9PUFINCisJICogYWZ0ZXIgUEQgcmVz
ZXQgdGFrZXMgcGxhY2UuDQorCSAqLw0KKwl1c2xlZXBfcmFuZ2UoRFc5NzY4X1RfT1BSX1VTLCBE
Vzk3NjhfVF9PUFJfVVMgKyAxMDApOw0KKw0KKwlyZXR1cm4gMDsNCit9DQorDQorc3RhdGljIGlu
dCBkdzk3NjhfcnVudGltZV9zdXNwZW5kKHN0cnVjdCBkZXZpY2UgKmRldikNCit7DQorCXN0cnVj
dCBpMmNfY2xpZW50ICpjbGllbnQgPSB0b19pMmNfY2xpZW50KGRldik7DQorCXN0cnVjdCB2NGwy
X3N1YmRldiAqc2QgPSBpMmNfZ2V0X2NsaWVudGRhdGEoY2xpZW50KTsNCisJc3RydWN0IGR3OTc2
OCAqZHc5NzY4ID0gc2RfdG9fZHc5NzY4KHNkKTsNCisNCisJZHc5NzY4X3JlbGVhc2UoZHc5NzY4
KTsNCisJcmVndWxhdG9yX2J1bGtfZGlzYWJsZShBUlJBWV9TSVpFKGR3OTc2OF9zdXBwbHlfbmFt
ZXMpLA0KKwkJCSAgICAgICBkdzk3NjgtPnN1cHBsaWVzKTsNCisNCisJcmV0dXJuIDA7DQorfQ0K
Kw0KK3N0YXRpYyBpbnQgZHc5NzY4X3J1bnRpbWVfcmVzdW1lKHN0cnVjdCBkZXZpY2UgKmRldikN
Cit7DQorCXN0cnVjdCBpMmNfY2xpZW50ICpjbGllbnQgPSB0b19pMmNfY2xpZW50KGRldik7DQor
CXN0cnVjdCB2NGwyX3N1YmRldiAqc2QgPSBpMmNfZ2V0X2NsaWVudGRhdGEoY2xpZW50KTsNCisJ
c3RydWN0IGR3OTc2OCAqZHc5NzY4ID0gc2RfdG9fZHc5NzY4KHNkKTsNCisJaW50IHJldDsNCisN
CisJcmV0ID0gcmVndWxhdG9yX2J1bGtfZW5hYmxlKEFSUkFZX1NJWkUoZHc5NzY4X3N1cHBseV9u
YW1lcyksDQorCQkJCSAgICBkdzk3NjgtPnN1cHBsaWVzKTsNCisJaWYgKHJldCA8IDApIHsNCisJ
CWRldl9lcnIoZGV2LCAiZmFpbGVkIHRvIGVuYWJsZSByZWd1bGF0b3JzXG4iKTsNCisJCXJldHVy
biByZXQ7DQorCX0NCisNCisJLyoNCisJICogVGhlIGRhdGFzaGVldCByZWZlcnMgdG8gdF9PUFIg
dGhhdCBuZWVkcyB0byBiZSB3YWl0ZWQgYmVmb3JlIHNlbmRpbmcNCisJICogSTJDIGNvbW1hbmRz
IGFmdGVyIHBvd2VyLXVwLg0KKwkgKi8NCisJdXNsZWVwX3JhbmdlKERXOTc2OF9UX09QUl9VUywg
RFc5NzY4X1RfT1BSX1VTICsgMTAwKTsNCisNCisJcmV0ID0gZHc5NzY4X2luaXQoZHc5NzY4KTsN
CisJaWYgKHJldCA8IDApDQorCQlnb3RvIGRpc2FibGVfcmVndWxhdG9yOw0KKw0KKwlyZXR1cm4g
MDsNCisNCitkaXNhYmxlX3JlZ3VsYXRvcjoNCisJcmVndWxhdG9yX2J1bGtfZGlzYWJsZShBUlJB
WV9TSVpFKGR3OTc2OF9zdXBwbHlfbmFtZXMpLA0KKwkJCSAgICAgICBkdzk3NjgtPnN1cHBsaWVz
KTsNCisNCisJcmV0dXJuIHJldDsNCit9DQorDQorc3RhdGljIGludCBkdzk3Njhfc2V0X2N0cmwo
c3RydWN0IHY0bDJfY3RybCAqY3RybCkNCit7DQorCXN0cnVjdCBkdzk3NjggKmR3OTc2OCA9IGNv
bnRhaW5lcl9vZihjdHJsLT5oYW5kbGVyLA0KKwkJCQkJICAgICBzdHJ1Y3QgZHc5NzY4LCBjdHJs
cyk7DQorDQorCWlmIChjdHJsLT5pZCA9PSBWNEwyX0NJRF9GT0NVU19BQlNPTFVURSkNCisJCXJl
dHVybiBkdzk3Njhfc2V0X2RhYyhkdzk3NjgsIGN0cmwtPnZhbCk7DQorDQorCXJldHVybiAwOw0K
K30NCisNCitzdGF0aWMgY29uc3Qgc3RydWN0IHY0bDJfY3RybF9vcHMgZHc5NzY4X2N0cmxfb3Bz
ID0gew0KKwkuc19jdHJsID0gZHc5NzY4X3NldF9jdHJsLA0KK307DQorDQorc3RhdGljIGludCBk
dzk3Njhfb3BlbihzdHJ1Y3QgdjRsMl9zdWJkZXYgKnNkLCBzdHJ1Y3QgdjRsMl9zdWJkZXZfZmgg
KmZoKQ0KK3sNCisJaW50IHJldDsNCisNCisJcmV0ID0gcG1fcnVudGltZV9nZXRfc3luYyhzZC0+
ZGV2KTsNCisJaWYgKHJldCA8IDApIHsNCisJCXBtX3J1bnRpbWVfcHV0X25vaWRsZShzZC0+ZGV2
KTsNCisJCXJldHVybiByZXQ7DQorCX0NCisNCisJcmV0dXJuIDA7DQorfQ0KKw0KK3N0YXRpYyBp
bnQgZHc5NzY4X2Nsb3NlKHN0cnVjdCB2NGwyX3N1YmRldiAqc2QsIHN0cnVjdCB2NGwyX3N1YmRl
dl9maCAqZmgpDQorew0KKwlwbV9ydW50aW1lX3B1dChzZC0+ZGV2KTsNCisNCisJcmV0dXJuIDA7
DQorfQ0KKw0KK3N0YXRpYyBjb25zdCBzdHJ1Y3QgdjRsMl9zdWJkZXZfaW50ZXJuYWxfb3BzIGR3
OTc2OF9pbnRfb3BzID0gew0KKwkub3BlbiA9IGR3OTc2OF9vcGVuLA0KKwkuY2xvc2UgPSBkdzk3
NjhfY2xvc2UsDQorfTsNCisNCitzdGF0aWMgY29uc3Qgc3RydWN0IHY0bDJfc3ViZGV2X29wcyBk
dzk3Njhfb3BzID0geyB9Ow0KKw0KK3N0YXRpYyBpbnQgZHc5NzY4X2luaXRfY29udHJvbHMoc3Ry
dWN0IGR3OTc2OCAqZHc5NzY4KQ0KK3sNCisJc3RydWN0IHY0bDJfY3RybF9oYW5kbGVyICpoZGwg
PSAmZHc5NzY4LT5jdHJsczsNCisJY29uc3Qgc3RydWN0IHY0bDJfY3RybF9vcHMgKm9wcyA9ICZk
dzk3NjhfY3RybF9vcHM7DQorDQorCXY0bDJfY3RybF9oYW5kbGVyX2luaXQoaGRsLCAxKTsNCisN
CisJZHc5NzY4LT5mb2N1cyA9IHY0bDJfY3RybF9uZXdfc3RkKGhkbCwgb3BzLCBWNEwyX0NJRF9G
T0NVU19BQlNPTFVURSwgMCwNCisJCQkJCSAgRFc5NzY4X01BWF9GT0NVU19QT1MsDQorCQkJCQkg
IERXOTc2OF9GT0NVU19TVEVQUywgMCk7DQorDQorCWlmIChoZGwtPmVycm9yKQ0KKwkJcmV0dXJu
IGhkbC0+ZXJyb3I7DQorDQorCWR3OTc2OC0+c2QuY3RybF9oYW5kbGVyID0gaGRsOw0KKw0KKwly
ZXR1cm4gMDsNCit9DQorDQorc3RhdGljIGludCBkdzk3NjhfcHJvYmUoc3RydWN0IGkyY19jbGll
bnQgKmNsaWVudCkNCit7DQorCXN0cnVjdCBkZXZpY2UgKmRldiA9ICZjbGllbnQtPmRldjsNCisJ
c3RydWN0IGR3OTc2OCAqZHc5NzY4Ow0KKwl1MzIgYWFjX21vZGVfc2VsZWN0Ow0KKwl1MzIgYWFj
X3RpbWluZ19zZWxlY3Q7DQorCXUzMiBjbG9ja19wcmVzY19zZWxlY3Q7DQorCXVuc2lnbmVkIGlu
dCBpOw0KKwlpbnQgcmV0Ow0KKw0KKwlkdzk3NjggPSBkZXZtX2t6YWxsb2MoZGV2LCBzaXplb2Yo
KmR3OTc2OCksIEdGUF9LRVJORUwpOw0KKwlpZiAoIWR3OTc2OCkNCisJCXJldHVybiAtRU5PTUVN
Ow0KKw0KKwkvKiBJbml0aWFsaXplIHN1YmRldiAqLw0KKwl2NGwyX2kyY19zdWJkZXZfaW5pdCgm
ZHc5NzY4LT5zZCwgY2xpZW50LCAmZHc5NzY4X29wcyk7DQorDQorCWR3OTc2OC0+YWFjX21vZGUg
PSBEVzk3NjhfQUFDX01PREVfREVGQVVMVDsNCisJZHc5NzY4LT5hYWNfdGltaW5nID0gRFc5NzY4
X0FBQ19USU1FX0RFRkFVTFQ7DQorCWR3OTc2OC0+Y2xvY2tfcHJlc2MgPSBEVzk3NjhfQ0xPQ0tf
UFJFX1NDQUxFX0RFRkFVTFQ7DQorDQorCS8qIE9wdGlvbmFsIGluZGljYXRpb24gb2YgQUFDIG1v
ZGUgc2VsZWN0ICovDQorCXJldCA9IGZ3bm9kZV9wcm9wZXJ0eV9yZWFkX3UzMihkZXZfZndub2Rl
KGRldiksICJkb25nd29vbixhYWMtbW9kZSIsDQorCQkJCSAgICAgICAmYWFjX21vZGVfc2VsZWN0
KTsNCisNCisJaWYgKCFyZXQpDQorCQlkdzk3NjgtPmFhY19tb2RlID0gYWFjX21vZGVfc2VsZWN0
Ow0KKw0KKwkvKiBPcHRpb25hbCBpbmRpY2F0aW9uIG9mIGNsb2NrIHByZS1zY2FsZSBzZWxlY3Qg
Ki8NCisJcmV0ID0gZndub2RlX3Byb3BlcnR5X3JlYWRfdTMyKGRldl9md25vZGUoZGV2KSwgImRv
bmd3b29uLGNsb2NrLXByZXNjIiwNCisJCQkJICAgICAgICZjbG9ja19wcmVzY19zZWxlY3QpOw0K
Kw0KKwlpZiAoIXJldCkNCisJCWR3OTc2OC0+Y2xvY2tfcHJlc2MgPSBjbG9ja19wcmVzY19zZWxl
Y3Q7DQorDQorCS8qIE9wdGlvbmFsIGluZGljYXRpb24gb2YgQUFDIFRpbWluZyAqLw0KKwlyZXQg
PSBmd25vZGVfcHJvcGVydHlfcmVhZF91MzIoZGV2X2Z3bm9kZShkZXYpLCAiZG9uZ3dvb24sYWFj
LXRpbWluZyIsDQorCQkJCSAgICAgICAmYWFjX3RpbWluZ19zZWxlY3QpOw0KKw0KKwlpZiAoIXJl
dCkNCisJCWR3OTc2OC0+YWFjX3RpbWluZyA9IGFhY190aW1pbmdfc2VsZWN0Ow0KKw0KKwlmb3Ig
KGkgPSAwOyBpIDwgQVJSQVlfU0laRShkdzk3Njhfc3VwcGx5X25hbWVzKTsgaSsrKQ0KKwkJZHc5
NzY4LT5zdXBwbGllc1tpXS5zdXBwbHkgPSBkdzk3Njhfc3VwcGx5X25hbWVzW2ldOw0KKw0KKwly
ZXQgPSBkZXZtX3JlZ3VsYXRvcl9idWxrX2dldChkZXYsIEFSUkFZX1NJWkUoZHc5NzY4X3N1cHBs
eV9uYW1lcyksDQorCQkJCSAgICAgIGR3OTc2OC0+c3VwcGxpZXMpOw0KKwlpZiAocmV0KSB7DQor
CQlkZXZfZXJyKGRldiwgImZhaWxlZCB0byBnZXQgcmVndWxhdG9yc1xuIik7DQorCQlyZXR1cm4g
cmV0Ow0KKwl9DQorDQorCS8qIEluaXRpYWxpemUgY29udHJvbHMgKi8NCisJcmV0ID0gZHc5NzY4
X2luaXRfY29udHJvbHMoZHc5NzY4KTsNCisJaWYgKHJldCkNCisJCWdvdG8gZXJyX2ZyZWVfaGFu
ZGxlcjsNCisNCisJLyogSW5pdGlhbGl6ZSBzdWJkZXYgKi8NCisJZHc5NzY4LT5zZC5mbGFncyB8
PSBWNEwyX1NVQkRFVl9GTF9IQVNfREVWTk9ERTsNCisJZHc5NzY4LT5zZC5pbnRlcm5hbF9vcHMg
PSAmZHc5NzY4X2ludF9vcHM7DQorDQorCXJldCA9IG1lZGlhX2VudGl0eV9wYWRzX2luaXQoJmR3
OTc2OC0+c2QuZW50aXR5LCAwLCBOVUxMKTsNCisJaWYgKHJldCA8IDApDQorCQlnb3RvIGVycl9m
cmVlX2hhbmRsZXI7DQorDQorCWR3OTc2OC0+c2QuZW50aXR5LmZ1bmN0aW9uID0gTUVESUFfRU5U
X0ZfTEVOUzsNCisNCisJcG1fcnVudGltZV9lbmFibGUoZGV2KTsNCisJaWYgKCFwbV9ydW50aW1l
X2VuYWJsZWQoZGV2KSkgew0KKwkJcmV0ID0gZHc5NzY4X3J1bnRpbWVfcmVzdW1lKGRldik7DQor
CQlpZiAocmV0IDwgMCkgew0KKwkJCWRldl9lcnIoZGV2LCAiZmFpbGVkIHRvIHBvd2VyIG9uOiAl
ZFxuIiwgcmV0KTsNCisJCQlnb3RvIGVycl9jbGVhbl9lbnRpdHk7DQorCQl9DQorCX0NCisNCisJ
cmV0ID0gdjRsMl9hc3luY19yZWdpc3Rlcl9zdWJkZXYoJmR3OTc2OC0+c2QpOw0KKwlpZiAocmV0
IDwgMCkgew0KKwkJZGV2X2VycihkZXYsICJmYWlsZWQgdG8gcmVnaXN0ZXIgVjRMMiBzdWJkZXY6
ICVkIiwgcmV0KTsNCisJCWdvdG8gZXJyb3JfYXN5bmNfcmVnaXN0ZXI7DQorCX0NCisNCisJcmV0
dXJuIDA7DQorDQorZXJyb3JfYXN5bmNfcmVnaXN0ZXI6DQorCWlmICghcG1fcnVudGltZV9lbmFi
bGVkKGRldikpDQorCQlkdzk3NjhfcnVudGltZV9zdXNwZW5kKGRldik7DQorZXJyX2NsZWFuX2Vu
dGl0eToNCisJbWVkaWFfZW50aXR5X2NsZWFudXAoJmR3OTc2OC0+c2QuZW50aXR5KTsNCitlcnJf
ZnJlZV9oYW5kbGVyOg0KKwl2NGwyX2N0cmxfaGFuZGxlcl9mcmVlKCZkdzk3NjgtPmN0cmxzKTsN
CisNCisJcmV0dXJuIHJldDsNCit9DQorDQorc3RhdGljIGludCBkdzk3NjhfcmVtb3ZlKHN0cnVj
dCBpMmNfY2xpZW50ICpjbGllbnQpDQorew0KKwlzdHJ1Y3QgdjRsMl9zdWJkZXYgKnNkID0gaTJj
X2dldF9jbGllbnRkYXRhKGNsaWVudCk7DQorCXN0cnVjdCBkdzk3NjggKmR3OTc2OCA9IHNkX3Rv
X2R3OTc2OChzZCk7DQorDQorCXY0bDJfYXN5bmNfdW5yZWdpc3Rlcl9zdWJkZXYoJmR3OTc2OC0+
c2QpOw0KKwl2NGwyX2N0cmxfaGFuZGxlcl9mcmVlKCZkdzk3NjgtPmN0cmxzKTsNCisJbWVkaWFf
ZW50aXR5X2NsZWFudXAoJmR3OTc2OC0+c2QuZW50aXR5KTsNCisJcG1fcnVudGltZV9kaXNhYmxl
KCZjbGllbnQtPmRldik7DQorCWlmICghcG1fcnVudGltZV9zdGF0dXNfc3VzcGVuZGVkKCZjbGll
bnQtPmRldikpDQorCQlkdzk3NjhfcnVudGltZV9zdXNwZW5kKCZjbGllbnQtPmRldik7DQorCXBt
X3J1bnRpbWVfc2V0X3N1c3BlbmRlZCgmY2xpZW50LT5kZXYpOw0KKw0KKwlyZXR1cm4gMDsNCit9
DQorDQorc3RhdGljIGNvbnN0IHN0cnVjdCBvZl9kZXZpY2VfaWQgZHc5NzY4X29mX3RhYmxlW10g
PSB7DQorCXsgLmNvbXBhdGlibGUgPSAiZG9uZ3dvb24sZHc5NzY4IiB9LA0KKwl7IC5jb21wYXRp
YmxlID0gImdpYW50ZWMsZ3Q5NzY5IiB9LA0KKwl7fQ0KK307DQorTU9EVUxFX0RFVklDRV9UQUJM
RShvZiwgZHc5NzY4X29mX3RhYmxlKTsNCisNCitzdGF0aWMgY29uc3Qgc3RydWN0IGRldl9wbV9v
cHMgZHc5NzY4X3BtX29wcyA9IHsNCisJU0VUX1NZU1RFTV9TTEVFUF9QTV9PUFMocG1fcnVudGlt
ZV9mb3JjZV9zdXNwZW5kLA0KKwkJCQlwbV9ydW50aW1lX2ZvcmNlX3Jlc3VtZSkNCisJU0VUX1JV
TlRJTUVfUE1fT1BTKGR3OTc2OF9ydW50aW1lX3N1c3BlbmQsIGR3OTc2OF9ydW50aW1lX3Jlc3Vt
ZSwgTlVMTCkNCit9Ow0KKw0KK3N0YXRpYyBzdHJ1Y3QgaTJjX2RyaXZlciBkdzk3NjhfaTJjX2Ry
aXZlciA9IHsNCisJLmRyaXZlciA9IHsNCisJCS5uYW1lID0gRFc5NzY4X05BTUUsDQorCQkucG0g
PSAmZHc5NzY4X3BtX29wcywNCisJCS5vZl9tYXRjaF90YWJsZSA9IGR3OTc2OF9vZl90YWJsZSwN
CisJfSwNCisJLnByb2JlX25ldyAgPSBkdzk3NjhfcHJvYmUsDQorCS5yZW1vdmUgPSBkdzk3Njhf
cmVtb3ZlLA0KK307DQorbW9kdWxlX2kyY19kcml2ZXIoZHc5NzY4X2kyY19kcml2ZXIpOw0KKw0K
K01PRFVMRV9BVVRIT1IoIkRvbmdjaHVuIFpodSA8ZG9uZ2NodW4uemh1QG1lZGlhdGVrLmNvbT4i
KTsNCitNT0RVTEVfREVTQ1JJUFRJT04oIkRXOTc2OCBWQ00gZHJpdmVyIik7DQorTU9EVUxFX0xJ
Q0VOU0UoIkdQTCB2MiIpOw0KLS0gDQoyLjkuMg0K

