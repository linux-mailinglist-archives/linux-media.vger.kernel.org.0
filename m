Return-Path: <linux-media-owner@vger.kernel.org>
X-Original-To: lists+linux-media@lfdr.de
Delivered-To: lists+linux-media@lfdr.de
Received: from vger.kernel.org (vger.kernel.org [23.128.96.18])
	by mail.lfdr.de (Postfix) with ESMTP id D05C220EBA3
	for <lists+linux-media@lfdr.de>; Tue, 30 Jun 2020 04:50:51 +0200 (CEST)
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
        id S1728859AbgF3Cug (ORCPT <rfc822;lists+linux-media@lfdr.de>);
        Mon, 29 Jun 2020 22:50:36 -0400
Received: from mailgw02.mediatek.com ([210.61.82.184]:33561 "EHLO
        mailgw02.mediatek.com" rhost-flags-OK-FAIL-OK-FAIL) by vger.kernel.org
        with ESMTP id S1726746AbgF3Cuf (ORCPT
        <rfc822;linux-media@vger.kernel.org>);
        Mon, 29 Jun 2020 22:50:35 -0400
X-UUID: 9a18a2477c154c498a647d41e965af79-20200630
DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; c=relaxed/relaxed; d=mediatek.com; s=dk;
        h=Content-Transfer-Encoding:Content-Type:MIME-Version:References:In-Reply-To:Message-ID:Date:Subject:CC:To:From; bh=jSsCQsiXmzGBtmei9s8OM+TwvwaKYztHJvo8zMOMiaM=;
        b=RgOdih+rcdcuIczLw5KE0dvW67xuDmpfzDYBr14qDqso0bOSKMZkgN5VUJb9Gy3r2cnhuJi54ZMVV6p9tCInWbQcGAVwydODCwcB7p7eJl+5zDt5b5hfCDQLEcllYAkVmnXSdCGtDShXuysuuS/1f6h/1wdUavR4CYTJ03bsP7o=;
X-UUID: 9a18a2477c154c498a647d41e965af79-20200630
Received: from mtkcas08.mediatek.inc [(172.21.101.126)] by mailgw02.mediatek.com
        (envelope-from <dongchun.zhu@mediatek.com>)
        (Cellopoint E-mail Firewall v4.1.10 Build 0809 with TLS)
        with ESMTP id 1345571828; Tue, 30 Jun 2020 10:50:20 +0800
Received: from mtkcas08.mediatek.inc (172.21.101.126) by
 mtkmbs07n1.mediatek.inc (172.21.101.16) with Microsoft SMTP Server (TLS) id
 15.0.1497.2; Tue, 30 Jun 2020 10:50:18 +0800
Received: from localhost.localdomain (10.17.3.153) by mtkcas08.mediatek.inc
 (172.21.101.73) with Microsoft SMTP Server id 15.0.1497.2 via Frontend
 Transport; Tue, 30 Jun 2020 10:50:16 +0800
From:   Dongchun Zhu <dongchun.zhu@mediatek.com>
To:     <linus.walleij@linaro.org>, <bgolaszewski@baylibre.com>,
        <mchehab@kernel.org>, <andriy.shevchenko@linux.intel.com>,
        <robh+dt@kernel.org>, <mark.rutland@arm.com>,
        <sakari.ailus@linux.intel.com>, <drinkcat@chromium.org>,
        <tfiga@chromium.org>, <matthias.bgg@gmail.com>,
        <bingbu.cao@intel.com>
CC:     <srv_heupstream@mediatek.com>,
        <linux-mediatek@lists.infradead.org>,
        <linux-arm-kernel@lists.infradead.org>, <sj.huang@mediatek.com>,
        <linux-media@vger.kernel.org>, <devicetree@vger.kernel.org>,
        <louis.kuo@mediatek.com>, <shengnan.wang@mediatek.com>,
        <dongchun.zhu@mediatek.com>
Subject: [PATCH V11 2/2] media: i2c: ov02a10: Add OV02A10 image sensor driver
Date:   Tue, 30 Jun 2020 10:49:42 +0800
Message-ID: <20200630024942.20891-3-dongchun.zhu@mediatek.com>
X-Mailer: git-send-email 2.9.2
In-Reply-To: <20200630024942.20891-1-dongchun.zhu@mediatek.com>
References: <20200630024942.20891-1-dongchun.zhu@mediatek.com>
MIME-Version: 1.0
Content-Type: text/plain
X-MTK:  N
Content-Transfer-Encoding: base64
Sender: linux-media-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-media.vger.kernel.org>
X-Mailing-List: linux-media@vger.kernel.org

QWRkIGEgVjRMMiBzdWItZGV2aWNlIGRyaXZlciBmb3IgT1YwMkExMCBpbWFnZSBzZW5zb3IuDQoN
ClNpZ25lZC1vZmYtYnk6IERvbmdjaHVuIFpodSA8ZG9uZ2NodW4uemh1QG1lZGlhdGVrLmNvbT4N
Ci0tLQ0KIE1BSU5UQUlORVJTICAgICAgICAgICAgICAgICB8ICAgIDEgKw0KIGRyaXZlcnMvbWVk
aWEvaTJjL0tjb25maWcgICB8ICAgMTMgKw0KIGRyaXZlcnMvbWVkaWEvaTJjL01ha2VmaWxlICB8
ICAgIDEgKw0KIGRyaXZlcnMvbWVkaWEvaTJjL292MDJhMTAuYyB8IDEwNTIgKysrKysrKysrKysr
KysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKw0KIDQgZmlsZXMgY2hhbmdlZCwgMTA2NyBp
bnNlcnRpb25zKCspDQogY3JlYXRlIG1vZGUgMTAwNjQ0IGRyaXZlcnMvbWVkaWEvaTJjL292MDJh
MTAuYw0KDQpkaWZmIC0tZ2l0IGEvTUFJTlRBSU5FUlMgYi9NQUlOVEFJTkVSUw0KaW5kZXggMzc4
Yzk2MS4uYTZhMmY4YiAxMDA2NDQNCi0tLSBhL01BSU5UQUlORVJTDQorKysgYi9NQUlOVEFJTkVS
Uw0KQEAgLTEyNTY2LDYgKzEyNTY2LDcgQEAgTDoJbGludXgtbWVkaWFAdmdlci5rZXJuZWwub3Jn
DQogUzoJTWFpbnRhaW5lZA0KIFQ6CWdpdCBnaXQ6Ly9saW51eHR2Lm9yZy9tZWRpYV90cmVlLmdp
dA0KIEY6CURvY3VtZW50YXRpb24vZGV2aWNldHJlZS9iaW5kaW5ncy9tZWRpYS9pMmMvb3Z0aSxv
djAyYTEwLnlhbWwNCitGOglkcml2ZXJzL21lZGlhL2kyYy9vdjAyYTEwLmMNCiANCiBPTU5JVklT
SU9OIE9WMTM4NTggU0VOU09SIERSSVZFUg0KIE06CVNha2FyaSBBaWx1cyA8c2FrYXJpLmFpbHVz
QGxpbnV4LmludGVsLmNvbT4NCmRpZmYgLS1naXQgYS9kcml2ZXJzL21lZGlhL2kyYy9LY29uZmln
IGIvZHJpdmVycy9tZWRpYS9pMmMvS2NvbmZpZw0KaW5kZXggZGExMTAzNi4uNjU1MTljZiAxMDA2
NDQNCi0tLSBhL2RyaXZlcnMvbWVkaWEvaTJjL0tjb25maWcNCisrKyBiL2RyaXZlcnMvbWVkaWEv
aTJjL0tjb25maWcNCkBAIC04MTIsNiArODEyLDE5IEBAIGNvbmZpZyBWSURFT19JTVgzNTUNCiAJ
ICBUbyBjb21waWxlIHRoaXMgZHJpdmVyIGFzIGEgbW9kdWxlLCBjaG9vc2UgTSBoZXJlOiB0aGUN
CiAJICBtb2R1bGUgd2lsbCBiZSBjYWxsZWQgaW14MzU1Lg0KIA0KK2NvbmZpZyBWSURFT19PVjAy
QTEwDQorCXRyaXN0YXRlICJPbW5pVmlzaW9uIE9WMDJBMTAgc2Vuc29yIHN1cHBvcnQiDQorCWRl
cGVuZHMgb24gSTJDICYmIFZJREVPX1Y0TDINCisJc2VsZWN0IE1FRElBX0NPTlRST0xMRVINCisJ
c2VsZWN0IFZJREVPX1Y0TDJfU1VCREVWX0FQSQ0KKwlzZWxlY3QgVjRMMl9GV05PREUNCisJaGVs
cA0KKwkgIFRoaXMgaXMgYSBWaWRlbzRMaW51eDIgc2Vuc29yIGRyaXZlciBmb3IgdGhlIE9tbmlW
aXNpb24NCisJICBPVjAyQTEwIGNhbWVyYS4NCisNCisJICBUbyBjb21waWxlIHRoaXMgZHJpdmVy
IGFzIGEgbW9kdWxlLCBjaG9vc2UgTSBoZXJlOiB0aGUNCisJICBtb2R1bGUgd2lsbCBiZSBjYWxs
ZWQgb3YwMmExMC4NCisNCiBjb25maWcgVklERU9fT1YyNjQwDQogCXRyaXN0YXRlICJPbW5pVmlz
aW9uIE9WMjY0MCBzZW5zb3Igc3VwcG9ydCINCiAJZGVwZW5kcyBvbiBWSURFT19WNEwyICYmIEky
Qw0KZGlmZiAtLWdpdCBhL2RyaXZlcnMvbWVkaWEvaTJjL01ha2VmaWxlIGIvZHJpdmVycy9tZWRp
YS9pMmMvTWFrZWZpbGUNCmluZGV4IDk5M2FjYWIuLjM4NGU2NzYgMTAwNjQ0DQotLS0gYS9kcml2
ZXJzL21lZGlhL2kyYy9NYWtlZmlsZQ0KKysrIGIvZHJpdmVycy9tZWRpYS9pMmMvTWFrZWZpbGUN
CkBAIC02Myw2ICs2Myw3IEBAIG9iai0kKENPTkZJR19WSURFT19WUDI3U01QWCkgKz0gdnAyN3Nt
cHgubw0KIG9iai0kKENPTkZJR19WSURFT19TT05ZX0JURl9NUFgpICs9IHNvbnktYnRmLW1weC5v
DQogb2JqLSQoQ09ORklHX1ZJREVPX1VQRDY0MDMxQSkgKz0gdXBkNjQwMzFhLm8NCiBvYmotJChD
T05GSUdfVklERU9fVVBENjQwODMpICs9IHVwZDY0MDgzLm8NCitvYmotJChDT05GSUdfVklERU9f
T1YwMkExMCkgKz0gb3YwMmExMC5vDQogb2JqLSQoQ09ORklHX1ZJREVPX09WMjY0MCkgKz0gb3Yy
NjQwLm8NCiBvYmotJChDT05GSUdfVklERU9fT1YyNjgwKSArPSBvdjI2ODAubw0KIG9iai0kKENP
TkZJR19WSURFT19PVjI2ODUpICs9IG92MjY4NS5vDQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9tZWRp
YS9pMmMvb3YwMmExMC5jIGIvZHJpdmVycy9tZWRpYS9pMmMvb3YwMmExMC5jDQpuZXcgZmlsZSBt
b2RlIDEwMDY0NA0KaW5kZXggMDAwMDAwMC4uZjdmZDMyOQ0KLS0tIC9kZXYvbnVsbA0KKysrIGIv
ZHJpdmVycy9tZWRpYS9pMmMvb3YwMmExMC5jDQpAQCAtMCwwICsxLDEwNTIgQEANCisvLyBTUERY
LUxpY2Vuc2UtSWRlbnRpZmllcjogR1BMLTIuMA0KKy8vIENvcHlyaWdodCAoYykgMjAyMCBNZWRp
YVRlayBJbmMuDQorDQorI2luY2x1ZGUgPGxpbnV4L2Nsay5oPg0KKyNpbmNsdWRlIDxsaW51eC9k
ZWxheS5oPg0KKyNpbmNsdWRlIDxsaW51eC9kZXZpY2UuaD4NCisjaW5jbHVkZSA8bGludXgvZ3Bp
by9jb25zdW1lci5oPg0KKyNpbmNsdWRlIDxsaW51eC9pMmMuaD4NCisjaW5jbHVkZSA8bGludXgv
bW9kdWxlLmg+DQorI2luY2x1ZGUgPGxpbnV4L3BtX3J1bnRpbWUuaD4NCisjaW5jbHVkZSA8bGlu
dXgvcmVndWxhdG9yL2NvbnN1bWVyLmg+DQorI2luY2x1ZGUgPG1lZGlhL21lZGlhLWVudGl0eS5o
Pg0KKyNpbmNsdWRlIDxtZWRpYS92NGwyLWFzeW5jLmg+DQorI2luY2x1ZGUgPG1lZGlhL3Y0bDIt
Y3RybHMuaD4NCisjaW5jbHVkZSA8bWVkaWEvdjRsMi1zdWJkZXYuaD4NCisjaW5jbHVkZSA8bWVk
aWEvdjRsMi1md25vZGUuaD4NCisNCisjZGVmaW5lIENISVBfSUQJCQkJCQkweDI1MDkNCisjZGVm
aW5lIE9WMDJBMTBfUkVHX0NISVBfSURfSAkJCQkweDAyDQorI2RlZmluZSBPVjAyQTEwX1JFR19D
SElQX0lEX0wJCQkJMHgwMw0KKw0KKy8qIEJpdFsxXSB2ZXJ0aWNhbCB1cHNpZGUgZG93biAqLw0K
Ky8qIEJpdFswXSBob3Jpem9udGFsIG1pcnJvciAqLw0KKyNkZWZpbmUgUkVHX01JUlJPUl9GTElQ
X0NPTlRST0wJCQkJMHgzZg0KKw0KKy8qIE9yaWVudGF0aW9uICovDQorI2RlZmluZSBSRUdfTUlS
Uk9SX0ZMSVBfRU5BQkxFCQkJCTB4MDMNCisNCisvKiBCaXRbMjowXSBNSVBJIHRyYW5zbWlzc2lv
biBzcGVlZCBzZWxlY3QgKi8NCisjZGVmaW5lIFRYX1NQRUVEX0FSRUFfU0VMCQkJCTB4YTENCisj
ZGVmaW5lIE9WMDJBMTBfTUlQSV9UWF9TUEVFRF9ERUZBVUxUCQkJMHgwMw0KKw0KKyNkZWZpbmUg
UkVHX1BBR0VfU1dJVENICQkJCQkweGZkDQorI2RlZmluZSBSRUdfR0xPQkFMX0VGRkVDVElWRQkJ
CQkweDAxDQorI2RlZmluZSBSRUdfRU5BQkxFCQkJCQlCSVQoMCkNCisNCisjZGVmaW5lIFJFR19T
Q19DVFJMX01PREUJCQkJMHhhYw0KKyNkZWZpbmUgU0NfQ1RSTF9NT0RFX1NUQU5EQlkJCQkJMHgw
MA0KKyNkZWZpbmUgU0NfQ1RSTF9NT0RFX1NUUkVBTUlORwkJCQkweDAxDQorDQorI2RlZmluZSBP
VjAyQTEwX0VYUF9TSElGVAkJCQk4DQorI2RlZmluZSBPVjAyQTEwX1JFR19FWFBPU1VSRV9ICQkJ
CTB4MDMNCisjZGVmaW5lIE9WMDJBMTBfUkVHX0VYUE9TVVJFX0wJCQkJMHgwNA0KKyNkZWZpbmUJ
T1YwMkExMF9FWFBPU1VSRV9NSU4JCQkJNA0KKyNkZWZpbmUgT1YwMkExMF9FWFBPU1VSRV9NQVhf
TUFSR0lOCQkJNA0KKyNkZWZpbmUJT1YwMkExMF9FWFBPU1VSRV9TVEVQCQkJCTENCisNCisjZGVm
aW5lIE9WMDJBMTBfVlRTX1NISUZUCQkJCTgNCisjZGVmaW5lIE9WMDJBMTBfUkVHX1ZUU19ICQkJ
CTB4MDUNCisjZGVmaW5lIE9WMDJBMTBfUkVHX1ZUU19MCQkJCTB4MDYNCisjZGVmaW5lIE9WMDJB
MTBfVlRTX01BWAkJCQkJMHgyMDlmDQorI2RlZmluZSBPVjAyQTEwX0JBU0lDX0xJTkUJCQkJMTIy
NA0KKw0KKyNkZWZpbmUgT1YwMkExMF9SRUdfR0FJTgkJCQkweDI0DQorI2RlZmluZSBPVjAyQTEw
X0dBSU5fTUlOCQkJCTB4MTANCisjZGVmaW5lIE9WMDJBMTBfR0FJTl9NQVgJCQkJMHhmOA0KKyNk
ZWZpbmUgT1YwMkExMF9HQUlOX1NURVAJCQkJMHgwMQ0KKyNkZWZpbmUgT1YwMkExMF9HQUlOX0RF
RkFVTFQJCQkJMHg0MA0KKw0KKy8qIFRlc3QgcGF0dGVybiBjb250cm9sICovDQorI2RlZmluZSBP
VjAyQTEwX1JFR19URVNUX1BBVFRFUk4JCQkweGI2DQorDQorI2RlZmluZSBIWl9QRVJfTUhaCQkJ
CQkxMDAwMDAwTA0KKyNkZWZpbmUgT1YwMkExMF9MSU5LX0ZSRVFfMzkwTUhaCQkJKDM5MCAqIEha
X1BFUl9NSFopDQorI2RlZmluZSBPVjAyQTEwX0VDTEtfRlJFUQkJCQkoMjQgKiBIWl9QRVJfTUha
KQ0KKyNkZWZpbmUgT1YwMkExMF9EQVRBX0xBTkVTCQkJCTENCisjZGVmaW5lIE9WMDJBMTBfQklU
U19QRVJfU0FNUExFCQkJCTEwDQorDQorc3RhdGljIGNvbnN0IGNoYXIgKiBjb25zdCBvdjAyYTEw
X3N1cHBseV9uYW1lc1tdID0gew0KKwkiZG92ZGQiLAkvKiBEaWdpdGFsIEkvTyBwb3dlciAqLw0K
KwkiYXZkZCIsCQkvKiBBbmFsb2cgcG93ZXIgKi8NCisJImR2ZGQiLAkJLyogRGlnaXRhbCBjb3Jl
IHBvd2VyICovDQorfTsNCisNCitzdHJ1Y3Qgb3YwMmExMF9yZWcgew0KKwl1OCBhZGRyOw0KKwl1
OCB2YWw7DQorfTsNCisNCitzdHJ1Y3Qgb3YwMmExMF9yZWdfbGlzdCB7DQorCXUzMiBudW1fb2Zf
cmVnczsNCisJY29uc3Qgc3RydWN0IG92MDJhMTBfcmVnICpyZWdzOw0KK307DQorDQorc3RydWN0
IG92MDJhMTBfbW9kZSB7DQorCXUzMiB3aWR0aDsNCisJdTMyIGhlaWdodDsNCisJdTMyIGV4cF9k
ZWY7DQorCXUzMiBodHNfZGVmOw0KKwl1MzIgdnRzX2RlZjsNCisJY29uc3Qgc3RydWN0IG92MDJh
MTBfcmVnX2xpc3QgcmVnX2xpc3Q7DQorfTsNCisNCitzdHJ1Y3Qgb3YwMmExMCB7DQorCXUzMiBl
Y2xrX2ZyZXE7DQorCXUzMiBtaXBpX2Nsb2NrX3R4X3NwZWVkOw0KKw0KKwlzdHJ1Y3QgY2xrICpl
Y2xrOw0KKwlzdHJ1Y3QgZ3Bpb19kZXNjICpwZF9ncGlvOw0KKwlzdHJ1Y3QgZ3Bpb19kZXNjICpy
c3RfZ3BpbzsNCisJc3RydWN0IHJlZ3VsYXRvcl9idWxrX2RhdGEgc3VwcGxpZXNbQVJSQVlfU0la
RShvdjAyYTEwX3N1cHBseV9uYW1lcyldOw0KKw0KKwlib29sIHN0cmVhbWluZzsNCisJYm9vbCB1
cHNpZGVfZG93bjsNCisNCisJLyoNCisJICogU2VyaWFsaXplIGNvbnRyb2wgYWNjZXNzLCBnZXQv
c2V0IGZvcm1hdCwgZ2V0IHNlbGVjdGlvbg0KKwkgKiBhbmQgc3RhcnQgc3RyZWFtaW5nLg0KKwkg
Ki8NCisJc3RydWN0IG11dGV4IG11dGV4Ow0KKwlzdHJ1Y3QgdjRsMl9zdWJkZXYgc3ViZGV2Ow0K
KwlzdHJ1Y3QgbWVkaWFfcGFkIHBhZDsNCisJc3RydWN0IHY0bDJfbWJ1c19mcmFtZWZtdCBmbXQ7
DQorCXN0cnVjdCB2NGwyX2N0cmxfaGFuZGxlciBjdHJsX2hhbmRsZXI7DQorCXN0cnVjdCB2NGwy
X2N0cmwgKmV4cG9zdXJlOw0KKw0KKwljb25zdCBzdHJ1Y3Qgb3YwMmExMF9tb2RlICpjdXJfbW9k
ZTsNCit9Ow0KKw0KK3N0YXRpYyBpbmxpbmUgc3RydWN0IG92MDJhMTAgKnRvX292MDJhMTAoc3Ry
dWN0IHY0bDJfc3ViZGV2ICpzZCkNCit7DQorCXJldHVybiBjb250YWluZXJfb2Yoc2QsIHN0cnVj
dCBvdjAyYTEwLCBzdWJkZXYpOw0KK30NCisNCisvKg0KKyAqIGVjbGsgMjRNaHoNCisgKiBwY2xr
IDM5TWh6DQorICogbGluZWxlbmd0aCA5MzQoMHgzYTYpDQorICogZnJhbWVsZW5ndGggMTM5MCgw
eDU2RSkNCisgKiBncmFid2luZG93X3dpZHRoIDE2MDANCisgKiBncmFid2luZG93X2hlaWdodCAx
MjAwDQorICogbWF4X2ZyYW1lcmF0ZSAzMGZwcw0KKyAqIG1pcGlfZGF0YXJhdGUgcGVyIGxhbmUg
NzgwTWJwcw0KKyAqLw0KK3N0YXRpYyBjb25zdCBzdHJ1Y3Qgb3YwMmExMF9yZWcgb3YwMmExMF8x
NjAweDEyMDBfcmVnc1tdID0gew0KKwl7MHhmZCwgMHgwMX0sDQorCXsweGFjLCAweDAwfSwNCisJ
ezB4ZmQsIDB4MDB9LA0KKwl7MHgyZiwgMHgyOX0sDQorCXsweDM0LCAweDAwfSwNCisJezB4MzUs
IDB4MjF9LA0KKwl7MHgzMCwgMHgxNX0sDQorCXsweDMzLCAweDAxfSwNCisJezB4ZmQsIDB4MDF9
LA0KKwl7MHg0NCwgMHgwMH0sDQorCXsweDJhLCAweDRjfSwNCisJezB4MmIsIDB4MWV9LA0KKwl7
MHgyYywgMHg2MH0sDQorCXsweDI1LCAweDExfSwNCisJezB4MDMsIDB4MDF9LA0KKwl7MHgwNCwg
MHhhZX0sDQorCXsweDA5LCAweDAwfSwNCisJezB4MGEsIDB4MDJ9LA0KKwl7MHgwNiwgMHhhNn0s
DQorCXsweDMxLCAweDAwfSwNCisJezB4MjQsIDB4NDB9LA0KKwl7MHgwMSwgMHgwMX0sDQorCXsw
eGZiLCAweDczfSwNCisJezB4ZmQsIDB4MDF9LA0KKwl7MHgxNiwgMHgwNH0sDQorCXsweDFjLCAw
eDA5fSwNCisJezB4MjEsIDB4NDJ9LA0KKwl7MHgxMiwgMHgwNH0sDQorCXsweDEzLCAweDEwfSwN
CisJezB4MTEsIDB4NDB9LA0KKwl7MHgzMywgMHg4MX0sDQorCXsweGQwLCAweDAwfSwNCisJezB4
ZDEsIDB4MDF9LA0KKwl7MHhkMiwgMHgwMH0sDQorCXsweDUwLCAweDEwfSwNCisJezB4NTEsIDB4
MjN9LA0KKwl7MHg1MiwgMHgyMH0sDQorCXsweDUzLCAweDEwfSwNCisJezB4NTQsIDB4MDJ9LA0K
Kwl7MHg1NSwgMHgyMH0sDQorCXsweDU2LCAweDAyfSwNCisJezB4NTgsIDB4NDh9LA0KKwl7MHg1
ZCwgMHgxNX0sDQorCXsweDVlLCAweDA1fSwNCisJezB4NjYsIDB4NjZ9LA0KKwl7MHg2OCwgMHg2
OH0sDQorCXsweDZiLCAweDAwfSwNCisJezB4NmMsIDB4MDB9LA0KKwl7MHg2ZiwgMHg0MH0sDQor
CXsweDcwLCAweDQwfSwNCisJezB4NzEsIDB4MGF9LA0KKwl7MHg3MiwgMHhmMH0sDQorCXsweDcz
LCAweDEwfSwNCisJezB4NzUsIDB4ODB9LA0KKwl7MHg3NiwgMHgxMH0sDQorCXsweDg0LCAweDAw
fSwNCisJezB4ODUsIDB4MTB9LA0KKwl7MHg4NiwgMHgxMH0sDQorCXsweDg3LCAweDAwfSwNCisJ
ezB4OGEsIDB4MjJ9LA0KKwl7MHg4YiwgMHgyMn0sDQorCXsweDE5LCAweGYxfSwNCisJezB4Mjks
IDB4MDF9LA0KKwl7MHhmZCwgMHgwMX0sDQorCXsweDlkLCAweDE2fSwNCisJezB4YTAsIDB4Mjl9
LA0KKwl7MHhhMSwgMHgwM30sDQorCXsweGFkLCAweDYyfSwNCisJezB4YWUsIDB4MDB9LA0KKwl7
MHhhZiwgMHg4NX0sDQorCXsweGIxLCAweDAxfSwNCisJezB4OGUsIDB4MDZ9LA0KKwl7MHg4Ziwg
MHg0MH0sDQorCXsweDkwLCAweDA0fSwNCisJezB4OTEsIDB4YjB9LA0KKwl7MHg0NSwgMHgwMX0s
DQorCXsweDQ2LCAweDAwfSwNCisJezB4NDcsIDB4NmN9LA0KKwl7MHg0OCwgMHgwM30sDQorCXsw
eDQ5LCAweDhifSwNCisJezB4NGEsIDB4MDB9LA0KKwl7MHg0YiwgMHgwN30sDQorCXsweDRjLCAw
eDA0fSwNCisJezB4NGQsIDB4Yjd9LA0KKwl7MHhmMCwgMHg0MH0sDQorCXsweGYxLCAweDQwfSwN
CisJezB4ZjIsIDB4NDB9LA0KKwl7MHhmMywgMHg0MH0sDQorCXsweDNmLCAweDAwfSwNCisJezB4
ZmQsIDB4MDF9LA0KKwl7MHgwNSwgMHgwMH0sDQorCXsweDA2LCAweGE2fSwNCisJezB4ZmQsIDB4
MDF9LA0KK307DQorDQorc3RhdGljIGNvbnN0IGNoYXIgKiBjb25zdCBvdjAyYTEwX3Rlc3RfcGF0
dGVybl9tZW51W10gPSB7DQorCSJEaXNhYmxlZCIsDQorCSJFaWdodCBWZXJ0aWNhbCBDb2xvdXIg
QmFycyIsDQorfTsNCisNCitzdGF0aWMgY29uc3QgczY0IGxpbmtfZnJlcV9tZW51X2l0ZW1zW10g
PSB7DQorCU9WMDJBMTBfTElOS19GUkVRXzM5ME1IWiwNCit9Ow0KKw0KK3N0YXRpYyB1NjQgdG9f
cGl4ZWxfcmF0ZSh1MzIgZl9pbmRleCkNCit7DQorCXU2NCBwaXhlbF9yYXRlID0gbGlua19mcmVx
X21lbnVfaXRlbXNbZl9pbmRleF0gKiAyICogT1YwMkExMF9EQVRBX0xBTkVTOw0KKw0KKwlkb19k
aXYocGl4ZWxfcmF0ZSwgT1YwMkExMF9CSVRTX1BFUl9TQU1QTEUpOw0KKw0KKwlyZXR1cm4gcGl4
ZWxfcmF0ZTsNCit9DQorDQorc3RhdGljIGNvbnN0IHN0cnVjdCBvdjAyYTEwX21vZGUgc3VwcG9y
dGVkX21vZGVzW10gPSB7DQorCXsNCisJCS53aWR0aCA9IDE2MDAsDQorCQkuaGVpZ2h0ID0gMTIw
MCwNCisJCS5leHBfZGVmID0gMHgwMWFlLA0KKwkJLmh0c19kZWYgPSAweDAzYTYsDQorCQkudnRz
X2RlZiA9IDB4MDU2ZSwNCisJCS5yZWdfbGlzdCA9IHsNCisJCQkubnVtX29mX3JlZ3MgPSBBUlJB
WV9TSVpFKG92MDJhMTBfMTYwMHgxMjAwX3JlZ3MpLA0KKwkJCS5yZWdzID0gb3YwMmExMF8xNjAw
eDEyMDBfcmVncywNCisJCX0sDQorCX0sDQorfTsNCisNCitzdGF0aWMgaW50IG92MDJhMTBfd3Jp
dGVfYXJyYXkoc3RydWN0IG92MDJhMTAgKm92MDJhMTAsDQorCQkJICAgICAgIGNvbnN0IHN0cnVj
dCBvdjAyYTEwX3JlZ19saXN0ICpyX2xpc3QpDQorew0KKwlzdHJ1Y3QgaTJjX2NsaWVudCAqY2xp
ZW50ID0gdjRsMl9nZXRfc3ViZGV2ZGF0YSgmb3YwMmExMC0+c3ViZGV2KTsNCisJdW5zaWduZWQg
aW50IGk7DQorCWludCByZXQ7DQorDQorCWZvciAoaSA9IDA7IGkgPCByX2xpc3QtPm51bV9vZl9y
ZWdzOyBpKyspIHsNCisJCXJldCA9IGkyY19zbWJ1c193cml0ZV9ieXRlX2RhdGEoY2xpZW50LCBy
X2xpc3QtPnJlZ3NbaV0uYWRkciwNCisJCQkJCQlyX2xpc3QtPnJlZ3NbaV0udmFsKTsNCisJCWlm
IChyZXQgPCAwKQ0KKwkJCXJldHVybiByZXQ7DQorCX0NCisNCisJcmV0dXJuIDA7DQorfQ0KKw0K
K3N0YXRpYyBpbnQgb3YwMmExMF9yZWFkX3NtYnVzKHN0cnVjdCBvdjAyYTEwICpvdjAyYTEwLCB1
bnNpZ25lZCBjaGFyIHJlZywNCisJCQkgICAgICB1bnNpZ25lZCBjaGFyICp2YWwpDQorew0KKwlz
dHJ1Y3QgaTJjX2NsaWVudCAqY2xpZW50ID0gdjRsMl9nZXRfc3ViZGV2ZGF0YSgmb3YwMmExMC0+
c3ViZGV2KTsNCisJaW50IHJldDsNCisNCisJcmV0ID0gaTJjX3NtYnVzX3JlYWRfYnl0ZV9kYXRh
KGNsaWVudCwgcmVnKTsNCisJaWYgKHJldCA8IDApDQorCQlyZXR1cm4gcmV0Ow0KKw0KKwkqdmFs
ID0gKHVuc2lnbmVkIGNoYXIpcmV0Ow0KKw0KKwlyZXR1cm4gMDsNCit9DQorDQorc3RhdGljIHZv
aWQgb3YwMmExMF9maWxsX2ZtdChjb25zdCBzdHJ1Y3Qgb3YwMmExMF9tb2RlICptb2RlLA0KKwkJ
CSAgICAgc3RydWN0IHY0bDJfbWJ1c19mcmFtZWZtdCAqZm10KQ0KK3sNCisJZm10LT53aWR0aCA9
IG1vZGUtPndpZHRoOw0KKwlmbXQtPmhlaWdodCA9IG1vZGUtPmhlaWdodDsNCisJZm10LT5maWVs
ZCA9IFY0TDJfRklFTERfTk9ORTsNCit9DQorDQorc3RhdGljIGludCBvdjAyYTEwX3NldF9mbXQo
c3RydWN0IHY0bDJfc3ViZGV2ICpzZCwNCisJCQkgICBzdHJ1Y3QgdjRsMl9zdWJkZXZfcGFkX2Nv
bmZpZyAqY2ZnLA0KKwkJCSAgIHN0cnVjdCB2NGwyX3N1YmRldl9mb3JtYXQgKmZtdCkNCit7DQor
CXN0cnVjdCBvdjAyYTEwICpvdjAyYTEwID0gdG9fb3YwMmExMChzZCk7DQorCXN0cnVjdCB2NGwy
X21idXNfZnJhbWVmbXQgKm1idXNfZm10ID0gJmZtdC0+Zm9ybWF0Ow0KKwlzdHJ1Y3QgdjRsMl9t
YnVzX2ZyYW1lZm10ICpmcmFtZV9mbXQ7DQorCWludCByZXQgPSAwOw0KKw0KKwltdXRleF9sb2Nr
KCZvdjAyYTEwLT5tdXRleCk7DQorDQorCWlmIChvdjAyYTEwLT5zdHJlYW1pbmcgJiYgZm10LT53
aGljaCA9PSBWNEwyX1NVQkRFVl9GT1JNQVRfQUNUSVZFKSB7DQorCQlyZXQgPSAtRUJVU1k7DQor
CQlnb3RvIGVycm9yOw0KKwl9DQorDQorCS8qIE9ubHkgb25lIHNlbnNvciBtb2RlIHN1cHBvcnRl
ZCAqLw0KKwltYnVzX2ZtdC0+Y29kZSA9IG92MDJhMTAtPmZtdC5jb2RlOw0KKwlvdjAyYTEwX2Zp
bGxfZm10KG92MDJhMTAtPmN1cl9tb2RlLCBtYnVzX2ZtdCk7DQorDQorCWlmIChmbXQtPndoaWNo
ID09IFY0TDJfU1VCREVWX0ZPUk1BVF9UUlkpDQorCQlmcmFtZV9mbXQgPSB2NGwyX3N1YmRldl9n
ZXRfdHJ5X2Zvcm1hdChzZCwgY2ZnLCAwKTsNCisJZWxzZQ0KKwkJZnJhbWVfZm10ID0gJm92MDJh
MTAtPmZtdDsNCisNCisJKmZyYW1lX2ZtdCA9ICptYnVzX2ZtdDsNCisNCitlcnJvcjoNCisJbXV0
ZXhfdW5sb2NrKCZvdjAyYTEwLT5tdXRleCk7DQorCXJldHVybiByZXQ7DQorfQ0KKw0KK3N0YXRp
YyBpbnQgb3YwMmExMF9nZXRfZm10KHN0cnVjdCB2NGwyX3N1YmRldiAqc2QsDQorCQkJICAgc3Ry
dWN0IHY0bDJfc3ViZGV2X3BhZF9jb25maWcgKmNmZywNCisJCQkgICBzdHJ1Y3QgdjRsMl9zdWJk
ZXZfZm9ybWF0ICpmbXQpDQorew0KKwlzdHJ1Y3Qgb3YwMmExMCAqb3YwMmExMCA9IHRvX292MDJh
MTAoc2QpOw0KKwlzdHJ1Y3QgdjRsMl9tYnVzX2ZyYW1lZm10ICptYnVzX2ZtdCA9ICZmbXQtPmZv
cm1hdDsNCisNCisJbXV0ZXhfbG9jaygmb3YwMmExMC0+bXV0ZXgpOw0KKw0KKwlpZiAoZm10LT53
aGljaCA9PSBWNEwyX1NVQkRFVl9GT1JNQVRfVFJZKSB7DQorCQlmbXQtPmZvcm1hdCA9ICp2NGwy
X3N1YmRldl9nZXRfdHJ5X2Zvcm1hdChzZCwgY2ZnLCBmbXQtPnBhZCk7DQorCX0gZWxzZSB7DQor
CQlmbXQtPmZvcm1hdCA9IG92MDJhMTAtPmZtdDsNCisJCW1idXNfZm10LT5jb2RlID0gb3YwMmEx
MC0+Zm10LmNvZGU7DQorCQlvdjAyYTEwX2ZpbGxfZm10KG92MDJhMTAtPmN1cl9tb2RlLCBtYnVz
X2ZtdCk7DQorCX0NCisNCisJbXV0ZXhfdW5sb2NrKCZvdjAyYTEwLT5tdXRleCk7DQorDQorCXJl
dHVybiAwOw0KK30NCisNCitzdGF0aWMgaW50IG92MDJhMTBfZW51bV9tYnVzX2NvZGUoc3RydWN0
IHY0bDJfc3ViZGV2ICpzZCwNCisJCQkJICBzdHJ1Y3QgdjRsMl9zdWJkZXZfcGFkX2NvbmZpZyAq
Y2ZnLA0KKwkJCQkgIHN0cnVjdCB2NGwyX3N1YmRldl9tYnVzX2NvZGVfZW51bSAqY29kZSkNCit7
DQorCXN0cnVjdCBvdjAyYTEwICpvdjAyYTEwID0gdG9fb3YwMmExMChzZCk7DQorDQorCWlmIChj
b2RlLT5pbmRleCAhPSAwKQ0KKwkJcmV0dXJuIC1FSU5WQUw7DQorDQorCWNvZGUtPmNvZGUgPSBv
djAyYTEwLT5mbXQuY29kZTsNCisNCisJcmV0dXJuIDA7DQorfQ0KKw0KK3N0YXRpYyBpbnQgb3Yw
MmExMF9lbnVtX2ZyYW1lX3NpemVzKHN0cnVjdCB2NGwyX3N1YmRldiAqc2QsDQorCQkJCSAgICBz
dHJ1Y3QgdjRsMl9zdWJkZXZfcGFkX2NvbmZpZyAqY2ZnLA0KKwkJCQkgICAgc3RydWN0IHY0bDJf
c3ViZGV2X2ZyYW1lX3NpemVfZW51bSAqZnNlKQ0KK3sNCisJaWYgKGZzZS0+aW5kZXggPj0gQVJS
QVlfU0laRShzdXBwb3J0ZWRfbW9kZXMpKQ0KKwkJcmV0dXJuIC1FSU5WQUw7DQorDQorCWZzZS0+
bWluX3dpZHRoICA9IHN1cHBvcnRlZF9tb2Rlc1tmc2UtPmluZGV4XS53aWR0aDsNCisJZnNlLT5t
YXhfd2lkdGggID0gc3VwcG9ydGVkX21vZGVzW2ZzZS0+aW5kZXhdLndpZHRoOw0KKwlmc2UtPm1h
eF9oZWlnaHQgPSBzdXBwb3J0ZWRfbW9kZXNbZnNlLT5pbmRleF0uaGVpZ2h0Ow0KKwlmc2UtPm1p
bl9oZWlnaHQgPSBzdXBwb3J0ZWRfbW9kZXNbZnNlLT5pbmRleF0uaGVpZ2h0Ow0KKw0KKwlyZXR1
cm4gMDsNCit9DQorDQorc3RhdGljIGludCBvdjAyYTEwX2NoZWNrX3NlbnNvcl9pZChzdHJ1Y3Qg
b3YwMmExMCAqb3YwMmExMCkNCit7DQorCXN0cnVjdCBpMmNfY2xpZW50ICpjbGllbnQgPSB2NGwy
X2dldF9zdWJkZXZkYXRhKCZvdjAyYTEwLT5zdWJkZXYpOw0KKwl1MTYgaWQ7DQorCXU4IGNoaXBf
aWRfaDsNCisJdTggY2hpcF9pZF9sOw0KKwlpbnQgcmV0Ow0KKw0KKwkvKiBDaGVjayBzZW5zb3Ig
cmV2aXNpb24gKi8NCisJcmV0ID0gb3YwMmExMF9yZWFkX3NtYnVzKG92MDJhMTAsIE9WMDJBMTBf
UkVHX0NISVBfSURfSCwgJmNoaXBfaWRfaCk7DQorCWlmIChyZXQpDQorCQlyZXR1cm4gcmV0Ow0K
Kw0KKwlyZXQgPSBvdjAyYTEwX3JlYWRfc21idXMob3YwMmExMCwgT1YwMkExMF9SRUdfQ0hJUF9J
RF9MLCAmY2hpcF9pZF9sKTsNCisJaWYgKHJldCkNCisJCXJldHVybiByZXQ7DQorDQorCWlkID0g
KGNoaXBfaWRfaCA8PCA4KSB8IGNoaXBfaWRfbDsNCisJaWYgKGlkICE9IENISVBfSUQpIHsNCisJ
CWRldl9lcnIoJmNsaWVudC0+ZGV2LCAiVW5leHBlY3RlZCBzZW5zb3IgaWQoJTA0eClcbiIsIGlk
KTsNCisJCXJldHVybiAtRUlOVkFMOw0KKwl9DQorDQorCXJldHVybiAwOw0KK30NCisNCitzdGF0
aWMgaW50IG92MDJhMTBfcG93ZXJfb24oc3RydWN0IGRldmljZSAqZGV2KQ0KK3sNCisJc3RydWN0
IGkyY19jbGllbnQgKmNsaWVudCA9IHRvX2kyY19jbGllbnQoZGV2KTsNCisJc3RydWN0IHY0bDJf
c3ViZGV2ICpzZCA9IGkyY19nZXRfY2xpZW50ZGF0YShjbGllbnQpOw0KKwlzdHJ1Y3Qgb3YwMmEx
MCAqb3YwMmExMCA9IHRvX292MDJhMTAoc2QpOw0KKwlpbnQgcmV0Ow0KKw0KKwlncGlvZF9zZXRf
dmFsdWVfY2Fuc2xlZXAob3YwMmExMC0+cnN0X2dwaW8sIDEpOw0KKwlncGlvZF9zZXRfdmFsdWVf
Y2Fuc2xlZXAob3YwMmExMC0+cGRfZ3BpbywgMSk7DQorDQorCXJldCA9IGNsa19wcmVwYXJlX2Vu
YWJsZShvdjAyYTEwLT5lY2xrKTsNCisJaWYgKHJldCA8IDApIHsNCisJCWRldl9lcnIoZGV2LCAi
ZmFpbGVkIHRvIGVuYWJsZSBlY2xrXG4iKTsNCisJCXJldHVybiByZXQ7DQorCX0NCisNCisJcmV0
ID0gcmVndWxhdG9yX2J1bGtfZW5hYmxlKEFSUkFZX1NJWkUob3YwMmExMF9zdXBwbHlfbmFtZXMp
LA0KKwkJCQkgICAgb3YwMmExMC0+c3VwcGxpZXMpOw0KKwlpZiAocmV0IDwgMCkgew0KKwkJZGV2
X2VycihkZXYsICJmYWlsZWQgdG8gZW5hYmxlIHJlZ3VsYXRvcnNcbiIpOw0KKwkJZ290byBkaXNh
YmxlX2NsazsNCisJfQ0KKwl1c2xlZXBfcmFuZ2UoNTAwMCwgNjAwMCk7DQorDQorCWdwaW9kX3Nl
dF92YWx1ZV9jYW5zbGVlcChvdjAyYTEwLT5wZF9ncGlvLCAwKTsNCisJdXNsZWVwX3JhbmdlKDUw
MDAsIDYwMDApOw0KKw0KKwlncGlvZF9zZXRfdmFsdWVfY2Fuc2xlZXAob3YwMmExMC0+cnN0X2dw
aW8sIDApOw0KKwl1c2xlZXBfcmFuZ2UoNTAwMCwgNjAwMCk7DQorDQorCXJldCA9IG92MDJhMTBf
Y2hlY2tfc2Vuc29yX2lkKG92MDJhMTApOw0KKwlpZiAocmV0KQ0KKwkJZ290byBkaXNhYmxlX3Jl
Z3VsYXRvcjsNCisNCisJcmV0dXJuIDA7DQorDQorZGlzYWJsZV9yZWd1bGF0b3I6DQorCXJlZ3Vs
YXRvcl9idWxrX2Rpc2FibGUoQVJSQVlfU0laRShvdjAyYTEwX3N1cHBseV9uYW1lcyksDQorCQkJ
ICAgICAgIG92MDJhMTAtPnN1cHBsaWVzKTsNCitkaXNhYmxlX2NsazoNCisJY2xrX2Rpc2FibGVf
dW5wcmVwYXJlKG92MDJhMTAtPmVjbGspOw0KKw0KKwlyZXR1cm4gcmV0Ow0KK30NCisNCitzdGF0
aWMgaW50IG92MDJhMTBfcG93ZXJfb2ZmKHN0cnVjdCBkZXZpY2UgKmRldikNCit7DQorCXN0cnVj
dCBpMmNfY2xpZW50ICpjbGllbnQgPSB0b19pMmNfY2xpZW50KGRldik7DQorCXN0cnVjdCB2NGwy
X3N1YmRldiAqc2QgPSBpMmNfZ2V0X2NsaWVudGRhdGEoY2xpZW50KTsNCisJc3RydWN0IG92MDJh
MTAgKm92MDJhMTAgPSB0b19vdjAyYTEwKHNkKTsNCisNCisJZ3Bpb2Rfc2V0X3ZhbHVlX2NhbnNs
ZWVwKG92MDJhMTAtPnJzdF9ncGlvLCAxKTsNCisJY2xrX2Rpc2FibGVfdW5wcmVwYXJlKG92MDJh
MTAtPmVjbGspOw0KKwlncGlvZF9zZXRfdmFsdWVfY2Fuc2xlZXAob3YwMmExMC0+cGRfZ3Bpbywg
MSk7DQorCXJlZ3VsYXRvcl9idWxrX2Rpc2FibGUoQVJSQVlfU0laRShvdjAyYTEwX3N1cHBseV9u
YW1lcyksDQorCQkJICAgICAgIG92MDJhMTAtPnN1cHBsaWVzKTsNCisNCisJcmV0dXJuIDA7DQor
fQ0KKw0KK3N0YXRpYyBpbnQgX19vdjAyYTEwX3N0YXJ0X3N0cmVhbShzdHJ1Y3Qgb3YwMmExMCAq
b3YwMmExMCkNCit7DQorCXN0cnVjdCBpMmNfY2xpZW50ICpjbGllbnQgPSB2NGwyX2dldF9zdWJk
ZXZkYXRhKCZvdjAyYTEwLT5zdWJkZXYpOw0KKwljb25zdCBzdHJ1Y3Qgb3YwMmExMF9yZWdfbGlz
dCAqcmVnX2xpc3Q7DQorCWludCByZXQ7DQorDQorCS8qIEFwcGx5IGRlZmF1bHQgdmFsdWVzIG9m
IGN1cnJlbnQgbW9kZSAqLw0KKwlyZWdfbGlzdCA9ICZvdjAyYTEwLT5jdXJfbW9kZS0+cmVnX2xp
c3Q7DQorCXJldCA9IG92MDJhMTBfd3JpdGVfYXJyYXkob3YwMmExMCwgcmVnX2xpc3QpOw0KKwlp
ZiAocmV0KQ0KKwkJcmV0dXJuIHJldDsNCisNCisJLyogQXBwbHkgY3VzdG9taXplZCB2YWx1ZXMg
ZnJvbSB1c2VyICovDQorCXJldCA9IF9fdjRsMl9jdHJsX2hhbmRsZXJfc2V0dXAob3YwMmExMC0+
c3ViZGV2LmN0cmxfaGFuZGxlcik7DQorCWlmIChyZXQpDQorCQlyZXR1cm4gcmV0Ow0KKw0KKwkv
KiBTZXQgb3JpZW50YXRpb24gdG8gMTgwIGRlZ3JlZSAqLw0KKwlpZiAob3YwMmExMC0+dXBzaWRl
X2Rvd24pIHsNCisJCXJldCA9IGkyY19zbWJ1c193cml0ZV9ieXRlX2RhdGEoY2xpZW50LCBSRUdf
TUlSUk9SX0ZMSVBfQ09OVFJPTCwNCisJCQkJCQlSRUdfTUlSUk9SX0ZMSVBfRU5BQkxFKTsNCisJ
CWlmIChyZXQpIHsNCisJCQlkZXZfZXJyKCZjbGllbnQtPmRldiwgImZhaWxlZCB0byBzZXQgb3Jp
ZW50YXRpb25cbiIpOw0KKwkJCXJldHVybiByZXQ7DQorCQl9DQorCQlyZXQgPSBpMmNfc21idXNf
d3JpdGVfYnl0ZV9kYXRhKGNsaWVudCwgUkVHX0dMT0JBTF9FRkZFQ1RJVkUsDQorCQkJCQkJUkVH
X0VOQUJMRSk7DQorCQlpZiAocmV0IDwgMCkNCisJCQlyZXR1cm4gcmV0Ow0KKwl9DQorDQorCS8q
IFNldCBtaXBpIFRYIHNwZWVkIGFjY29yZGluZyB0byBEVCBwcm9wZXJ0eSAqLw0KKwlpZiAob3Yw
MmExMC0+bWlwaV9jbG9ja190eF9zcGVlZCAhPSBPVjAyQTEwX01JUElfVFhfU1BFRURfREVGQVVM
VCkgew0KKwkJcmV0ID0gaTJjX3NtYnVzX3dyaXRlX2J5dGVfZGF0YShjbGllbnQsIFRYX1NQRUVE
X0FSRUFfU0VMLA0KKwkJCQkJCW92MDJhMTAtPm1pcGlfY2xvY2tfdHhfc3BlZWQpOw0KKwkJaWYg
KHJldCA8IDApDQorCQkJcmV0dXJuIHJldDsNCisJfQ0KKw0KKwkvKiBTZXQgc3RyZWFtIG9uIHJl
Z2lzdGVyICovDQorCXJldHVybiBpMmNfc21idXNfd3JpdGVfYnl0ZV9kYXRhKGNsaWVudCwgUkVH
X1NDX0NUUkxfTU9ERSwNCisJCQkJCSBTQ19DVFJMX01PREVfU1RSRUFNSU5HKTsNCit9DQorDQor
c3RhdGljIGludCBfX292MDJhMTBfc3RvcF9zdHJlYW0oc3RydWN0IG92MDJhMTAgKm92MDJhMTAp
DQorew0KKwlzdHJ1Y3QgaTJjX2NsaWVudCAqY2xpZW50ID0gdjRsMl9nZXRfc3ViZGV2ZGF0YSgm
b3YwMmExMC0+c3ViZGV2KTsNCisNCisJcmV0dXJuIGkyY19zbWJ1c193cml0ZV9ieXRlX2RhdGEo
Y2xpZW50LCBSRUdfU0NfQ1RSTF9NT0RFLA0KKwkJCQkJIFNDX0NUUkxfTU9ERV9TVEFOREJZKTsN
Cit9DQorDQorc3RhdGljIGludCBvdjAyYTEwX2VudGl0eV9pbml0X2NmZyhzdHJ1Y3QgdjRsMl9z
dWJkZXYgKnNkLA0KKwkJCQkgICBzdHJ1Y3QgdjRsMl9zdWJkZXZfcGFkX2NvbmZpZyAqY2ZnKQ0K
K3sNCisJc3RydWN0IHY0bDJfc3ViZGV2X2Zvcm1hdCBmbXQgPSB7DQorCQkud2hpY2ggPSBjZmcg
PyBWNEwyX1NVQkRFVl9GT1JNQVRfVFJZIDogVjRMMl9TVUJERVZfRk9STUFUX0FDVElWRSwNCisJ
CS5mb3JtYXQgPSB7DQorCQkJLndpZHRoID0gMTYwMCwNCisJCQkuaGVpZ2h0ID0gMTIwMCwNCisJ
CX0NCisJfTsNCisNCisJb3YwMmExMF9zZXRfZm10KHNkLCBjZmcsICZmbXQpOw0KKw0KKwlyZXR1
cm4gMDsNCit9DQorDQorc3RhdGljIGludCBvdjAyYTEwX3Nfc3RyZWFtKHN0cnVjdCB2NGwyX3N1
YmRldiAqc2QsIGludCBvbikNCit7DQorCXN0cnVjdCBvdjAyYTEwICpvdjAyYTEwID0gdG9fb3Yw
MmExMChzZCk7DQorCXN0cnVjdCBpMmNfY2xpZW50ICpjbGllbnQgPSB2NGwyX2dldF9zdWJkZXZk
YXRhKCZvdjAyYTEwLT5zdWJkZXYpOw0KKwlpbnQgcmV0Ow0KKw0KKwltdXRleF9sb2NrKCZvdjAy
YTEwLT5tdXRleCk7DQorDQorCWlmIChvdjAyYTEwLT5zdHJlYW1pbmcgPT0gb24pDQorCQlnb3Rv
IHVubG9ja19hbmRfcmV0dXJuOw0KKw0KKwlpZiAob24pIHsNCisJCXJldCA9IHBtX3J1bnRpbWVf
Z2V0X3N5bmMoJmNsaWVudC0+ZGV2KTsNCisJCWlmIChyZXQgPCAwKSB7DQorCQkJcG1fcnVudGlt
ZV9wdXRfbm9pZGxlKCZjbGllbnQtPmRldik7DQorCQkJZ290byB1bmxvY2tfYW5kX3JldHVybjsN
CisJCX0NCisNCisJCXJldCA9IF9fb3YwMmExMF9zdGFydF9zdHJlYW0ob3YwMmExMCk7DQorCQlp
ZiAocmV0KSB7DQorCQkJX19vdjAyYTEwX3N0b3Bfc3RyZWFtKG92MDJhMTApOw0KKwkJCW92MDJh
MTAtPnN0cmVhbWluZyA9ICFvbjsNCisJCQlnb3RvIGVycl9ycG1fcHV0Ow0KKwkJfQ0KKwl9IGVs
c2Ugew0KKwkJX19vdjAyYTEwX3N0b3Bfc3RyZWFtKG92MDJhMTApOw0KKwkJcG1fcnVudGltZV9w
dXQoJmNsaWVudC0+ZGV2KTsNCisJfQ0KKw0KKwlvdjAyYTEwLT5zdHJlYW1pbmcgPSBvbjsNCisJ
bXV0ZXhfdW5sb2NrKCZvdjAyYTEwLT5tdXRleCk7DQorDQorCXJldHVybiAwOw0KKw0KK2Vycl9y
cG1fcHV0Og0KKwlwbV9ydW50aW1lX3B1dCgmY2xpZW50LT5kZXYpOw0KK3VubG9ja19hbmRfcmV0
dXJuOg0KKwltdXRleF91bmxvY2soJm92MDJhMTAtPm11dGV4KTsNCisNCisJcmV0dXJuIHJldDsN
Cit9DQorDQorc3RhdGljIGNvbnN0IHN0cnVjdCBkZXZfcG1fb3BzIG92MDJhMTBfcG1fb3BzID0g
ew0KKwlTRVRfU1lTVEVNX1NMRUVQX1BNX09QUyhwbV9ydW50aW1lX2ZvcmNlX3N1c3BlbmQsDQor
CQkJCXBtX3J1bnRpbWVfZm9yY2VfcmVzdW1lKQ0KKwlTRVRfUlVOVElNRV9QTV9PUFMob3YwMmEx
MF9wb3dlcl9vZmYsIG92MDJhMTBfcG93ZXJfb24sIE5VTEwpDQorfTsNCisNCisvKg0KKyAqIG92
MDJhMTBfc2V0X2V4cG9zdXJlIC0gRnVuY3Rpb24gY2FsbGVkIHdoZW4gc2V0dGluZyBleHBvc3Vy
ZSB0aW1lDQorICogQHByaXY6IFBvaW50ZXIgdG8gZGV2aWNlIHN0cnVjdHVyZQ0KKyAqIEB2YWw6
IFZhcmlhYmxlIGZvciBleHBvc3VyZSB0aW1lLCBpbiB0aGUgdW5pdCBvZiBtaWNyby1zZWNvbmQN
CisgKg0KKyAqIFNldCBleHBvc3VyZSB0aW1lIGJhc2VkIG9uIGlucHV0IHZhbHVlLg0KKyAqDQor
ICogUmV0dXJuOiAwIG9uIHN1Y2Nlc3MNCisgKi8NCitzdGF0aWMgaW50IG92MDJhMTBfc2V0X2V4
cG9zdXJlKHN0cnVjdCBvdjAyYTEwICpvdjAyYTEwLCBpbnQgdmFsKQ0KK3sNCisJc3RydWN0IGky
Y19jbGllbnQgKmNsaWVudCA9IHY0bDJfZ2V0X3N1YmRldmRhdGEoJm92MDJhMTAtPnN1YmRldik7
DQorCWludCByZXQ7DQorDQorCXJldCA9IGkyY19zbWJ1c193cml0ZV9ieXRlX2RhdGEoY2xpZW50
LCBSRUdfUEFHRV9TV0lUQ0gsIFJFR19FTkFCTEUpOw0KKwlpZiAocmV0IDwgMCkNCisJCXJldHVy
biByZXQ7DQorDQorCXJldCA9IGkyY19zbWJ1c193cml0ZV9ieXRlX2RhdGEoY2xpZW50LCBPVjAy
QTEwX1JFR19FWFBPU1VSRV9ILA0KKwkJCQkJdmFsID4+IE9WMDJBMTBfRVhQX1NISUZUKTsNCisJ
aWYgKHJldCA8IDApDQorCQlyZXR1cm4gcmV0Ow0KKw0KKwlyZXQgPSBpMmNfc21idXNfd3JpdGVf
Ynl0ZV9kYXRhKGNsaWVudCwgT1YwMkExMF9SRUdfRVhQT1NVUkVfTCwgdmFsKTsNCisJaWYgKHJl
dCA8IDApDQorCQlyZXR1cm4gcmV0Ow0KKw0KKwlyZXR1cm4gaTJjX3NtYnVzX3dyaXRlX2J5dGVf
ZGF0YShjbGllbnQsIFJFR19HTE9CQUxfRUZGRUNUSVZFLA0KKwkJCQkJIFJFR19FTkFCTEUpOw0K
K30NCisNCitzdGF0aWMgaW50IG92MDJhMTBfc2V0X2dhaW4oc3RydWN0IG92MDJhMTAgKm92MDJh
MTAsIGludCB2YWwpDQorew0KKwlzdHJ1Y3QgaTJjX2NsaWVudCAqY2xpZW50ID0gdjRsMl9nZXRf
c3ViZGV2ZGF0YSgmb3YwMmExMC0+c3ViZGV2KTsNCisJaW50IHJldDsNCisNCisJcmV0ID0gaTJj
X3NtYnVzX3dyaXRlX2J5dGVfZGF0YShjbGllbnQsIFJFR19QQUdFX1NXSVRDSCwgUkVHX0VOQUJM
RSk7DQorCWlmIChyZXQgPCAwKQ0KKwkJcmV0dXJuIHJldDsNCisNCisJcmV0ID0gaTJjX3NtYnVz
X3dyaXRlX2J5dGVfZGF0YShjbGllbnQsIE9WMDJBMTBfUkVHX0dBSU4sIHZhbCk7DQorCWlmIChy
ZXQgPCAwKQ0KKwkJcmV0dXJuIHJldDsNCisNCisJcmV0dXJuIGkyY19zbWJ1c193cml0ZV9ieXRl
X2RhdGEoY2xpZW50LCBSRUdfR0xPQkFMX0VGRkVDVElWRSwNCisJCQkJCSBSRUdfRU5BQkxFKTsN
Cit9DQorDQorc3RhdGljIGludCBvdjAyYTEwX3NldF92Ymxhbmsoc3RydWN0IG92MDJhMTAgKm92
MDJhMTAsIGludCB2YWwpDQorew0KKwlzdHJ1Y3QgaTJjX2NsaWVudCAqY2xpZW50ID0gdjRsMl9n
ZXRfc3ViZGV2ZGF0YSgmb3YwMmExMC0+c3ViZGV2KTsNCisJdTMyIHZ0cyA9IHZhbCArIG92MDJh
MTAtPmN1cl9tb2RlLT5oZWlnaHQgLSBPVjAyQTEwX0JBU0lDX0xJTkU7DQorCWludCByZXQ7DQor
DQorCXJldCA9IGkyY19zbWJ1c193cml0ZV9ieXRlX2RhdGEoY2xpZW50LCBSRUdfUEFHRV9TV0lU
Q0gsIFJFR19FTkFCTEUpOw0KKwlpZiAocmV0IDwgMCkNCisJCXJldHVybiByZXQ7DQorDQorCXJl
dCA9IGkyY19zbWJ1c193cml0ZV9ieXRlX2RhdGEoY2xpZW50LCBPVjAyQTEwX1JFR19WVFNfSCwN
CisJCQkJCXZ0cyA+PiBPVjAyQTEwX1ZUU19TSElGVCk7DQorCWlmIChyZXQgPCAwKQ0KKwkJcmV0
dXJuIHJldDsNCisNCisJcmV0ID0gaTJjX3NtYnVzX3dyaXRlX2J5dGVfZGF0YShjbGllbnQsIE9W
MDJBMTBfUkVHX1ZUU19MLCB2dHMpOw0KKwlpZiAocmV0IDwgMCkNCisJCXJldHVybiByZXQ7DQor
DQorCXJldHVybiBpMmNfc21idXNfd3JpdGVfYnl0ZV9kYXRhKGNsaWVudCwgUkVHX0dMT0JBTF9F
RkZFQ1RJVkUsDQorCQkJCQkgUkVHX0VOQUJMRSk7DQorfQ0KKw0KK3N0YXRpYyBpbnQgb3YwMmEx
MF9zZXRfdGVzdF9wYXR0ZXJuKHN0cnVjdCBvdjAyYTEwICpvdjAyYTEwLCBpbnQgcGF0dGVybikN
Cit7DQorCXN0cnVjdCBpMmNfY2xpZW50ICpjbGllbnQgPSB2NGwyX2dldF9zdWJkZXZkYXRhKCZv
djAyYTEwLT5zdWJkZXYpOw0KKwlpbnQgcmV0Ow0KKw0KKwlyZXQgPSBpMmNfc21idXNfd3JpdGVf
Ynl0ZV9kYXRhKGNsaWVudCwgUkVHX1BBR0VfU1dJVENILCBSRUdfRU5BQkxFKTsNCisJaWYgKHJl
dCA8IDApDQorCQlyZXR1cm4gcmV0Ow0KKw0KKwlyZXQgPSBpMmNfc21idXNfd3JpdGVfYnl0ZV9k
YXRhKGNsaWVudCwgT1YwMkExMF9SRUdfVEVTVF9QQVRURVJOLA0KKwkJCQkJcGF0dGVybik7DQor
CWlmIChyZXQgPCAwKQ0KKwkJcmV0dXJuIHJldDsNCisNCisJcmV0ID0gaTJjX3NtYnVzX3dyaXRl
X2J5dGVfZGF0YShjbGllbnQsIFJFR19HTE9CQUxfRUZGRUNUSVZFLA0KKwkJCQkJUkVHX0VOQUJM
RSk7DQorCWlmIChyZXQgPCAwKQ0KKwkJcmV0dXJuIHJldDsNCisNCisJcmV0dXJuIGkyY19zbWJ1
c193cml0ZV9ieXRlX2RhdGEoY2xpZW50LCBSRUdfU0NfQ1RSTF9NT0RFLA0KKwkJCQkJIFNDX0NU
UkxfTU9ERV9TVFJFQU1JTkcpOw0KK30NCisNCitzdGF0aWMgaW50IG92MDJhMTBfc2V0X2N0cmwo
c3RydWN0IHY0bDJfY3RybCAqY3RybCkNCit7DQorCXN0cnVjdCBvdjAyYTEwICpvdjAyYTEwID0g
Y29udGFpbmVyX29mKGN0cmwtPmhhbmRsZXIsDQorCQkJCQkgICAgICAgc3RydWN0IG92MDJhMTAs
IGN0cmxfaGFuZGxlcik7DQorCXN0cnVjdCBpMmNfY2xpZW50ICpjbGllbnQgPSB2NGwyX2dldF9z
dWJkZXZkYXRhKCZvdjAyYTEwLT5zdWJkZXYpOw0KKwlzNjQgbWF4X2V4cG87DQorCWludCByZXQ7
DQorDQorCS8qIFByb3BhZ2F0ZSBjaGFuZ2Ugb2YgY3VycmVudCBjb250cm9sIHRvIGFsbCByZWxh
dGVkIGNvbnRyb2xzICovDQorCWlmIChjdHJsLT5pZCA9PSBWNEwyX0NJRF9WQkxBTkspIHsNCisJ
CS8qIFVwZGF0ZSBtYXggZXhwb3N1cmUgd2hpbGUgbWVldGluZyBleHBlY3RlZCB2Ymxhbmtpbmcg
Ki8NCisJCW1heF9leHBvID0gb3YwMmExMC0+Y3VyX21vZGUtPmhlaWdodCArIGN0cmwtPnZhbCAt
DQorCQkJICAgT1YwMkExMF9FWFBPU1VSRV9NQVhfTUFSR0lOOw0KKwkJX192NGwyX2N0cmxfbW9k
aWZ5X3JhbmdlKG92MDJhMTAtPmV4cG9zdXJlLA0KKwkJCQkJIG92MDJhMTAtPmV4cG9zdXJlLT5t
aW5pbXVtLCBtYXhfZXhwbywNCisJCQkJCSBvdjAyYTEwLT5leHBvc3VyZS0+c3RlcCwNCisJCQkJ
CSBvdjAyYTEwLT5leHBvc3VyZS0+ZGVmYXVsdF92YWx1ZSk7DQorCX0NCisNCisJLyogVjRMMiBj
b250cm9scyB2YWx1ZXMgd2lsbCBiZSBhcHBsaWVkIG9ubHkgd2hlbiBwb3dlciBpcyBhbHJlYWR5
IHVwICovDQorCWlmICghcG1fcnVudGltZV9nZXRfaWZfaW5fdXNlKCZjbGllbnQtPmRldikpDQor
CQlyZXR1cm4gMDsNCisNCisJc3dpdGNoIChjdHJsLT5pZCkgew0KKwljYXNlIFY0TDJfQ0lEX0VY
UE9TVVJFOg0KKwkJcmV0ID0gb3YwMmExMF9zZXRfZXhwb3N1cmUob3YwMmExMCwgY3RybC0+dmFs
KTsNCisJCWJyZWFrOw0KKwljYXNlIFY0TDJfQ0lEX0FOQUxPR1VFX0dBSU46DQorCQlyZXQgPSBv
djAyYTEwX3NldF9nYWluKG92MDJhMTAsIGN0cmwtPnZhbCk7DQorCQlicmVhazsNCisJY2FzZSBW
NEwyX0NJRF9WQkxBTks6DQorCQlyZXQgPSBvdjAyYTEwX3NldF92Ymxhbmsob3YwMmExMCwgY3Ry
bC0+dmFsKTsNCisJCWJyZWFrOw0KKwljYXNlIFY0TDJfQ0lEX1RFU1RfUEFUVEVSTjoNCisJCXJl
dCA9IG92MDJhMTBfc2V0X3Rlc3RfcGF0dGVybihvdjAyYTEwLCBjdHJsLT52YWwpOw0KKwkJYnJl
YWs7DQorCWRlZmF1bHQ6DQorCQlyZXQgPSAtRUlOVkFMOw0KKwkJYnJlYWs7DQorCX07DQorDQor
CXBtX3J1bnRpbWVfcHV0KCZjbGllbnQtPmRldik7DQorDQorCXJldHVybiByZXQ7DQorfQ0KKw0K
K3N0YXRpYyBjb25zdCBzdHJ1Y3QgdjRsMl9zdWJkZXZfdmlkZW9fb3BzIG92MDJhMTBfdmlkZW9f
b3BzID0gew0KKwkuc19zdHJlYW0gPSBvdjAyYTEwX3Nfc3RyZWFtLA0KK307DQorDQorc3RhdGlj
IGNvbnN0IHN0cnVjdCB2NGwyX3N1YmRldl9wYWRfb3BzIG92MDJhMTBfcGFkX29wcyA9IHsNCisJ
LmluaXRfY2ZnID0gb3YwMmExMF9lbnRpdHlfaW5pdF9jZmcsDQorCS5lbnVtX21idXNfY29kZSA9
IG92MDJhMTBfZW51bV9tYnVzX2NvZGUsDQorCS5lbnVtX2ZyYW1lX3NpemUgPSBvdjAyYTEwX2Vu
dW1fZnJhbWVfc2l6ZXMsDQorCS5nZXRfZm10ID0gb3YwMmExMF9nZXRfZm10LA0KKwkuc2V0X2Zt
dCA9IG92MDJhMTBfc2V0X2ZtdCwNCit9Ow0KKw0KK3N0YXRpYyBjb25zdCBzdHJ1Y3QgdjRsMl9z
dWJkZXZfb3BzIG92MDJhMTBfc3ViZGV2X29wcyA9IHsNCisJLnZpZGVvCT0gJm92MDJhMTBfdmlk
ZW9fb3BzLA0KKwkucGFkCT0gJm92MDJhMTBfcGFkX29wcywNCit9Ow0KKw0KK3N0YXRpYyBjb25z
dCBzdHJ1Y3QgbWVkaWFfZW50aXR5X29wZXJhdGlvbnMgb3YwMmExMF9zdWJkZXZfZW50aXR5X29w
cyA9IHsNCisJLmxpbmtfdmFsaWRhdGUgPSB2NGwyX3N1YmRldl9saW5rX3ZhbGlkYXRlLA0KK307
DQorDQorc3RhdGljIGNvbnN0IHN0cnVjdCB2NGwyX2N0cmxfb3BzIG92MDJhMTBfY3RybF9vcHMg
PSB7DQorCS5zX2N0cmwgPSBvdjAyYTEwX3NldF9jdHJsLA0KK307DQorDQorc3RhdGljIGludCBv
djAyYTEwX2luaXRpYWxpemVfY29udHJvbHMoc3RydWN0IG92MDJhMTAgKm92MDJhMTApDQorew0K
KwlzdHJ1Y3QgaTJjX2NsaWVudCAqY2xpZW50ID0gdjRsMl9nZXRfc3ViZGV2ZGF0YSgmb3YwMmEx
MC0+c3ViZGV2KTsNCisJY29uc3Qgc3RydWN0IG92MDJhMTBfbW9kZSAqbW9kZTsNCisJc3RydWN0
IHY0bDJfY3RybF9oYW5kbGVyICpoYW5kbGVyOw0KKwlzdHJ1Y3QgdjRsMl9jdHJsICpjdHJsOw0K
KwlzNjQgZXhwb3N1cmVfbWF4Ow0KKwlzNjQgdmJsYW5rX2RlZjsNCisJczY0IHBpeGVsX3JhdGU7
DQorCXM2NCBoX2JsYW5rOw0KKwlpbnQgcmV0Ow0KKw0KKwloYW5kbGVyID0gJm92MDJhMTAtPmN0
cmxfaGFuZGxlcjsNCisJbW9kZSA9IG92MDJhMTAtPmN1cl9tb2RlOw0KKwlyZXQgPSB2NGwyX2N0
cmxfaGFuZGxlcl9pbml0KGhhbmRsZXIsIDcpOw0KKwlpZiAocmV0KQ0KKwkJcmV0dXJuIHJldDsN
CisNCisJaGFuZGxlci0+bG9jayA9ICZvdjAyYTEwLT5tdXRleDsNCisNCisJY3RybCA9IHY0bDJf
Y3RybF9uZXdfaW50X21lbnUoaGFuZGxlciwgTlVMTCwgVjRMMl9DSURfTElOS19GUkVRLCAwLCAw
LA0KKwkJCQkgICAgICBsaW5rX2ZyZXFfbWVudV9pdGVtcyk7DQorCWlmIChjdHJsKQ0KKwkJY3Ry
bC0+ZmxhZ3MgfD0gVjRMMl9DVFJMX0ZMQUdfUkVBRF9PTkxZOw0KKw0KKwlwaXhlbF9yYXRlID0g
dG9fcGl4ZWxfcmF0ZSgwKTsNCisJdjRsMl9jdHJsX25ld19zdGQoaGFuZGxlciwgTlVMTCwgVjRM
Ml9DSURfUElYRUxfUkFURSwgMCwgcGl4ZWxfcmF0ZSwgMSwNCisJCQkgIHBpeGVsX3JhdGUpOw0K
Kw0KKwloX2JsYW5rID0gbW9kZS0+aHRzX2RlZiAtIG1vZGUtPndpZHRoOw0KKwl2NGwyX2N0cmxf
bmV3X3N0ZChoYW5kbGVyLCBOVUxMLCBWNEwyX0NJRF9IQkxBTkssIGhfYmxhbmssIGhfYmxhbmss
IDEsDQorCQkJICBoX2JsYW5rKTsNCisNCisJdmJsYW5rX2RlZiA9IG1vZGUtPnZ0c19kZWYgLSBt
b2RlLT5oZWlnaHQ7DQorCXY0bDJfY3RybF9uZXdfc3RkKGhhbmRsZXIsICZvdjAyYTEwX2N0cmxf
b3BzLCBWNEwyX0NJRF9WQkxBTkssDQorCQkJICB2YmxhbmtfZGVmLCBPVjAyQTEwX1ZUU19NQVgg
LSBtb2RlLT5oZWlnaHQsIDEsDQorCQkJICB2YmxhbmtfZGVmKTsNCisNCisJZXhwb3N1cmVfbWF4
ID0gbW9kZS0+dnRzX2RlZiAtIDQ7DQorCW92MDJhMTAtPmV4cG9zdXJlID0gdjRsMl9jdHJsX25l
d19zdGQoaGFuZGxlciwgJm92MDJhMTBfY3RybF9vcHMsDQorCQkJCQkgICAgICBWNEwyX0NJRF9F
WFBPU1VSRSwNCisJCQkJCSAgICAgIE9WMDJBMTBfRVhQT1NVUkVfTUlOLA0KKwkJCQkJICAgICAg
ZXhwb3N1cmVfbWF4LA0KKwkJCQkJICAgICAgT1YwMkExMF9FWFBPU1VSRV9TVEVQLA0KKwkJCQkJ
ICAgICAgbW9kZS0+ZXhwX2RlZik7DQorDQorCXY0bDJfY3RybF9uZXdfc3RkKGhhbmRsZXIsICZv
djAyYTEwX2N0cmxfb3BzLA0KKwkJCSAgVjRMMl9DSURfQU5BTE9HVUVfR0FJTiwgT1YwMkExMF9H
QUlOX01JTiwNCisJCQkgIE9WMDJBMTBfR0FJTl9NQVgsIE9WMDJBMTBfR0FJTl9TVEVQLA0KKwkJ
CSAgT1YwMkExMF9HQUlOX0RFRkFVTFQpOw0KKw0KKwl2NGwyX2N0cmxfbmV3X3N0ZF9tZW51X2l0
ZW1zKGhhbmRsZXIsICZvdjAyYTEwX2N0cmxfb3BzLA0KKwkJCQkgICAgIFY0TDJfQ0lEX1RFU1Rf
UEFUVEVSTiwNCisJCQkJICAgICBBUlJBWV9TSVpFKG92MDJhMTBfdGVzdF9wYXR0ZXJuX21lbnUp
IC0gMSwNCisJCQkJICAgICAwLCAwLCBvdjAyYTEwX3Rlc3RfcGF0dGVybl9tZW51KTsNCisNCisJ
aWYgKGhhbmRsZXItPmVycm9yKSB7DQorCQlyZXQgPSBoYW5kbGVyLT5lcnJvcjsNCisJCWRldl9l
cnIoJmNsaWVudC0+ZGV2LCAiZmFpbGVkIHRvIGluaXQgY29udHJvbHMoJWQpXG4iLCByZXQpOw0K
KwkJZ290byBlcnJfZnJlZV9oYW5kbGVyOw0KKwl9DQorDQorCW92MDJhMTAtPnN1YmRldi5jdHJs
X2hhbmRsZXIgPSBoYW5kbGVyOw0KKw0KKwlyZXR1cm4gMDsNCisNCitlcnJfZnJlZV9oYW5kbGVy
Og0KKwl2NGwyX2N0cmxfaGFuZGxlcl9mcmVlKGhhbmRsZXIpOw0KKw0KKwlyZXR1cm4gcmV0Ow0K
K30NCisNCitzdGF0aWMgaW50IG92MDJhMTBfY2hlY2tfaHdjZmcoc3RydWN0IGRldmljZSAqZGV2
LCBzdHJ1Y3Qgb3YwMmExMCAqb3YwMmExMCkNCit7DQorCXN0cnVjdCBmd25vZGVfaGFuZGxlICpl
cDsNCisJc3RydWN0IGZ3bm9kZV9oYW5kbGUgKmZ3bm9kZSA9IGRldl9md25vZGUoZGV2KTsNCisJ
c3RydWN0IHY0bDJfZndub2RlX2VuZHBvaW50IGJ1c19jZmcgPSB7DQorCQkuYnVzX3R5cGUgPSBW
NEwyX01CVVNfQ1NJMl9EUEhZLA0KKwl9Ow0KKwl1bnNpZ25lZCBpbnQgaSwgajsNCisJaW50IHJl
dDsNCisNCisJaWYgKCFmd25vZGUpDQorCQlyZXR1cm4gLUVJTlZBTDsNCisNCisJZXAgPSBmd25v
ZGVfZ3JhcGhfZ2V0X25leHRfZW5kcG9pbnQoZndub2RlLCBOVUxMKTsNCisJaWYgKCFlcCkNCisJ
CXJldHVybiAtRU5YSU87DQorDQorCXJldCA9IHY0bDJfZndub2RlX2VuZHBvaW50X2FsbG9jX3Bh
cnNlKGVwLCAmYnVzX2NmZyk7DQorCWZ3bm9kZV9oYW5kbGVfcHV0KGVwKTsNCisJaWYgKHJldCkN
CisJCXJldHVybiByZXQ7DQorDQorCWlmICghYnVzX2NmZy5ucl9vZl9saW5rX2ZyZXF1ZW5jaWVz
KSB7DQorCQlkZXZfZXJyKGRldiwgIm5vIGxpbmsgZnJlcXVlbmNpZXMgZGVmaW5lZCIpOw0KKwkJ
cmV0ID0gLUVJTlZBTDsNCisJCWdvdG8gY2hlY2tfaHdjZmdfZXJyb3I7DQorCX0NCisNCisJZm9y
IChpID0gMDsgaSA8IEFSUkFZX1NJWkUobGlua19mcmVxX21lbnVfaXRlbXMpOyBpKyspIHsNCisJ
CWZvciAoaiA9IDA7IGogPCBidXNfY2ZnLm5yX29mX2xpbmtfZnJlcXVlbmNpZXM7IGorKykgew0K
KwkJCWlmIChsaW5rX2ZyZXFfbWVudV9pdGVtc1tpXSA9PQ0KKwkJCQlidXNfY2ZnLmxpbmtfZnJl
cXVlbmNpZXNbal0pDQorCQkJCWJyZWFrOw0KKwkJfQ0KKw0KKwkJaWYgKGogPT0gYnVzX2NmZy5u
cl9vZl9saW5rX2ZyZXF1ZW5jaWVzKSB7DQorCQkJZGV2X2VycihkZXYsICJubyBsaW5rIGZyZXF1
ZW5jeSAlbGxkIHN1cHBvcnRlZCIsDQorCQkJCWxpbmtfZnJlcV9tZW51X2l0ZW1zW2ldKTsNCisJ
CQlyZXQgPSAtRUlOVkFMOw0KKwkJCWdvdG8gY2hlY2tfaHdjZmdfZXJyb3I7DQorCQl9DQorCX0N
CisNCitjaGVja19od2NmZ19lcnJvcjoNCisJdjRsMl9md25vZGVfZW5kcG9pbnRfZnJlZSgmYnVz
X2NmZyk7DQorDQorCXJldHVybiByZXQ7DQorfQ0KKw0KK3N0YXRpYyBpbnQgb3YwMmExMF9wcm9i
ZShzdHJ1Y3QgaTJjX2NsaWVudCAqY2xpZW50KQ0KK3sNCisJc3RydWN0IGRldmljZSAqZGV2ID0g
JmNsaWVudC0+ZGV2Ow0KKwlzdHJ1Y3Qgb3YwMmExMCAqb3YwMmExMDsNCisJdW5zaWduZWQgaW50
IHJvdGF0aW9uOw0KKwl1bnNpZ25lZCBpbnQgY2xvY2tfbGFuZV90eF9zcGVlZDsNCisJdW5zaWdu
ZWQgaW50IGk7DQorCWludCByZXQ7DQorDQorCW92MDJhMTAgPSBkZXZtX2t6YWxsb2MoZGV2LCBz
aXplb2YoKm92MDJhMTApLCBHRlBfS0VSTkVMKTsNCisJaWYgKCFvdjAyYTEwKQ0KKwkJcmV0dXJu
IC1FTk9NRU07DQorDQorCXJldCA9IG92MDJhMTBfY2hlY2tfaHdjZmcoZGV2LCBvdjAyYTEwKTsN
CisJaWYgKHJldCkgew0KKwkJZGV2X2VycihkZXYsICJmYWlsZWQgdG8gY2hlY2sgSFcgY29uZmln
dXJhdGlvbjogJWQiLCByZXQpOw0KKwkJcmV0dXJuIHJldDsNCisJfQ0KKw0KKwl2NGwyX2kyY19z
dWJkZXZfaW5pdCgmb3YwMmExMC0+c3ViZGV2LCBjbGllbnQsICZvdjAyYTEwX3N1YmRldl9vcHMp
Ow0KKwlvdjAyYTEwLT5taXBpX2Nsb2NrX3R4X3NwZWVkID0gT1YwMkExMF9NSVBJX1RYX1NQRUVE
X0RFRkFVTFQ7DQorCW92MDJhMTAtPmZtdC5jb2RlID0gTUVESUFfQlVTX0ZNVF9TQkdHUjEwXzFY
MTA7DQorDQorCS8qIE9wdGlvbmFsIGluZGljYXRpb24gb2YgcGh5c2ljYWwgcm90YXRpb24gb2Yg
c2Vuc29yICovDQorCXJldCA9IGZ3bm9kZV9wcm9wZXJ0eV9yZWFkX3UzMihkZXZfZndub2RlKGRl
diksICJyb3RhdGlvbiIsICZyb3RhdGlvbik7DQorCWlmICghcmV0ICYmIHJvdGF0aW9uID09IDE4
MCkgew0KKwkJb3YwMmExMC0+dXBzaWRlX2Rvd24gPSB0cnVlOw0KKwkJb3YwMmExMC0+Zm10LmNv
ZGUgPSBNRURJQV9CVVNfRk1UX1NSR0dCMTBfMVgxMDsNCisJfQ0KKw0KKwkvKiBPcHRpb25hbCBp
bmRpY2F0aW9uIG9mIG1pcGkgVFggc3BlZWQgKi8NCisJcmV0ID0gZndub2RlX3Byb3BlcnR5X3Jl
YWRfdTMyKGRldl9md25vZGUoZGV2KSwgIm92dGksbWlwaS10eC1zcGVlZCIsDQorCQkJCSAgICAg
ICAmY2xvY2tfbGFuZV90eF9zcGVlZCk7DQorDQorCWlmICghcmV0KQ0KKwkJb3YwMmExMC0+bWlw
aV9jbG9ja190eF9zcGVlZCA9IGNsb2NrX2xhbmVfdHhfc3BlZWQ7DQorDQorCS8qIEdldCBzeXN0
ZW0gY2xvY2sgKGVjbGspICovDQorCW92MDJhMTAtPmVjbGsgPSBkZXZtX2Nsa19nZXQoZGV2LCAi
ZWNsayIpOw0KKwlpZiAoSVNfRVJSKG92MDJhMTAtPmVjbGspKSB7DQorCQlyZXQgPSBQVFJfRVJS
KG92MDJhMTAtPmVjbGspOw0KKwkJZGV2X2VycihkZXYsICJmYWlsZWQgdG8gZ2V0IGVjbGsgJWRc
biIsIHJldCk7DQorCQlyZXR1cm4gcmV0Ow0KKwl9DQorDQorCXJldCA9IGZ3bm9kZV9wcm9wZXJ0
eV9yZWFkX3UzMihkZXZfZndub2RlKGRldiksICJjbG9jay1mcmVxdWVuY3kiLA0KKwkJCQkgICAg
ICAgJm92MDJhMTAtPmVjbGtfZnJlcSk7DQorCWlmIChyZXQpIHsNCisJCWRldl9lcnIoZGV2LCAi
ZmFpbGVkIHRvIGdldCBlY2xrIGZyZXF1ZW5jeVxuIik7DQorCQlyZXR1cm4gcmV0Ow0KKwl9DQor
DQorCXJldCA9IGNsa19zZXRfcmF0ZShvdjAyYTEwLT5lY2xrLCBvdjAyYTEwLT5lY2xrX2ZyZXEp
Ow0KKwlpZiAocmV0KSB7DQorCQlkZXZfZXJyKGRldiwgImZhaWxlZCB0byBzZXQgZWNsayBmcmVx
dWVuY3kgKDI0TUh6KVxuIik7DQorCQlyZXR1cm4gcmV0Ow0KKwl9DQorDQorCWlmIChjbGtfZ2V0
X3JhdGUob3YwMmExMC0+ZWNsaykgIT0gT1YwMkExMF9FQ0xLX0ZSRVEpIHsNCisJCWRldl93YXJu
KGRldiwgIndyb25nIGVjbGsgZnJlcXVlbmN5ICVkIEh6LCBleHBlY3RlZDogJWQgSHpcbiIsDQor
CQkJIG92MDJhMTAtPmVjbGtfZnJlcSwgT1YwMkExMF9FQ0xLX0ZSRVEpOw0KKwkJcmV0dXJuIC1F
SU5WQUw7DQorCX0NCisNCisJb3YwMmExMC0+cGRfZ3BpbyA9IGRldm1fZ3Bpb2RfZ2V0KGRldiwg
InBvd2VyZG93biIsIEdQSU9EX09VVF9ISUdIKTsNCisJaWYgKElTX0VSUihvdjAyYTEwLT5wZF9n
cGlvKSkgew0KKwkJcmV0ID0gUFRSX0VSUihvdjAyYTEwLT5wZF9ncGlvKTsNCisJCWRldl9lcnIo
ZGV2LCAiZmFpbGVkIHRvIGdldCBwb3dlcmRvd24tZ3Bpb3MgJWRcbiIsIHJldCk7DQorCQlyZXR1
cm4gcmV0Ow0KKwl9DQorDQorCW92MDJhMTAtPnJzdF9ncGlvID0gZGV2bV9ncGlvZF9nZXQoZGV2
LCAicmVzZXQiLCBHUElPRF9PVVRfTE9XKTsNCisJaWYgKElTX0VSUihvdjAyYTEwLT5yc3RfZ3Bp
bykpIHsNCisJCXJldCA9IFBUUl9FUlIob3YwMmExMC0+cnN0X2dwaW8pOw0KKwkJZGV2X2Vycihk
ZXYsICJmYWlsZWQgdG8gZ2V0IHJlc2V0LWdwaW9zICVkXG4iLCByZXQpOw0KKwkJcmV0dXJuIHJl
dDsNCisJfQ0KKw0KKwlmb3IgKGkgPSAwOyBpIDwgQVJSQVlfU0laRShvdjAyYTEwX3N1cHBseV9u
YW1lcyk7IGkrKykNCisJCW92MDJhMTAtPnN1cHBsaWVzW2ldLnN1cHBseSA9IG92MDJhMTBfc3Vw
cGx5X25hbWVzW2ldOw0KKw0KKwlyZXQgPSBkZXZtX3JlZ3VsYXRvcl9idWxrX2dldChkZXYsIEFS
UkFZX1NJWkUob3YwMmExMF9zdXBwbHlfbmFtZXMpLA0KKwkJCQkgICAgICBvdjAyYTEwLT5zdXBw
bGllcyk7DQorCWlmIChyZXQpIHsNCisJCWRldl9lcnIoZGV2LCAiZmFpbGVkIHRvIGdldCByZWd1
bGF0b3JzXG4iKTsNCisJCXJldHVybiByZXQ7DQorCX0NCisNCisJbXV0ZXhfaW5pdCgmb3YwMmEx
MC0+bXV0ZXgpOw0KKwlvdjAyYTEwLT5jdXJfbW9kZSA9ICZzdXBwb3J0ZWRfbW9kZXNbMF07DQor
DQorCXJldCA9IG92MDJhMTBfaW5pdGlhbGl6ZV9jb250cm9scyhvdjAyYTEwKTsNCisJaWYgKHJl
dCkgew0KKwkJZGV2X2VycihkZXYsICJmYWlsZWQgdG8gaW5pdGlhbGl6ZSBjb250cm9sc1xuIik7
DQorCQlnb3RvIGVycl9kZXN0cm95X211dGV4Ow0KKwl9DQorDQorCW92MDJhMTAtPnN1YmRldi5m
bGFncyB8PSBWNEwyX1NVQkRFVl9GTF9IQVNfREVWTk9ERTsNCisJb3YwMmExMC0+c3ViZGV2LmVu
dGl0eS5vcHMgPSAmb3YwMmExMF9zdWJkZXZfZW50aXR5X29wczsNCisJb3YwMmExMC0+c3ViZGV2
LmVudGl0eS5mdW5jdGlvbiA9IE1FRElBX0VOVF9GX0NBTV9TRU5TT1I7DQorCW92MDJhMTAtPnBh
ZC5mbGFncyA9IE1FRElBX1BBRF9GTF9TT1VSQ0U7DQorDQorCXJldCA9IG1lZGlhX2VudGl0eV9w
YWRzX2luaXQoJm92MDJhMTAtPnN1YmRldi5lbnRpdHksIDEsICZvdjAyYTEwLT5wYWQpOw0KKwlp
ZiAocmV0IDwgMCkgew0KKwkJZGV2X2VycihkZXYsICJmYWlsZWQgdG8gaW5pdCBlbnRpdHkgcGFk
czogJWQiLCByZXQpOw0KKwkJZ290byBlcnJfZnJlZV9oYW5kbGVyOw0KKwl9DQorDQorCXBtX3J1
bnRpbWVfZW5hYmxlKGRldik7DQorCWlmICghcG1fcnVudGltZV9lbmFibGVkKGRldikpIHsNCisJ
CXJldCA9IG92MDJhMTBfcG93ZXJfb24oZGV2KTsNCisJCWlmIChyZXQgPCAwKSB7DQorCQkJZGV2
X2VycihkZXYsICJmYWlsZWQgdG8gcG93ZXIgb246ICVkXG4iLCByZXQpOw0KKwkJCWdvdG8gZXJy
X2NsZWFuX2VudGl0eTsNCisJCX0NCisJfQ0KKw0KKwlyZXQgPSB2NGwyX2FzeW5jX3JlZ2lzdGVy
X3N1YmRldigmb3YwMmExMC0+c3ViZGV2KTsNCisJaWYgKHJldCkgew0KKwkJZGV2X2VycihkZXYs
ICJmYWlsZWQgdG8gcmVnaXN0ZXIgVjRMMiBzdWJkZXY6ICVkIiwgcmV0KTsNCisJCWdvdG8gZXJy
X3Bvd2VyX29mZjsNCisJfQ0KKw0KKwlyZXR1cm4gMDsNCisNCitlcnJfcG93ZXJfb2ZmOg0KKwlp
ZiAocG1fcnVudGltZV9lbmFibGVkKGRldikpDQorCQlwbV9ydW50aW1lX2Rpc2FibGUoZGV2KTsN
CisJZWxzZQ0KKwkJb3YwMmExMF9wb3dlcl9vZmYoZGV2KTsNCitlcnJfY2xlYW5fZW50aXR5Og0K
KwltZWRpYV9lbnRpdHlfY2xlYW51cCgmb3YwMmExMC0+c3ViZGV2LmVudGl0eSk7DQorZXJyX2Zy
ZWVfaGFuZGxlcjoNCisJdjRsMl9jdHJsX2hhbmRsZXJfZnJlZShvdjAyYTEwLT5zdWJkZXYuY3Ry
bF9oYW5kbGVyKTsNCitlcnJfZGVzdHJveV9tdXRleDoNCisJbXV0ZXhfZGVzdHJveSgmb3YwMmEx
MC0+bXV0ZXgpOw0KKw0KKwlyZXR1cm4gcmV0Ow0KK30NCisNCitzdGF0aWMgaW50IG92MDJhMTBf
cmVtb3ZlKHN0cnVjdCBpMmNfY2xpZW50ICpjbGllbnQpDQorew0KKwlzdHJ1Y3QgdjRsMl9zdWJk
ZXYgKnNkID0gaTJjX2dldF9jbGllbnRkYXRhKGNsaWVudCk7DQorCXN0cnVjdCBvdjAyYTEwICpv
djAyYTEwID0gdG9fb3YwMmExMChzZCk7DQorDQorCXY0bDJfYXN5bmNfdW5yZWdpc3Rlcl9zdWJk
ZXYoc2QpOw0KKwltZWRpYV9lbnRpdHlfY2xlYW51cCgmc2QtPmVudGl0eSk7DQorCXY0bDJfY3Ry
bF9oYW5kbGVyX2ZyZWUoc2QtPmN0cmxfaGFuZGxlcik7DQorCXBtX3J1bnRpbWVfZGlzYWJsZSgm
Y2xpZW50LT5kZXYpOw0KKwlpZiAoIXBtX3J1bnRpbWVfc3RhdHVzX3N1c3BlbmRlZCgmY2xpZW50
LT5kZXYpKQ0KKwkJb3YwMmExMF9wb3dlcl9vZmYoJmNsaWVudC0+ZGV2KTsNCisJcG1fcnVudGlt
ZV9zZXRfc3VzcGVuZGVkKCZjbGllbnQtPmRldik7DQorCW11dGV4X2Rlc3Ryb3koJm92MDJhMTAt
Pm11dGV4KTsNCisNCisJcmV0dXJuIDA7DQorfQ0KKw0KK3N0YXRpYyBjb25zdCBzdHJ1Y3Qgb2Zf
ZGV2aWNlX2lkIG92MDJhMTBfb2ZfbWF0Y2hbXSA9IHsNCisJeyAuY29tcGF0aWJsZSA9ICJvdnRp
LG92MDJhMTAiIH0sDQorCXt9DQorfTsNCitNT0RVTEVfREVWSUNFX1RBQkxFKG9mLCBvdjAyYTEw
X29mX21hdGNoKTsNCisNCitzdGF0aWMgc3RydWN0IGkyY19kcml2ZXIgb3YwMmExMF9pMmNfZHJp
dmVyID0gew0KKwkuZHJpdmVyID0gew0KKwkJLm5hbWUgPSAib3YwMmExMCIsDQorCQkucG0gPSAm
b3YwMmExMF9wbV9vcHMsDQorCQkub2ZfbWF0Y2hfdGFibGUgPSBvdjAyYTEwX29mX21hdGNoLA0K
Kwl9LA0KKwkucHJvYmVfbmV3CT0gJm92MDJhMTBfcHJvYmUsDQorCS5yZW1vdmUJCT0gJm92MDJh
MTBfcmVtb3ZlLA0KK307DQorDQorbW9kdWxlX2kyY19kcml2ZXIob3YwMmExMF9pMmNfZHJpdmVy
KTsNCisNCitNT0RVTEVfQVVUSE9SKCJEb25nY2h1biBaaHUgPGRvbmdjaHVuLnpodUBtZWRpYXRl
ay5jb20+Iik7DQorTU9EVUxFX0RFU0NSSVBUSU9OKCJPbW5pVmlzaW9uIE9WMDJBMTAgc2Vuc29y
IGRyaXZlciIpOw0KK01PRFVMRV9MSUNFTlNFKCJHUEwgdjIiKTsNCisNCi0tIA0KMi45LjINCg==

